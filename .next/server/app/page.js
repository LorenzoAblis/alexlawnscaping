(()=>{var e={};e.id=931,e.ids=[931],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},1808:e=>{"use strict";e.exports=require("net")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},8346:(e,t,i)=>{"use strict";i.r(t),i.d(t,{GlobalError:()=>o.a,__next_app__:()=>d,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>h}),i(7965),i(7764),i(5866);var n=i(3191),r=i(8716),s=i(7922),o=i.n(s),a=i(5231),l={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);i.d(t,l);let h=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(i.bind(i,7965)),"C:\\Users\\loren\\OneDrive\\Desktop\\Projects\\alexlawnscaping\\app\\page.js"]}]},{layout:[()=>Promise.resolve().then(i.bind(i,7764)),"C:\\Users\\loren\\OneDrive\\Desktop\\Projects\\alexlawnscaping\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(i.t.bind(i,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\loren\\OneDrive\\Desktop\\Projects\\alexlawnscaping\\app\\page.js"],u="/page",d={require:i,loadChunk:()=>Promise.resolve()},p=new n.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:h}})},7623:(e,t,i)=>{Promise.resolve().then(i.bind(i,7991)),Promise.resolve().then(i.bind(i,6798)),Promise.resolve().then(i.bind(i,6167)),Promise.resolve().then(i.t.bind(i,2481,23)),Promise.resolve().then(i.bind(i,381))},8340:(e,t,i)=>{Promise.resolve().then(i.bind(i,8781)),Promise.resolve().then(i.bind(i,9694)),Promise.resolve().then(i.bind(i,9662)),Promise.resolve().then(i.t.bind(i,4064,23))},1375:(e,t,i)=>{Promise.resolve().then(i.t.bind(i,2994,23)),Promise.resolve().then(i.t.bind(i,6114,23)),Promise.resolve().then(i.t.bind(i,9727,23)),Promise.resolve().then(i.t.bind(i,9671,23)),Promise.resolve().then(i.t.bind(i,1868,23)),Promise.resolve().then(i.t.bind(i,4759,23))},7991:(e,t,i)=>{"use strict";i.d(t,{default:()=>l});var n=i(326);i(8090);var r=i(7577),s=i(381),o=i(9407),a=i(8558);let l=()=>{let[e,t]=(0,r.useState)({name:"",msg:"",approved:!1}),i=async i=>{if(i.preventDefault(),console.log("feedback test"),e.name){let i=e.name.replace(/[./]/g,"a");try{await (0,a.t8)((0,a.iH)(o.db,"feedback/"+i),{name:e.name,msg:e.msg,approved:!1}),t({name:"",msg:"",approved:!1}),s.ZP.success("Thank you for your feedback! We hope to work with you again!")}catch(e){console.error("Error submitting feedback: ",e),s.ZP.error(`Failed to submit feedback. Please try again. 

${e}`)}}else s.ZP.error("Please enter your name.")},l=e=>{let{name:i,value:n}=e.target;t(e=>({...e,[i]:n}))};return(0,n.jsxs)("section",{className:"feedback-section",children:[n.jsx("div",{className:"feedback-header",children:n.jsx("h2",{children:"Help us Improve"})}),(0,n.jsxs)("form",{className:"feedback-form",onSubmit:i,children:[n.jsx("h3",{children:"Your name"}),n.jsx("input",{type:"text",id:"name",name:"name",value:e.name,onChange:l}),n.jsx("h3",{children:"Feedback / Opinions"}),n.jsx("textarea",{id:"feedback",name:"msg",value:e.msg,onChange:l}),n.jsx("button",{type:"submit",children:"Submit"})]})]})}},6798:(e,t,i)=>{"use strict";i.d(t,{default:()=>a});var n=i(326);i(5512);var r=i(7577),s=i(9029),o=i.n(s);let a=()=>{let e=[{name:"Home",route:""},{name:"Services",route:"services"},{name:"Testimonials",route:"testimonials"},{name:"About",route:"about"},{name:"Founder",route:"founder"},{name:"Contact",route:"contact"}],[t,i]=(0,r.useState)(!1),[s,a]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e=()=>{i(window.scrollY>100)};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("nav",{className:`${t?"sticky":""}`,children:[n.jsx("button",{onClick:()=>a(!0),children:n.jsx("i",{class:"bi bi-list"})}),n.jsx(o(),{src:"/logo.webp",alt:"logo",className:"next-img",width:500,height:100}),(0,n.jsxs)("div",{className:"link-container",children:[e.map((e,t)=>n.jsx("a",{href:`#${e.route}`,children:e.name},t)),n.jsx("a",{href:"tel:224-522-4243",children:n.jsx("i",{class:"bi bi-telephone-fill"})})]}),n.jsx("a",{href:"tel:224-522-4243",children:n.jsx("i",{class:"bi bi-telephone-fill"})})]}),(0,n.jsxs)("aside",{className:`sidebar ${s?"show-sidebar":"hide-sidebar"}`,children:[n.jsx("button",{onClick:()=>a(!1),children:n.jsx("i",{class:"bi bi-list"})}),n.jsx("div",{className:"link-container",children:e.map((e,t)=>n.jsx("a",{href:`#${e.route}`,children:e.name},t))})]})]})}},6167:(e,t,i)=>{"use strict";i.d(t,{default:()=>c});var n=i(326),r=i(8439),s=i.n(r),o=i(7577),a=i(9407),l=i(8558);i(7067);let h=({name:e,content:t})=>(0,n.jsxs)("article",{className:"card",children:[n.jsx("p",{className:"testimonials-text",children:t}),(0,n.jsxs)("h4",{className:"testimonials-name",children:["- ",e]})]});h.propTypes={name:s().string.isRequired,content:s().string.isRequired};let c=()=>{let[e,t]=(0,o.useState)([]),i=()=>{let e=(0,l.iH)(a.db,"feedback");(0,l.jM)(e,e=>{let i=e.val();i&&t(Object.values(i).filter(e=>e.approved))})};return(0,o.useEffect)(()=>{i()},[]),(0,n.jsxs)("section",{className:"testimonials-section",id:"testimonials",children:[(0,n.jsxs)("div",{className:"testimonials-header",children:[n.jsx("h4",{className:"testimonials-subtitle fw-semibold",children:"Testimonials"}),n.jsx("h2",{className:"testimonials-title fw-semibold",children:"Voices of Satisfied Customers"})]}),n.jsx("div",{className:"testimonials-content",children:e.map((e,t)=>e.approved&&n.jsx(h,{name:e.name,content:e.msg},t))})]})}},9407:(e,t,i)=>{"use strict";i.d(t,{db:()=>o});var n=i(3497);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(0,n.KN)("firebase","10.12.2","app");var r=i(8558);let s=(0,n.ZF)({apiKey:"AIzaSyDsU2GSr5G7gi_R6XLoCnol6GEy-ImoJQM",authDomain:"mpgreenteens.firebaseapp.com",databaseURL:"https://mpgreenteens-default-rtdb.firebaseio.com",projectId:"mpgreenteens",storageBucket:"mpgreenteens.appspot.com",messagingSenderId:"614308423101",appId:"1:614308423101:web:456850e84f6ad9f6551ed4",measurementId:"G-JJNK6EGFJN"}),o=(0,r.N8)(s)},9901:(e,t,i)=>{"use strict";var n=i(2781).Stream,r=i(3837),s=i(8679),o=i(5766),a=i(7861),l=i(6466),h=i(8413),c=function(e,t,i){this.writable=!0,i=i||{},this._stream=t.socket,this._ping=i.ping||this.DEFAULT_PING,this._retry=i.retry||this.DEFAULT_RETRY;var n=s.isSecureRequest(e)?"https:":"http:";this.url=n+"//"+e.headers.host+e.url,this.lastEventId=e.headers["last-event-id"]||"",this.readyState=a.CONNECTING;var r=new o,l=this;if(i.headers)for(var h in i.headers)r.set(h,i.headers[h]);if(this._stream&&this._stream.writable){process.nextTick(function(){l._open()}),this._stream.setTimeout(0),this._stream.setNoDelay(!0);var c="HTTP/1.1 200 OK\r\nContent-Type: text/event-stream\r\nCache-Control: no-cache, no-store\r\nConnection: close\r\n"+r.toString()+"\r\nretry: "+Math.floor(1e3*this._retry)+"\r\n\r\n";this._write(c),this._stream.on("drain",function(){l.emit("drain")}),this._ping&&(this._pingTimer=setInterval(function(){l.ping()},1e3*this._ping)),["error","end"].forEach(function(e){l._stream.on(e,function(){l.close()})})}};r.inherits(c,n),c.isEventSource=function(e){return"GET"===e.method&&(e.headers.accept||"").split(/\s*,\s*/).indexOf("text/event-stream")>=0};var u={DEFAULT_PING:10,DEFAULT_RETRY:5,_write:function(e){if(!this.writable)return!1;try{return this._stream.write(e,"utf8")}catch(e){return!1}},_open:function(){if(this.readyState===a.CONNECTING){this.readyState=a.OPEN;var e=new h("open");e.initEvent("open",!1,!1),this.dispatchEvent(e)}},write:function(e){return this.send(e)},end:function(e){void 0!==e&&this.write(e),this.close()},send:function(e,t){if(this.readyState>a.OPEN)return!1;e=String(e).replace(/(\r\n|\r|\n)/g,"$1data: ");var i="";return(t=t||{}).event&&(i+="event: "+t.event+"\r\n"),t.id&&(i+="id: "+t.id+"\r\n"),i+="data: "+e+"\r\n\r\n",this._write(i)},ping:function(){return this._write(":\r\n\r\n")},close:function(){if(this.readyState>a.OPEN)return!1;this.readyState=a.CLOSED,this.writable=!1,this._pingTimer&&clearInterval(this._pingTimer),this._stream&&this._stream.end();var e=new h("close");return e.initEvent("close",!1,!1),this.dispatchEvent(e),!0}};for(var d in u)c.prototype[d]=u[d];for(var p in l)c.prototype[p]=l[p];e.exports=c},3968:(e,t,i)=>{"use strict";var n=i(3837),r=i(8679),s=i(7861),o=function(e,t,i,n,o){o=o||{},this._stream=t,this._driver=r.http(e,{maxLength:o.maxLength,protocols:n});var a=this;if(this._stream&&this._stream.writable){if(!this._stream.readable)return this._stream.end();var l=function(){a._stream.removeListener("data",l)};this._stream.on("data",l),s.call(this,o),process.nextTick(function(){a._driver.start(),a._driver.io.write(i)})}};n.inherits(o,s),o.isWebSocket=function(e){return r.isWebSocket(e)},o.validateOptions=function(e,t){r.validateOptions(e,t)},o.WebSocket=o,o.Client=i(1282),o.EventSource=i(9901),e.exports=o},7861:(e,t,i)=>{"use strict";var n=i(2781).Stream,r=i(3837),s=i(8679),o=i(6466),a=i(8413),l=function(e){e=e||{},s.validateOptions(e,["headers","extensions","maxLength","ping","proxy","tls","ca"]),this.readable=this.writable=!0;var t=e.headers;if(t)for(var i in t)this._driver.setHeader(i,t[i]);var n=e.extensions;n&&[].concat(n).forEach(this._driver.addExtension,this._driver),this._ping=e.ping,this._pingId=0,this.readyState=l.CONNECTING,this.bufferedAmount=0,this.protocol="",this.url=this._driver.url,this.version=this._driver.version;var r=this;this._driver.on("open",function(e){r._open()}),this._driver.on("message",function(e){r._receiveMessage(e.data)}),this._driver.on("close",function(e){r._beginClose(e.reason,e.code)}),this._driver.on("error",function(e){r._emitError(e.message)}),this.on("error",function(){}),this._driver.messages.on("drain",function(){r.emit("drain")}),this._ping&&(this._pingTimer=setInterval(function(){r._pingId+=1,r.ping(r._pingId.toString())},1e3*this._ping)),this._configureStream(),this._proxy||(this._stream.pipe(this._driver.io),this._driver.io.pipe(this._stream))};r.inherits(l,n),l.CONNECTING=0,l.OPEN=1,l.CLOSING=2,l.CLOSED=3,l.CLOSE_TIMEOUT=3e4;var h={write:function(e){return this.send(e)},end:function(e){void 0!==e&&this.send(e),this.close()},pause:function(){return this._driver.messages.pause()},resume:function(){return this._driver.messages.resume()},send:function(e){return!(this.readyState>l.OPEN)&&(e instanceof Buffer||(e=String(e)),this._driver.messages.write(e))},ping:function(e,t){return!(this.readyState>l.OPEN)&&this._driver.ping(e,t)},close:function(e,t){if(void 0===e&&(e=1e3),void 0===t&&(t=""),1e3!==e&&(e<3e3||e>4999))throw Error("Failed to execute 'close' on WebSocket: The code must be either 1000, or between 3000 and 4999. "+e+" is neither.");if(this.readyState<l.CLOSING){var i=this;this._closeTimer=setTimeout(function(){i._beginClose("",1006)},l.CLOSE_TIMEOUT)}this.readyState!==l.CLOSED&&(this.readyState=l.CLOSING),this._driver.close(t,e)},_configureStream:function(){var e=this;this._stream.setTimeout(0),this._stream.setNoDelay(!0),["close","end"].forEach(function(t){this._stream.on(t,function(){e._finalizeClose()})},this),this._stream.on("error",function(t){e._emitError("Network error: "+e.url+": "+t.message),e._finalizeClose()})},_open:function(){if(this.readyState===l.CONNECTING){this.readyState=l.OPEN,this.protocol=this._driver.protocol||"";var e=new a("open");e.initEvent("open",!1,!1),this.dispatchEvent(e)}},_receiveMessage:function(e){if(this.readyState>l.OPEN)return!1;this.readable&&this.emit("data",e);var t=new a("message",{data:e});t.initEvent("message",!1,!1),this.dispatchEvent(t)},_emitError:function(e){if(!(this.readyState>=l.CLOSING)){var t=new a("error",{message:e});t.initEvent("error",!1,!1),this.dispatchEvent(t)}},_beginClose:function(e,t){this.readyState!==l.CLOSED&&(this.readyState=l.CLOSING,this._closeParams=[e,t],this._stream&&(this._stream.destroy(),this._stream.readable||this._finalizeClose()))},_finalizeClose:function(){if(this.readyState!==l.CLOSED){this.readyState=l.CLOSED,this._closeTimer&&clearTimeout(this._closeTimer),this._pingTimer&&clearInterval(this._pingTimer),this._stream&&this._stream.end(),this.readable&&this.emit("end"),this.readable=this.writable=!1;var e=this._closeParams?this._closeParams[0]:"",t=new a("close",{code:this._closeParams?this._closeParams[1]:1006,reason:e});t.initEvent("close",!1,!1),this.dispatchEvent(t)}}};for(var c in h)l.prototype[c]=h[c];for(var u in o)l.prototype[u]=o[u];e.exports=l},8413:e=>{"use strict";var t=function(e,t){for(var i in this.type=e,t)this[i]=t[i]};t.prototype.initEvent=function(e,t,i){this.type=e,this.bubbles=t,this.cancelable=i},t.prototype.stopPropagation=function(){},t.prototype.preventDefault=function(){},t.CAPTURING_PHASE=1,t.AT_TARGET=2,t.BUBBLING_PHASE=3,e.exports=t},6466:(e,t,i)=>{"use strict";var n=i(8413);e.exports={onopen:null,onmessage:null,onerror:null,onclose:null,addEventListener:function(e,t,i){this.on(e,t)},removeEventListener:function(e,t,i){this.removeListener(e,t)},dispatchEvent:function(e){e.target=e.currentTarget=this,e.eventPhase=n.AT_TARGET,this["on"+e.type]&&this["on"+e.type](e),this.emit(e.type,e)}}},1282:(e,t,i)=>{"use strict";var n=i(3837),r=i(1808),s=i(4404),o=i(7310),a=i(8679),l=i(7861);i(8413);var h={"http:":80,"https:":443,"ws:":80,"wss:":443},c=["https:","wss:"],u=function(e,t,i){i=i||{},this.url=e,this._driver=a.client(this.url,{maxLength:i.maxLength,protocols:t}),["open","error"].forEach(function(e){this._driver.on(e,function(){y.headers=y._driver.headers,y.statusCode=y._driver.statusCode})},this);var n=i.proxy||{},u=o.parse(n.origin||this.url),d=u.port||h[u.protocol],p=c.indexOf(u.protocol)>=0,f=function(){y._onConnect()},_=i.net||{},g=i.tls||{},m=n.origin?n.tls||{}:g,y=this;_.host=m.host=u.hostname,_.port=m.port=d,g.ca=g.ca||i.ca,m.servername=m.servername||u.hostname,this._stream=p?s.connect(m,f):r.connect(_,f),n.origin&&this._configureProxy(n,g),l.call(this,i)};n.inherits(u,l),u.prototype._onConnect=function(){(this._proxy||this._driver).start()},u.prototype._configureProxy=function(e,t){var i,n=o.parse(this.url),r=c.indexOf(n.protocol)>=0,a=this;if(this._proxy=this._driver.proxy(e.origin),e.headers)for(i in e.headers)this._proxy.setHeader(i,e.headers[i]);this._proxy.pipe(this._stream,{end:!1}),this._stream.pipe(this._proxy),this._proxy.on("connect",function(){if(r){var e={socket:a._stream,servername:n.hostname};for(i in t)e[i]=t[i];a._stream=s.connect(e),a._configureStream()}a._driver.io.pipe(a._stream),a._stream.pipe(a._driver.io),a._driver.start()}),this._proxy.on("error",function(e){a._driver.emit("error",e)})},e.exports=u},5433:(e,t,i)=>{var n=i(9491);function r(e){n.ok(e===r.REQUEST||e===r.RESPONSE||void 0===e),void 0===e||this.initialize(e),this.maxHeaderSize=r.maxHeaderSize}t.m=r,r.prototype.initialize=function(e,t){n.ok(e===r.REQUEST||e===r.RESPONSE),this.type=e,this.state=e+"_LINE",this.info={headers:[],upgrade:!1},this.trailers=[],this.line="",this.isChunked=!1,this.connection="",this.headerSize=0,this.body_bytes=null,this.isUserCall=!1,this.hadError=!1},r.encoding="ascii",r.maxHeaderSize=81920,r.REQUEST="REQUEST",r.RESPONSE="RESPONSE";var s=r.kOnHeaders=1,o=r.kOnHeadersComplete=2,a=r.kOnBody=3,l=r.kOnMessageComplete=4;r.prototype[s]=r.prototype[o]=r.prototype[a]=r.prototype[l]=function(){};var h=!0;Object.defineProperty(r,"kOnExecute",{get:function(){return h=!1,99}});var c=r.methods=["DELETE","GET","HEAD","POST","PUT","CONNECT","OPTIONS","TRACE","COPY","LOCK","MKCOL","MOVE","PROPFIND","PROPPATCH","SEARCH","UNLOCK","BIND","REBIND","UNBIND","ACL","REPORT","MKACTIVITY","CHECKOUT","MERGE","M-SEARCH","NOTIFY","SUBSCRIBE","UNSUBSCRIBE","PATCH","PURGE","MKCALENDAR","LINK","UNLINK","SOURCE"],u=c.indexOf("CONNECT");r.prototype.reinitialize=r,r.prototype.close=r.prototype.pause=r.prototype.resume=r.prototype.free=function(){},r.prototype._compatMode0_11=!1,r.prototype.getAsyncId=function(){return 0};var d={REQUEST_LINE:!0,RESPONSE_LINE:!0,HEADER:!0};r.prototype.execute=function(e,t,i){if(!(this instanceof r))throw TypeError("not a HTTPParser");t=t||0,i="number"==typeof i?i:e.length,this.chunk=e,this.offset=t;var n=this.end=t+i;try{for(;this.offset<n&&!this[this.state](););}catch(e){if(this.isUserCall)throw e;return this.hadError=!0,e}return(this.chunk=null,i=this.offset-t,d[this.state]&&(this.headerSize+=i,this.headerSize>(this.maxHeaderSize||r.maxHeaderSize)))?Error("max header size exceeded"):i};var p={REQUEST_LINE:!0,RESPONSE_LINE:!0,BODY_RAW:!0};r.prototype.finish=function(){if(!this.hadError){if(!p[this.state])return Error("invalid state for EOF");"BODY_RAW"===this.state&&this.userCall()(this[l]())}},r.prototype.consume=r.prototype.unconsume=r.prototype.getCurrentBuffer=function(){},r.prototype.userCall=function(){this.isUserCall=!0;var e=this;return function(t){return e.isUserCall=!1,t}},r.prototype.nextRequest=function(){this.userCall()(this[l]()),this.reinitialize(this.type)},r.prototype.consumeLine=function(){for(var e=this.end,t=this.chunk,i=this.offset;i<e;i++)if(10===t[i]){var n=this.line+t.toString(r.encoding,this.offset,i);return"\r"===n.charAt(n.length-1)&&(n=n.substr(0,n.length-1)),this.line="",this.offset=i+1,n}this.line+=t.toString(r.encoding,this.offset,this.end),this.offset=this.end};var f=/^([^: \t]+):[ \t]*((?:.*[^ \t])|)/,_=/^[ \t]+(.*[^ \t])/;r.prototype.parseHeader=function(e,t){if(-1!==e.indexOf("\r"))throw y("HPE_LF_EXPECTED");var i=f.exec(e),n=i&&i[1];if(n)t.push(n),t.push(i[2]);else{var r=_.exec(e);r&&t.length&&(t[t.length-1]&&(t[t.length-1]+=" "),t[t.length-1]+=r[1])}};var g=/^([A-Z-]+) ([^ ]+) HTTP\/(\d)\.(\d)$/;r.prototype.REQUEST_LINE=function(){var e=this.consumeLine();if(e){var t=g.exec(e);if(null===t)throw y("HPE_INVALID_CONSTANT");if(this.info.method=this._compatMode0_11?t[1]:c.indexOf(t[1]),-1===this.info.method)throw Error("invalid request method");this.info.url=t[2],this.info.versionMajor=+t[3],this.info.versionMinor=+t[4],this.body_bytes=0,this.state="HEADER"}};var m=/^HTTP\/(\d)\.(\d) (\d{3}) ?(.*)$/;function y(e){var t=Error("Parse Error");return t.code=e,t}r.prototype.RESPONSE_LINE=function(){var e=this.consumeLine();if(e){var t=m.exec(e);if(null===t)throw y("HPE_INVALID_CONSTANT");this.info.versionMajor=+t[1],this.info.versionMinor=+t[2];var i=this.info.statusCode=+t[3];this.info.statusMessage=t[4],((i/100|0)==1||204===i||304===i)&&(this.body_bytes=0),this.state="HEADER"}},r.prototype.shouldKeepAlive=function(){if(this.info.versionMajor>0&&this.info.versionMinor>0){if(-1!==this.connection.indexOf("close"))return!1}else if(-1===this.connection.indexOf("keep-alive"))return!1;return null!==this.body_bytes||!!this.isChunked},r.prototype.HEADER=function(){var e=this.consumeLine();if(void 0!==e){var t=this.info;if(e)this.parseHeader(e,t.headers);else{for(var i,n,s=t.headers,a=!1,l=!1,c=0;c<s.length;c+=2)switch(s[c].toLowerCase()){case"transfer-encoding":this.isChunked="chunked"===s[c+1].toLowerCase();break;case"content-length":if(i=+s[c+1],a){if(i!==this.body_bytes)throw y("HPE_UNEXPECTED_CONTENT_LENGTH")}else a=!0,this.body_bytes=i;break;case"connection":this.connection+=s[c+1].toLowerCase();break;case"upgrade":l=!0}if(this.isChunked&&a&&(a=!1,this.body_bytes=null),l&&-1!=this.connection.indexOf("upgrade")?t.upgrade=this.type===r.REQUEST||101===t.statusCode:t.upgrade=t.method===u,this.isChunked&&t.upgrade&&(this.isChunked=!1),t.shouldKeepAlive=this.shouldKeepAlive(),2===(n=h?this.userCall()(this[o](t)):this.userCall()(this[o](t.versionMajor,t.versionMinor,t.headers,t.method,t.url,t.statusCode,t.statusMessage,t.upgrade,t.shouldKeepAlive))))return this.nextRequest(),!0;if(this.isChunked&&!n)this.state="BODY_CHUNKHEAD";else{if(n||0===this.body_bytes)return this.nextRequest(),t.upgrade;null===this.body_bytes?this.state="BODY_RAW":this.state="BODY_SIZED"}}}},r.prototype.BODY_CHUNKHEAD=function(){var e=this.consumeLine();void 0!==e&&(this.body_bytes=parseInt(e,16),this.body_bytes?this.state="BODY_CHUNK":this.state="BODY_CHUNKTRAILERS")},r.prototype.BODY_CHUNK=function(){var e=Math.min(this.end-this.offset,this.body_bytes);this.userCall()(this[a](this.chunk,this.offset,e)),this.offset+=e,this.body_bytes-=e,this.body_bytes||(this.state="BODY_CHUNKEMPTYLINE")},r.prototype.BODY_CHUNKEMPTYLINE=function(){var e=this.consumeLine();void 0!==e&&(n.equal(e,""),this.state="BODY_CHUNKHEAD")},r.prototype.BODY_CHUNKTRAILERS=function(){var e=this.consumeLine();void 0!==e&&(e?this.parseHeader(e,this.trailers):(this.trailers.length&&this.userCall()(this[s](this.trailers,"")),this.nextRequest()))},r.prototype.BODY_RAW=function(){var e=this.end-this.offset;this.userCall()(this[a](this.chunk,this.offset,e)),this.offset=this.end},r.prototype.BODY_SIZED=function(){var e=Math.min(this.end-this.offset,this.body_bytes);this.userCall()(this[a](this.chunk,this.offset,e)),this.offset+=e,this.body_bytes-=e,this.body_bytes||this.nextRequest()},["Headers","HeadersComplete","Body","MessageComplete"].forEach(function(e){var t=r["kOn"+e];Object.defineProperty(r.prototype,"on"+e,{get:function(){return this[t]},set:function(e){return this._compatMode0_11=!0,u="CONNECT",this[t]=e}})})},2481:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Image",{enumerable:!0,get:function(){return v}});let n=i(1174),r=i(8374),s=i(326),o=r._(i(7577)),a=n._(i(962)),l=n._(i(815)),h=i(3078),c=i(5248),u=i(1206);i(576);let d=i(131),p=n._(i(6820)),f={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1};function _(e,t,i,n,r,s,o){let a=null==e?void 0:e.src;e&&e["data-loaded-src"]!==a&&(e["data-loaded-src"]=a,("decode"in e?e.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(e.parentElement&&e.isConnected){if("empty"!==t&&r(!0),null==i?void 0:i.current){let t=new Event("load");Object.defineProperty(t,"target",{writable:!1,value:e});let n=!1,r=!1;i.current({...t,nativeEvent:t,currentTarget:e,target:e,isDefaultPrevented:()=>n,isPropagationStopped:()=>r,persist:()=>{},preventDefault:()=>{n=!0,t.preventDefault()},stopPropagation:()=>{r=!0,t.stopPropagation()}})}(null==n?void 0:n.current)&&n.current(e)}}))}function g(e){let[t,i]=o.version.split(".",2),n=parseInt(t,10),r=parseInt(i,10);return n>18||18===n&&r>=3?{fetchPriority:e}:{fetchpriority:e}}globalThis.__NEXT_IMAGE_IMPORTED=!0;let m=(0,o.forwardRef)((e,t)=>{let{src:i,srcSet:n,sizes:r,height:a,width:l,decoding:h,className:c,style:u,fetchPriority:d,placeholder:p,loading:f,unoptimized:m,fill:y,onLoadRef:v,onLoadingCompleteRef:b,setBlurComplete:w,setShowAltText:C,sizesInput:E,onLoad:S,onError:x,...I}=e;return(0,s.jsx)("img",{...I,...g(d),loading:f,width:l,height:a,decoding:h,"data-nimg":y?"fill":"1",className:c,style:u,sizes:r,srcSet:n,src:i,ref:(0,o.useCallback)(e=>{t&&("function"==typeof t?t(e):"object"==typeof t&&(t.current=e)),e&&(x&&(e.src=e.src),e.complete&&_(e,p,v,b,w,m,E))},[i,p,v,b,w,x,m,E,t]),onLoad:e=>{_(e.currentTarget,p,v,b,w,m,E)},onError:e=>{C(!0),"empty"!==p&&w(!0),x&&x(e)}})});function y(e){let{isAppRouter:t,imgAttributes:i}=e,n={as:"image",imageSrcSet:i.srcSet,imageSizes:i.sizes,crossOrigin:i.crossOrigin,referrerPolicy:i.referrerPolicy,...g(i.fetchPriority)};return t&&a.default.preload?(a.default.preload(i.src,n),null):(0,s.jsx)(l.default,{children:(0,s.jsx)("link",{rel:"preload",href:i.srcSet?void 0:i.src,...n},"__nimg-"+i.src+i.srcSet+i.sizes)})}let v=(0,o.forwardRef)((e,t)=>{let i=(0,o.useContext)(d.RouterContext),n=(0,o.useContext)(u.ImageConfigContext),r=(0,o.useMemo)(()=>{let e=f||n||c.imageConfigDefault,t=[...e.deviceSizes,...e.imageSizes].sort((e,t)=>e-t),i=e.deviceSizes.sort((e,t)=>e-t);return{...e,allSizes:t,deviceSizes:i}},[n]),{onLoad:a,onLoadingComplete:l}=e,_=(0,o.useRef)(a);(0,o.useEffect)(()=>{_.current=a},[a]);let g=(0,o.useRef)(l);(0,o.useEffect)(()=>{g.current=l},[l]);let[v,b]=(0,o.useState)(!1),[w,C]=(0,o.useState)(!1),{props:E,meta:S}=(0,h.getImgProps)(e,{defaultLoader:p.default,imgConf:r,blurComplete:v,showAltText:w});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m,{...E,unoptimized:S.unoptimized,placeholder:S.placeholder,fill:S.fill,onLoadRef:_,onLoadingCompleteRef:g,setBlurComplete:b,setShowAltText:C,sizesInput:e.sizes,ref:t}),S.priority?(0,s.jsx)(y,{isAppRouter:!i,imgAttributes:E}):null]})});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3484:(e,t,i)=>{"use strict";e.exports=i(1616).vendored.contexts.AmpContext},1206:(e,t,i)=>{"use strict";e.exports=i(1616).vendored.contexts.ImageConfigContext},131:(e,t,i)=>{"use strict";e.exports=i(1616).vendored.contexts.RouterContext},8710:(e,t)=>{"use strict";function i(e){let{ampFirst:t=!1,hybrid:i=!1,hasQuery:n=!1}=void 0===e?{}:e;return t||i&&n}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isInAmpMode",{enumerable:!0,get:function(){return i}})},3078:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImgProps",{enumerable:!0,get:function(){return a}}),i(576);let n=i(380),r=i(5248);function s(e){return void 0!==e.default}function o(e){return void 0===e?e:"number"==typeof e?Number.isFinite(e)?e:NaN:"string"==typeof e&&/^[0-9]+$/.test(e)?parseInt(e,10):NaN}function a(e,t){var i;let a,l,h,{src:c,sizes:u,unoptimized:d=!1,priority:p=!1,loading:f,className:_,quality:g,width:m,height:y,fill:v=!1,style:b,overrideSrc:w,onLoad:C,onLoadingComplete:E,placeholder:S="empty",blurDataURL:x,fetchPriority:I,layout:k,objectFit:T,objectPosition:P,lazyBoundary:N,lazyRoot:O,...R}=e,{imgConf:D,showAltText:A,blurComplete:M,defaultLoader:L}=t,j=D||r.imageConfigDefault;if("allSizes"in j)a=j;else{let e=[...j.deviceSizes,...j.imageSizes].sort((e,t)=>e-t),t=j.deviceSizes.sort((e,t)=>e-t);a={...j,allSizes:e,deviceSizes:t}}if(void 0===L)throw Error("images.loaderFile detected but the file is missing default export.\nRead more: https://nextjs.org/docs/messages/invalid-images-config");let F=R.loader||L;delete R.loader,delete R.srcSet;let q="__next_img_default"in F;if(q){if("custom"===a.loader)throw Error('Image with src "'+c+'" is missing "loader" prop.\nRead more: https://nextjs.org/docs/messages/next-image-missing-loader')}else{let e=F;F=t=>{let{config:i,...n}=t;return e(n)}}if(k){"fill"===k&&(v=!0);let e={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[k];e&&(b={...b,...e});let t={responsive:"100vw",fill:"100vw"}[k];t&&!u&&(u=t)}let U="",H=o(m),B=o(y);if("object"==typeof(i=c)&&(s(i)||void 0!==i.src)){let e=s(c)?c.default:c;if(!e.src)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received "+JSON.stringify(e));if(!e.height||!e.width)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received "+JSON.stringify(e));if(l=e.blurWidth,h=e.blurHeight,x=x||e.blurDataURL,U=e.src,!v){if(H||B){if(H&&!B){let t=H/e.width;B=Math.round(e.height*t)}else if(!H&&B){let t=B/e.height;H=Math.round(e.width*t)}}else H=e.width,B=e.height}}let W=!p&&("lazy"===f||void 0===f);(!(c="string"==typeof c?c:U)||c.startsWith("data:")||c.startsWith("blob:"))&&(d=!0,W=!1),a.unoptimized&&(d=!0),q&&c.endsWith(".svg")&&!a.dangerouslyAllowSVG&&(d=!0),p&&(I="high");let z=o(g),V=Object.assign(v?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:T,objectPosition:P}:{},A?{}:{color:"transparent"},b),$=M||"empty"===S?null:"blur"===S?'url("data:image/svg+xml;charset=utf-8,'+(0,n.getImageBlurSvg)({widthInt:H,heightInt:B,blurWidth:l,blurHeight:h,blurDataURL:x||"",objectFit:V.objectFit})+'")':'url("'+S+'")',G=$?{backgroundSize:V.objectFit||"cover",backgroundPosition:V.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:$}:{},Y=function(e){let{config:t,src:i,unoptimized:n,width:r,quality:s,sizes:o,loader:a}=e;if(n)return{src:i,srcSet:void 0,sizes:void 0};let{widths:l,kind:h}=function(e,t,i){let{deviceSizes:n,allSizes:r}=e;if(i){let e=/(^|\s)(1?\d?\d)vw/g,t=[];for(let n;n=e.exec(i);n)t.push(parseInt(n[2]));if(t.length){let e=.01*Math.min(...t);return{widths:r.filter(t=>t>=n[0]*e),kind:"w"}}return{widths:r,kind:"w"}}return"number"!=typeof t?{widths:n,kind:"w"}:{widths:[...new Set([t,2*t].map(e=>r.find(t=>t>=e)||r[r.length-1]))],kind:"x"}}(t,r,o),c=l.length-1;return{sizes:o||"w"!==h?o:"100vw",srcSet:l.map((e,n)=>a({config:t,src:i,quality:s,width:e})+" "+("w"===h?e:n+1)+h).join(", "),src:a({config:t,src:i,quality:s,width:l[c]})}}({config:a,src:c,unoptimized:d,width:H,quality:z,sizes:u,loader:F});return{props:{...R,loading:W?"lazy":f,fetchPriority:I,width:H,height:B,decoding:"async",className:_,style:{...V,...G},sizes:Y.sizes,srcSet:Y.srcSet,src:w||Y.src},meta:{unoptimized:d,priority:p,placeholder:S,fill:v}}}},815:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var i in t)Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}(t,{default:function(){return _},defaultHead:function(){return u}});let n=i(1174),r=i(8374),s=i(326),o=r._(i(7577)),a=n._(i(8003)),l=i(3484),h=i(1157),c=i(8710);function u(e){void 0===e&&(e=!1);let t=[(0,s.jsx)("meta",{charSet:"utf-8"})];return e||t.push((0,s.jsx)("meta",{name:"viewport",content:"width=device-width"})),t}function d(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===o.default.Fragment?e.concat(o.default.Children.toArray(t.props.children).reduce((e,t)=>"string"==typeof t||"number"==typeof t?e:e.concat(t),[])):e.concat(t)}i(576);let p=["name","httpEquiv","charSet","itemProp"];function f(e,t){let{inAmpMode:i}=t;return e.reduce(d,[]).reverse().concat(u(i).reverse()).filter(function(){let e=new Set,t=new Set,i=new Set,n={};return r=>{let s=!0,o=!1;if(r.key&&"number"!=typeof r.key&&r.key.indexOf("$")>0){o=!0;let t=r.key.slice(r.key.indexOf("$")+1);e.has(t)?s=!1:e.add(t)}switch(r.type){case"title":case"base":t.has(r.type)?s=!1:t.add(r.type);break;case"meta":for(let e=0,t=p.length;e<t;e++){let t=p[e];if(r.props.hasOwnProperty(t)){if("charSet"===t)i.has(t)?s=!1:i.add(t);else{let e=r.props[t],i=n[t]||new Set;("name"!==t||!o)&&i.has(e)?s=!1:(i.add(e),n[t]=i)}}}}return s}}()).reverse().map((e,t)=>{let n=e.key||t;if(!i&&"link"===e.type&&e.props.href&&["https://fonts.googleapis.com/css","https://use.typekit.net/"].some(t=>e.props.href.startsWith(t))){let t={...e.props||{}};return t["data-href"]=t.href,t.href=void 0,t["data-optimized-fonts"]=!0,o.default.cloneElement(e,t)}return o.default.cloneElement(e,{key:n})})}let _=function(e){let{children:t}=e,i=(0,o.useContext)(l.AmpStateContext),n=(0,o.useContext)(h.HeadManagerContext);return(0,s.jsx)(a.default,{reduceComponentsToState:f,headManager:n,inAmpMode:(0,c.isInAmpMode)(i),children:t})};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},380:(e,t)=>{"use strict";function i(e){let{widthInt:t,heightInt:i,blurWidth:n,blurHeight:r,blurDataURL:s,objectFit:o}=e,a=n?40*n:t,l=r?40*r:i,h=a&&l?"viewBox='0 0 "+a+" "+l+"'":"";return"%3Csvg xmlns='http://www.w3.org/2000/svg' "+h+"%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='"+(h?"none":"contain"===o?"xMidYMid":"cover"===o?"xMidYMid slice":"none")+"' style='filter: url(%23b);' href='"+s+"'/%3E%3C/svg%3E"}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImageBlurSvg",{enumerable:!0,get:function(){return i}})},5248:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var i in t)Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}(t,{VALID_LOADERS:function(){return i},imageConfigDefault:function(){return n}});let i=["default","imgix","cloudinary","akamai","custom"],n={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:60,formats:["image/webp"],dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"inline",remotePatterns:[],unoptimized:!1}},9029:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var i in t)Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}(t,{default:function(){return l},getImageProps:function(){return a}});let n=i(1174),r=i(3078),s=i(2481),o=n._(i(6820));function a(e){let{props:t}=(0,r.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,i]of Object.entries(t))void 0===i&&delete t[e];return{props:t}}let l=s.Image},6820:(e,t)=>{"use strict";function i(e){let{config:t,src:i,width:n,quality:r}=e;return t.path+"?url="+encodeURIComponent(i)+"&w="+n+"&q="+(r||75)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}}),i.__next_img_default=!0;let n=i},8003:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});let n=i(7577),r=()=>{},s=()=>{};function o(e){var t;let{headManager:i,reduceComponentsToState:o}=e;function a(){if(i&&i.mountedInstances){let t=n.Children.toArray(Array.from(i.mountedInstances).filter(Boolean));i.updateHead(o(t,e))}}return null==i||null==(t=i.mountedInstances)||t.add(e.children),a(),r(()=>{var t;return null==i||null==(t=i.mountedInstances)||t.add(e.children),()=>{var t;null==i||null==(t=i.mountedInstances)||t.delete(e.children)}}),r(()=>(i&&(i._pendingUpdate=a),()=>{i&&(i._pendingUpdate=a)})),s(()=>(i&&i._pendingUpdate&&(i._pendingUpdate(),i._pendingUpdate=null),()=>{i&&i._pendingUpdate&&(i._pendingUpdate(),i._pendingUpdate=null)})),null}},9899:(e,t,i)=>{"use strict";var n=i(6715);function r(){}function s(){}s.resetWarningCache=r,e.exports=function(){function e(e,t,i,r,s,o){if(o!==n){var a=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:r};return i.PropTypes=i,i}},8439:(e,t,i)=>{e.exports=i(9899)()},6715:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},892:(e,t,i)=>{/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var n=i(4300),r=n.Buffer;function s(e,t){for(var i in e)t[i]=e[i]}function o(e,t,i){return r(e,t,i)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(s(n,t),t.Buffer=o),o.prototype=Object.create(r.prototype),s(r,o),o.from=function(e,t,i){if("number"==typeof e)throw TypeError("Argument must not be a number");return r(e,t,i)},o.alloc=function(e,t,i){if("number"!=typeof e)throw TypeError("Argument must be a number");var n=r(e);return void 0!==t?"string"==typeof i?n.fill(t,i):n.fill(t):n.fill(0),n},o.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return r(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return n.SlowBuffer(e)}},8679:(e,t,i)=>{"use strict";var n=i(6070),r=i(7729),s=i(2949);e.exports={client:function(e,t){return void 0===(t=t||{}).masking&&(t.masking=!0),new r(e,t)},server:function(e){return void 0===(e=e||{}).requireMasking&&(e.requireMasking=!0),new s(e)},http:function(){return s.http.apply(s,arguments)},isSecureRequest:function(e){return s.isSecureRequest(e)},isWebSocket:function(e){return n.isWebSocket(e)},validateOptions:function(e,t){n.validateOptions(e,t)}}},6070:(e,t,i)=>{"use strict";var n=i(892).Buffer,r=i(2361).EventEmitter,s=i(3837),o=i(9242),a=i(5766),l=i(5828),h=function(e,t,i){r.call(this),h.validateOptions(i||{},["maxLength","masking","requireMasking","protocols"]),this._request=e,this._reader=new l,this._options=i||{},this._maxLength=this._options.maxLength||this.MAX_LENGTH,this._headers=new a,this.__queue=[],this.readyState=0,this.url=t,this.io=new o.IO(this),this.messages=new o.Messages(this),this._bindEventListeners()};s.inherits(h,r),h.isWebSocket=function(e){var t=e.headers.connection||"",i=e.headers.upgrade||"";return"GET"===e.method&&t.toLowerCase().split(/ *, */).indexOf("upgrade")>=0&&"websocket"===i.toLowerCase()},h.validateOptions=function(e,t){for(var i in e)if(0>t.indexOf(i))throw Error("Unrecognized option: "+i)};var c={MAX_LENGTH:67108863,STATES:["connecting","open","closing","closed"],_bindEventListeners:function(){var e=this;this.messages.on("error",function(){}),this.on("message",function(t){var i=e.messages;i.readable&&i.emit("data",t.data)}),this.on("error",function(t){var i=e.messages;i.readable&&i.emit("error",t)}),this.on("close",function(){var t=e.messages;t.readable&&(t.readable=t.writable=!1,t.emit("end"))})},getState:function(){return this.STATES[this.readyState]||null},addExtension:function(e){return!1},setHeader:function(e,t){return!(this.readyState>0)&&(this._headers.set(e,t),!0)},start:function(){var e;if(0!==this.readyState)return!1;if(!h.isWebSocket(this._request))return this._failHandshake(Error("Not a WebSocket request"));try{e=this._handshakeResponse()}catch(e){return this._failHandshake(e)}return this._write(e),-1!==this._stage&&this._open(),!0},_failHandshake:function(e){var t=new a;return t.set("Content-Type","text/plain"),t.set("Content-Length",n.byteLength(e.message,"utf8")),t=["HTTP/1.1 400 Bad Request",t.toString(),e.message],this._write(n.from(t.join("\r\n"),"utf8")),this._fail("protocol_error",e.message),!1},text:function(e){return this.frame(e)},binary:function(e){return!1},ping:function(){return!1},pong:function(){return!1},close:function(e,t){return 1===this.readyState&&(this.readyState=3,this.emit("close",new h.CloseEvent(null,null)),!0)},_open:function(){this.readyState=1,this.__queue.forEach(function(e){this.frame.apply(this,e)},this),this.__queue=[],this.emit("open",new h.OpenEvent)},_queue:function(e){return this.__queue.push(e),!0},_write:function(e){var t=this.io;t.readable&&t.emit("data",e)},_fail:function(e,t){this.readyState=2,this.emit("error",Error(t)),this.close()}};for(var u in c)h.prototype[u]=c[u];h.ConnectEvent=function(){},h.OpenEvent=function(){},h.CloseEvent=function(e,t){this.code=e,this.reason=t},h.MessageEvent=function(e){this.data=e},h.PingEvent=function(e){this.data=e},h.PongEvent=function(e){this.data=e},e.exports=h},7729:(e,t,i)=>{"use strict";var n=i(892).Buffer,r=i(6113),s=i(7310),o=i(3837),a=i(1258),l=i(6070),h=i(5270),c=i(4967),u=function(e,t){this.version="hybi-"+h.VERSION,h.call(this,null,e,t),this.readyState=-1,this._key=u.generateKey(),this._accept=h.generateAccept(this._key),this._http=new a("response");var i=s.parse(this.url),r=i.auth&&n.from(i.auth,"utf8").toString("base64");if(0>this.VALID_PROTOCOLS.indexOf(i.protocol))throw Error(this.url+" is not a valid WebSocket URL");this._pathname=(i.pathname||"/")+(i.search||""),this._headers.set("Host",i.host),this._headers.set("Upgrade","websocket"),this._headers.set("Connection","Upgrade"),this._headers.set("Sec-WebSocket-Key",this._key),this._headers.set("Sec-WebSocket-Version",h.VERSION),this._protocols.length>0&&this._headers.set("Sec-WebSocket-Protocol",this._protocols.join(", ")),r&&this._headers.set("Authorization","Basic "+r)};o.inherits(u,h),u.generateKey=function(){return r.randomBytes(16).toString("base64")};var d={VALID_PROTOCOLS:["ws:","wss:"],proxy:function(e,t){return new c(this,e,t)},start:function(){return -1===this.readyState&&(this._write(this._handshakeRequest()),this.readyState=0,!0)},parse:function(e){if(3!==this.readyState){if(this.readyState>0)return h.prototype.parse.call(this,e);this._http.parse(e),this._http.isComplete()&&(this._validateHandshake(),3!==this.readyState&&(this._open(),this.parse(this._http.body)))}},_handshakeRequest:function(){var e=this._extensions.generateOffer();e&&this._headers.set("Sec-WebSocket-Extensions",e);var t=["GET "+this._pathname+" HTTP/1.1",this._headers.toString(),""];return n.from(t.join("\r\n"),"utf8")},_failHandshake:function(e){e="Error during WebSocket handshake: "+e,this.readyState=3,this.emit("error",Error(e)),this.emit("close",new l.CloseEvent(this.ERRORS.protocol_error,e))},_validateHandshake:function(){if(this.statusCode=this._http.statusCode,this.headers=this._http.headers,this._http.error)return this._failHandshake(this._http.error.message);if(101!==this._http.statusCode)return this._failHandshake("Unexpected response code: "+this._http.statusCode);var e=this._http.headers,t=e.upgrade||"",i=e.connection||"",n=e["sec-websocket-accept"]||"",r=e["sec-websocket-protocol"]||"";if(""===t)return this._failHandshake("'Upgrade' header is missing");if("websocket"!==t.toLowerCase())return this._failHandshake("'Upgrade' header value is not 'WebSocket'");if(""===i)return this._failHandshake("'Connection' header is missing");if("upgrade"!==i.toLowerCase())return this._failHandshake("'Connection' header value is not 'Upgrade'");if(n!==this._accept)return this._failHandshake("Sec-WebSocket-Accept mismatch");if(this.protocol=null,""!==r){if(0>this._protocols.indexOf(r))return this._failHandshake("Sec-WebSocket-Protocol mismatch");this.protocol=r}try{this._extensions.activate(this.headers["sec-websocket-extensions"])}catch(e){return this._failHandshake(e.message)}}};for(var p in d)u.prototype[p]=d[p];e.exports=u},2441:(e,t,i)=>{"use strict";var n=i(892).Buffer,r=i(6070),s=i(3837),o=function(e,t,i){r.apply(this,arguments),this._stage=0,this.version="hixie-75",this._headers.set("Upgrade","WebSocket"),this._headers.set("Connection","Upgrade"),this._headers.set("WebSocket-Origin",this._request.headers.origin),this._headers.set("WebSocket-Location",this.url)};s.inherits(o,r);var a={close:function(){return 3!==this.readyState&&(this.readyState=3,this.emit("close",new r.CloseEvent(null,null)),!0)},parse:function(e){this.readyState>1||(this._reader.put(e),this._reader.eachByte(function(e){var t;switch(this._stage){case -1:this._body.push(e),this._sendHandshakeBody();break;case 0:this._parseLeadingByte(e);break;case 1:if(this._length=(127&e)+128*this._length,this._closing&&0===this._length)return this.close();(128&e)!=128&&(0===this._length?this._stage=0:(this._skipped=0,this._stage=2));break;case 2:if(255===e)this._stage=0,t=n.from(this._buffer).toString("utf8",0,this._buffer.length),this.emit("message",new r.MessageEvent(t));else if(this._length)this._skipped+=1,this._skipped===this._length&&(this._stage=0);else if(this._buffer.push(e),this._buffer.length>this._maxLength)return this.close()}},this))},frame:function(e){if(0===this.readyState)return this._queue([e]);if(this.readyState>1)return!1;"string"!=typeof e&&(e=e.toString());var t=n.byteLength(e),i=n.allocUnsafe(t+2);return i[0]=0,i.write(e,1),i[i.length-1]=255,this._write(i),!0},_handshakeResponse:function(){var e=["HTTP/1.1 101 Web Socket Protocol Handshake",this._headers.toString(),""];return n.from(e.join("\r\n"),"utf8")},_parseLeadingByte:function(e){(128&e)==128?(this._length=0,this._stage=1):(delete this._length,delete this._skipped,this._buffer=[],this._stage=2)}};for(var l in a)o.prototype[l]=a[l];e.exports=o},3376:(e,t,i)=>{"use strict";var n=i(892).Buffer,r=i(6070),s=i(2441),o=i(6113),a=i(3837),l=function(e){return parseInt((e.match(/[0-9]/g)||[]).join(""),10)},h=function(e){return(e.match(/ /g)||[]).length},c=function(e,t,i){s.apply(this,arguments),this._stage=-1,this._body=[],this.version="hixie-76",this._headers.clear(),this._headers.set("Upgrade","WebSocket"),this._headers.set("Connection","Upgrade"),this._headers.set("Sec-WebSocket-Origin",this._request.headers.origin),this._headers.set("Sec-WebSocket-Location",this.url)};a.inherits(c,s);var u={BODY_SIZE:8,start:function(){return!!s.prototype.start.call(this)&&(this._started=!0,this._sendHandshakeBody(),!0)},close:function(){return 3!==this.readyState&&(1===this.readyState&&this._write(n.from([255,0])),this.readyState=3,this.emit("close",new r.CloseEvent(null,null)),!0)},_handshakeResponse:function(){var e=this._request.headers,t=e["sec-websocket-key1"],i=e["sec-websocket-key2"];if(!t)throw Error("Missing required header: Sec-WebSocket-Key1");if(!i)throw Error("Missing required header: Sec-WebSocket-Key2");var r=l(t),s=h(t),o=l(i),a=h(i);if(r%s!=0||o%a!=0)throw Error("Client sent invalid Sec-WebSocket-Key headers");this._keyValues=[r/s,o/a];var e=["HTTP/1.1 101 WebSocket Protocol Handshake",this._headers.toString(),""];return n.from(e.join("\r\n"),"binary")},_handshakeSignature:function(){if(this._body.length<this.BODY_SIZE)return null;var e=o.createHash("md5"),t=n.allocUnsafe(8+this.BODY_SIZE);return t.writeUInt32BE(this._keyValues[0],0),t.writeUInt32BE(this._keyValues[1],4),n.from(this._body).copy(t,8,0,this.BODY_SIZE),e.update(t),n.from(e.digest("binary"),"binary")},_sendHandshakeBody:function(){if(this._started){var e=this._handshakeSignature();e&&(this._write(e),this._stage=0,this._open(),this._body.length>this.BODY_SIZE&&this.parse(this._body.slice(this.BODY_SIZE)))}},_parseLeadingByte:function(e){if(255!==e)return s.prototype._parseLeadingByte.call(this,e);this._closing=!0,this._length=0,this._stage=1}};for(var d in u)c.prototype[d]=u[d];e.exports=c},5766:e=>{"use strict";var t=function(){this.clear()};t.prototype.ALLOWED_DUPLICATES=["set-cookie","set-cookie2","warning","www-authenticate"],t.prototype.clear=function(){this._sent={},this._lines=[]},t.prototype.set=function(e,t){if(void 0!==t){e=this._strip(e),t=this._strip(t);var i=e.toLowerCase();(!this._sent.hasOwnProperty(i)||this.ALLOWED_DUPLICATES.indexOf(i)>=0)&&(this._sent[i]=!0,this._lines.push(e+": "+t+"\r\n"))}},t.prototype.toString=function(){return this._lines.join("")},t.prototype._strip=function(e){return e.toString().replace(/^ */,"").replace(/ *$/,"")},e.exports=t},5270:(e,t,i)=>{"use strict";var n=i(892).Buffer,r=i(6113),s=i(3837),o=i(5056),a=i(6070),l=i(4722),h=i(8996),c=function(e,t,i){if(a.apply(this,arguments),this._extensions=new o,this._stage=0,this._masking=this._options.masking,this._protocols=this._options.protocols||[],this._requireMasking=this._options.requireMasking,this._pingCallbacks={},"string"==typeof this._protocols&&(this._protocols=this._protocols.split(/ *, */)),this._request){var n=this._request.headers["sec-websocket-protocol"],r=this._protocols;void 0!==n&&("string"==typeof n&&(n=n.split(/ *, */)),this.protocol=n.filter(function(e){return r.indexOf(e)>=0})[0]),this.version="hybi-"+c.VERSION}};s.inherits(c,a),c.VERSION="13",c.mask=function(e,t,i){if(!t||0===t.length)return e;i=i||0;for(var n=0,r=e.length-i;n<r;n++)e[i+n]=e[i+n]^t[n%4];return e},c.generateAccept=function(e){var t=r.createHash("sha1");return t.update(e+c.GUID),t.digest("base64")},c.GUID="258EAFA5-E914-47DA-95CA-C5AB0DC85B11";var u={FIN:128,MASK:128,RSV1:64,RSV2:32,RSV3:16,OPCODE:15,LENGTH:127,OPCODES:{continuation:0,text:1,binary:2,close:8,ping:9,pong:10},OPCODE_CODES:[0,1,2,8,9,10],MESSAGE_OPCODES:[0,1,2],OPENING_OPCODES:[1,2],ERRORS:{normal_closure:1e3,going_away:1001,protocol_error:1002,unacceptable:1003,encoding_error:1007,policy_violation:1008,too_large:1009,extension_error:1010,unexpected_condition:1011},ERROR_CODES:[1e3,1001,1002,1003,1007,1008,1009,1010,1011],DEFAULT_ERROR_CODE:1e3,MIN_RESERVED_ERROR:3e3,MAX_RESERVED_ERROR:4999,UTF8_MATCH:/^([\x00-\x7F]|[\xC2-\xDF][\x80-\xBF]|\xE0[\xA0-\xBF][\x80-\xBF]|[\xE1-\xEC\xEE\xEF][\x80-\xBF]{2}|\xED[\x80-\x9F][\x80-\xBF]|\xF0[\x90-\xBF][\x80-\xBF]{2}|[\xF1-\xF3][\x80-\xBF]{3}|\xF4[\x80-\x8F][\x80-\xBF]{2})*$/,addExtension:function(e){return this._extensions.add(e),!0},parse:function(e){this._reader.put(e);for(var t=!0;t;)switch(this._stage){case 0:(t=this._reader.read(1))&&this._parseOpcode(t[0]);break;case 1:(t=this._reader.read(1))&&this._parseLength(t[0]);break;case 2:(t=this._reader.read(this._frame.lengthBytes))&&this._parseExtendedLength(t);break;case 3:(t=this._reader.read(4))&&(this._stage=4,this._frame.maskingKey=t);break;case 4:(t=this._reader.read(this._frame.length))&&(this._stage=0,this._emitFrame(t));break;default:t=null}},text:function(e){return!(this.readyState>1)&&this.frame(e,"text")},binary:function(e){return!(this.readyState>1)&&this.frame(e,"binary")},ping:function(e,t){return!(this.readyState>1)&&(e=e||"",t&&(this._pingCallbacks[e]=t),this.frame(e,"ping"))},pong:function(e){return!(this.readyState>1)&&(e=e||"",this.frame(e,"pong"))},close:function(e,t){return(e=e||"",t=t||this.ERRORS.normal_closure,this.readyState<=0)?(this.readyState=3,this.emit("close",new a.CloseEvent(t,e)),!0):1===this.readyState&&(this.readyState=2,this._extensions.close(function(){this.frame(e,"close",t)},this),!0)},frame:function(e,t,i){if(this.readyState<=0)return this._queue([e,t,i]);if(this.readyState>2)return!1;e instanceof Array&&(e=n.from(e)),"number"==typeof e&&(e=e.toString());var s,o,a=new h,c="string"==typeof e;a.rsv1=a.rsv2=a.rsv3=!1,a.opcode=this.OPCODES[t||(c?"text":"binary")],s=c?n.from(e,"utf8"):e,i&&(o=s,(s=n.allocUnsafe(2+o.length)).writeUInt16BE(i,0),o.copy(s,2)),a.data=s;var u=function(e){var t=new l;t.final=!0,t.rsv1=e.rsv1,t.rsv2=e.rsv2,t.rsv3=e.rsv3,t.opcode=e.opcode,t.masked=!!this._masking,t.length=e.data.length,t.payload=e.data,t.masked&&(t.maskingKey=r.randomBytes(4)),this._sendFrame(t)};return this.MESSAGE_OPCODES.indexOf(a.opcode)>=0?this._extensions.processOutgoingMessage(a,function(e,t){if(e)return this._fail("extension_error",e.message);u.call(this,t)},this):u.call(this,a),!0},_sendFrame:function(e){var t=e.length,i=t<=125?2:t<=65535?4:10,r=i+(e.masked?4:0),s=n.allocUnsafe(r+t),o=e.masked?this.MASK:0;s[0]=(e.final?this.FIN:0)|(e.rsv1?this.RSV1:0)|(e.rsv2?this.RSV2:0)|(e.rsv3?this.RSV3:0)|e.opcode,t<=125?s[1]=o|t:t<=65535?(s[1]=126|o,s.writeUInt16BE(t,2)):(s[1]=127|o,s.writeUInt32BE(Math.floor(t/4294967296),2),s.writeUInt32BE(t%4294967296,6)),e.payload.copy(s,r),e.masked&&(e.maskingKey.copy(s,i),c.mask(s,e.maskingKey,r)),this._write(s)},_handshakeResponse:function(){var e=this._request.headers["sec-websocket-key"],t=this._request.headers["sec-websocket-version"];if(t!==c.VERSION)throw Error("Unsupported WebSocket version: "+t);if("string"!=typeof e)throw Error("Missing handshake request header: Sec-WebSocket-Key");this._headers.set("Upgrade","websocket"),this._headers.set("Connection","Upgrade"),this._headers.set("Sec-WebSocket-Accept",c.generateAccept(e)),this.protocol&&this._headers.set("Sec-WebSocket-Protocol",this.protocol);var i=this._extensions.generateResponse(this._request.headers["sec-websocket-extensions"]);i&&this._headers.set("Sec-WebSocket-Extensions",i);var r=["HTTP/1.1 101 Switching Protocols",this._headers.toString(),""];return n.from(r.join("\r\n"),"utf8")},_shutdown:function(e,t,i){delete this._frame,delete this._message,this._stage=5;var n=1===this.readyState;this.readyState=2,this._extensions.close(function(){n&&this.frame(t,"close",e),this.readyState=3,i&&this.emit("error",Error(t)),this.emit("close",new a.CloseEvent(e,t))},this)},_fail:function(e,t){this.readyState>1||this._shutdown(this.ERRORS[e],t,!0)},_parseOpcode:function(e){var t=[this.RSV1,this.RSV2,this.RSV3].map(function(t){return(e&t)===t}),i=this._frame=new l;return(i.final=(e&this.FIN)===this.FIN,i.rsv1=t[0],i.rsv2=t[1],i.rsv3=t[2],i.opcode=e&this.OPCODE,this._stage=1,this._extensions.validFrameRsv(i))?0>this.OPCODE_CODES.indexOf(i.opcode)?this._fail("protocol_error","Unrecognized frame opcode: "+i.opcode):0>this.MESSAGE_OPCODES.indexOf(i.opcode)&&!i.final?this._fail("protocol_error","Received fragmented control frame: opcode = "+i.opcode):this._message&&this.OPENING_OPCODES.indexOf(i.opcode)>=0?this._fail("protocol_error","Received new data frame but previous continuous frame is unfinished"):void 0:this._fail("protocol_error","One or more reserved bits are on: reserved1 = "+(i.rsv1?1:0)+", reserved2 = "+(i.rsv2?1:0)+", reserved3 = "+(i.rsv3?1:0))},_parseLength:function(e){var t=this._frame;if(t.masked=(e&this.MASK)===this.MASK,t.length=e&this.LENGTH,t.length>=0&&t.length<=125){if(this._stage=t.masked?3:4,!this._checkFrameLength())return}else this._stage=2,t.lengthBytes=126===t.length?2:8;if(this._requireMasking&&!t.masked)return this._fail("unacceptable","Received unmasked frame but masking is required")},_parseExtendedLength:function(e){var t=this._frame;if(t.length=this._readUInt(e),this._stage=t.masked?3:4,0>this.MESSAGE_OPCODES.indexOf(t.opcode)&&t.length>125)return this._fail("protocol_error","Received control frame having too long payload: "+t.length);if(!this._checkFrameLength())return},_checkFrameLength:function(){return!((this._message?this._message.length:0)+this._frame.length>this._maxLength)||(this._fail("too_large","WebSocket frame length too large"),!1)},_emitFrame:function(e){var t,i,n,r,s,o=this._frame,l=o.payload=c.mask(e,o.maskingKey),u=o.opcode;if(delete this._frame,u===this.OPCODES.continuation){if(!this._message)return this._fail("protocol_error","Received unexpected continuation frame");this._message.pushFrame(o)}if((u===this.OPCODES.text||u===this.OPCODES.binary)&&(this._message=new h,this._message.pushFrame(o)),o.final&&this.MESSAGE_OPCODES.indexOf(u)>=0)return this._emitMessage(this._message);u===this.OPCODES.close&&(i=l.length>=2?l.readUInt16BE(0):null,n=l.length>2?this._encode(l.slice(2)):null,0!==l.length&&!(null!==i&&i>=this.MIN_RESERVED_ERROR&&i<=this.MAX_RESERVED_ERROR)&&0>this.ERROR_CODES.indexOf(i)&&(i=this.ERRORS.protocol_error),(l.length>125||l.length>2&&!n)&&(i=this.ERRORS.protocol_error),this._shutdown(i||this.DEFAULT_ERROR_CODE,n||"")),u===this.OPCODES.ping&&(this.frame(l,"pong"),this.emit("ping",new a.PingEvent(l.toString()))),u===this.OPCODES.pong&&(s=(r=this._pingCallbacks)[t=this._encode(l)],delete r[t],s&&s(),this.emit("pong",new a.PongEvent(l.toString())))},_emitMessage:function(e){var e=this._message;e.read(),delete this._message,this._extensions.processIncomingMessage(e,function(e,t){if(e)return this._fail("extension_error",e.message);var i=t.data;if(t.opcode===this.OPCODES.text&&(i=this._encode(i)),null===i)return this._fail("encoding_error","Could not decode a text frame as UTF-8");this.emit("message",new a.MessageEvent(i))},this)},_encode:function(e){try{var t=e.toString("binary",0,e.length);if(!this.UTF8_MATCH.test(t))return null}catch(e){}return e.toString("utf8",0,e.length)},_readUInt:function(e){return 2===e.length?e.readUInt16BE(0):4294967296*e.readUInt32BE(0)+e.readUInt32BE(4)}};for(var d in u)c.prototype[d]=u[d];e.exports=c},4722:e=>{"use strict";var t=function(){},i={final:!1,rsv1:!1,rsv2:!1,rsv3:!1,opcode:null,masked:!1,maskingKey:null,lengthBytes:1,length:0,payload:null};for(var n in i)t.prototype[n]=i[n];e.exports=t},8996:(e,t,i)=>{"use strict";var n=i(892).Buffer,r=function(){this.rsv1=!1,this.rsv2=!1,this.rsv3=!1,this.opcode=null,this.length=0,this._chunks=[]},s={read:function(){return this.data=this.data||n.concat(this._chunks,this.length)},pushFrame:function(e){this.rsv1=this.rsv1||e.rsv1,this.rsv2=this.rsv2||e.rsv2,this.rsv3=this.rsv3||e.rsv3,null===this.opcode&&(this.opcode=e.opcode),this._chunks.push(e.payload),this.length+=e.length}};for(var o in s)r.prototype[o]=s[o];e.exports=r},4967:(e,t,i)=>{"use strict";var n=i(892).Buffer,r=i(2781).Stream,s=i(7310),o=i(3837),a=i(6070),l=i(5766),h=i(1258),c={"ws:":80,"wss:":443},u=function(e,t,i){this._client=e,this._http=new h("response"),this._origin="object"==typeof e.url?e.url:s.parse(e.url),this._url="object"==typeof t?t:s.parse(t),this._options=i||{},this._state=0,this.readable=this.writable=!0,this._paused=!1,this._headers=new l,this._headers.set("Host",this._origin.host),this._headers.set("Connection","keep-alive"),this._headers.set("Proxy-Connection","keep-alive");var r=this._url.auth&&n.from(this._url.auth,"utf8").toString("base64");r&&this._headers.set("Proxy-Authorization","Basic "+r)};o.inherits(u,r);var d={setHeader:function(e,t){return 0===this._state&&(this._headers.set(e,t),!0)},start:function(){if(0!==this._state)return!1;this._state=1;var e=this._origin,t=e.port||c[e.protocol],i=["CONNECT "+e.hostname+":"+t+" HTTP/1.1",this._headers.toString(),""];return this.emit("data",n.from(i.join("\r\n"),"utf8")),!0},pause:function(){this._paused=!0},resume:function(){this._paused=!1,this.emit("drain")},write:function(e){if(!this.writable)return!1;if(this._http.parse(e),!this._http.isComplete())return!this._paused;if(this.statusCode=this._http.statusCode,this.headers=this._http.headers,200===this.statusCode)this.emit("connect",new a.ConnectEvent);else{var t="Can't establish a connection to the server at "+this._origin.href;this.emit("error",Error(t))}return this.end(),!this._paused},end:function(e){this.writable&&(void 0!==e&&this.write(e),this.readable=this.writable=!1,this.emit("close"),this.emit("end"))},destroy:function(){this.end()}};for(var p in d)u.prototype[p]=d[p];e.exports=u},2949:(e,t,i)=>{"use strict";var n=i(3837),r=i(1258),s=i(6070),o=i(2441),a=i(3376),l=i(5270),h=function(e){s.call(this,null,null,e),this._http=new r("request")};n.inherits(h,s);var c={EVENTS:["open","message","error","close","ping","pong"],_bindEventListeners:function(){this.messages.on("error",function(){}),this.on("error",function(){})},parse:function(e){if(this._delegate)return this._delegate.parse(e);if(this._http.parse(e),this._http.isComplete()){this.method=this._http.method,this.url=this._http.url,this.headers=this._http.headers,this.body=this._http.body;var t=this;this._delegate=h.http(this,this._options),this._delegate.messages=this.messages,this._delegate.io=this.io,this._open(),this.EVENTS.forEach(function(e){this._delegate.on(e,function(i){t.emit(e,i)})},this),this.protocol=this._delegate.protocol,this.version=this._delegate.version,this.parse(this._http.body),this.emit("connect",new s.ConnectEvent)}},_open:function(){this.__queue.forEach(function(e){this._delegate[e[0]].apply(this._delegate,e[1])},this),this.__queue=[]}};for(var u in["addExtension","setHeader","start","frame","text","binary","ping","close"].forEach(function(e){c[e]=function(){return this._delegate?this._delegate[e].apply(this._delegate,arguments):(this.__queue.push([e,arguments]),!0)}}),c)h.prototype[u]=c[u];h.isSecureRequest=function(e){if(e.connection&&void 0!==e.connection.authorized||e.socket&&e.socket.secure)return!0;var t=e.headers;return!!t&&("on"===t.https||"on"===t["x-forwarded-ssl"]||"https"===t["x-forwarded-scheme"]||"https"===t["x-forwarded-proto"])},h.determineUrl=function(e){return(this.isSecureRequest(e)?"wss:":"ws:")+"//"+e.headers.host+e.url},h.http=function(e,t){void 0===(t=t||{}).requireMasking&&(t.requireMasking=!0);var i=e.headers,n=i["sec-websocket-version"],r=i["sec-websocket-key"],s=i["sec-websocket-key1"],h=i["sec-websocket-key2"],c=this.determineUrl(e);return n||r?new l(e,c,t):s||h?new a(e,c,t):new o(e,c,t)},e.exports=h},5828:(e,t,i)=>{"use strict";var n=i(892).Buffer,r=function(){this._queue=[],this._queueSize=0,this._offset=0};r.prototype.put=function(e){e&&0!==e.length&&(n.isBuffer(e)||(e=n.from(e)),this._queue.push(e),this._queueSize+=e.length)},r.prototype.read=function(e){if(e>this._queueSize)return null;if(0===e)return n.alloc(0);this._queueSize-=e;var t,i,r=this._queue,s=e,o=r[0];if(o.length>=e)return o.length===e?r.shift():(i=o.slice(0,e),r[0]=o.slice(e),i);for(var a=0,l=r.length;a<l&&!(s<r[a].length);a++)s-=r[a].length;return t=r.splice(0,a),s>0&&r.length>0&&(t.push(r[0].slice(0,s)),r[0]=r[0].slice(s)),n.concat(t,e)},r.prototype.eachByte=function(e,t){for(var i,n,r;this._queue.length>0;){for(n=(i=this._queue[0]).length;this._offset<n;)r=this._offset,this._offset+=1,e.call(t,i[r]);this._offset=0,this._queue.shift()}},e.exports=r},1258:(e,t,i)=>{"use strict";var n=i(5433).m,r=i(892).Buffer,s={request:n.REQUEST||"request",response:n.RESPONSE||"response"},o=function(e){this._type=e,this._parser=new n(s[e]),this._complete=!1,this.headers={};var t=null,i=this;this._parser.onHeaderField=function(e,i,n){t=e.toString("utf8",i,i+n).toLowerCase()},this._parser.onHeaderValue=function(e,n,r){var s=e.toString("utf8",n,n+r);i.headers.hasOwnProperty(t)?i.headers[t]+=", "+s:i.headers[t]=s},this._parser.onHeadersComplete=this._parser[n.kOnHeadersComplete]=function(e,t,n,r,s,a){var l=arguments[0];if("object"==typeof l&&(r=l.method,s=l.url,a=l.statusCode,n=l.headers),i.method="number"==typeof r?o.METHODS[r]:r,i.statusCode=a,i.url=s,n){for(var h,c,u=0,d=n.length;u<d;u+=2)h=n[u].toLowerCase(),c=n[u+1],i.headers.hasOwnProperty(h)?i.headers[h]+=", "+c:i.headers[h]=c;i._complete=!0}}};o.METHODS={0:"DELETE",1:"GET",2:"HEAD",3:"POST",4:"PUT",5:"CONNECT",6:"OPTIONS",7:"TRACE",8:"COPY",9:"LOCK",10:"MKCOL",11:"MOVE",12:"PROPFIND",13:"PROPPATCH",14:"SEARCH",15:"UNLOCK",16:"BIND",17:"REBIND",18:"UNBIND",19:"ACL",20:"REPORT",21:"MKACTIVITY",22:"CHECKOUT",23:"MERGE",24:"M-SEARCH",25:"NOTIFY",26:"SUBSCRIBE",27:"UNSUBSCRIBE",28:"PATCH",29:"PURGE",30:"MKCALENDAR",31:"LINK",32:"UNLINK"};var a=process.version?process.version.match(/[0-9]+/g).map(function(e){return parseInt(e,10)}):[];0===a[0]&&12===a[1]&&(o.METHODS[16]="REPORT",o.METHODS[17]="MKACTIVITY",o.METHODS[18]="CHECKOUT",o.METHODS[19]="MERGE",o.METHODS[20]="M-SEARCH",o.METHODS[21]="NOTIFY",o.METHODS[22]="SUBSCRIBE",o.METHODS[23]="UNSUBSCRIBE",o.METHODS[24]="PATCH",o.METHODS[25]="PURGE"),o.prototype.isComplete=function(){return this._complete},o.prototype.parse=function(e){var t=this._parser.execute(e,0,e.length);if("number"!=typeof t){this.error=t,this._complete=!0;return}this._complete&&(this.body=t<e.length?e.slice(t):r.alloc(0))},e.exports=o},9242:(e,t,i)=>{"use strict";var n=i(2781).Stream,r=i(3837),s=function(e){this.readable=this.writable=!0,this._paused=!1,this._driver=e};r.inherits(s,n),s.prototype.pause=function(){this._paused=!0,this._driver.messages._paused=!0},s.prototype.resume=function(){this._paused=!1,this.emit("drain");var e=this._driver.messages;e._paused=!1,e.emit("drain")},s.prototype.write=function(e){return!!this.writable&&(this._driver.parse(e),!this._paused)},s.prototype.end=function(e){if(this.writable){void 0!==e&&this.write(e),this.writable=!1;var t=this._driver.messages;t.readable&&(t.readable=t.writable=!1,t.emit("end"))}},s.prototype.destroy=function(){this.end()};var o=function(e){this.readable=this.writable=!0,this._paused=!1,this._driver=e};r.inherits(o,n),o.prototype.pause=function(){this._driver.io._paused=!0},o.prototype.resume=function(){this._driver.io._paused=!1,this._driver.io.emit("drain")},o.prototype.write=function(e){return!!this.writable&&("string"==typeof e?this._driver.text(e):this._driver.binary(e),!this._paused)},o.prototype.end=function(e){void 0!==e&&this.write(e)},o.prototype.destroy=function(){},t.IO=s,t.Messages=o},4432:e=>{"use strict";var t=/([!#\$%&'\*\+\-\.\^_`\|~0-9A-Za-z]+)/,i=/([^!#\$%&'\*\+\-\.\^_`\|~0-9A-Za-z])/g,n=RegExp(t.source+"(?:=(?:"+t.source+"|"+/"((?:\\[\x00-\x7f]|[^\x00-\x08\x0a-\x1f\x7f"\\])*)"/.source+"))?"),r=RegExp(t.source+"(?: *; *"+n.source+")*","g"),s=RegExp("^"+r.source+"(?: *, *"+r.source+")*$"),o=/^-?(0|[1-9][0-9]*)(\.[0-9]+)?$/,a=Object.prototype.hasOwnProperty,l=function(){this._byName={},this._inOrder=[]};l.prototype.push=function(e,t){a.call(this._byName,e)||(this._byName[e]=[]),this._byName[e].push(t),this._inOrder.push({name:e,params:t})},l.prototype.eachOffer=function(e,t){for(var i=this._inOrder,n=0,r=i.length;n<r;n++)e.call(t,i[n].name,i[n].params)},l.prototype.byName=function(e){return this._byName[e]||[]},l.prototype.toArray=function(){return this._inOrder.slice()},e.exports={parseHeader:function(e){var t=new l;if(""===e||void 0===e)return t;if(!s.test(e))throw SyntaxError("Invalid Sec-WebSocket-Extensions header: "+e);return e.match(r).forEach(function(e){var i=e.match(RegExp(n.source,"g")),r=i.shift(),s={};i.forEach(function(e){var t,i=e.match(n),r=i[1];t=void 0!==i[2]?i[2]:void 0===i[3]||i[3].replace(/\\/g,""),o.test(t)&&(t=parseFloat(t)),a.call(s,r)?(s[r]=[].concat(s[r]),s[r].push(t)):s[r]=t},this),t.push(r,s)},this),t},serializeParams:function(e,t){var n=[],r=function(e,t){t instanceof Array?t.forEach(function(t){r(e,t)}):!0===t?n.push(e):"number"==typeof t?n.push(e+"="+t):i.test(t)?n.push(e+'="'+t.replace(/"/g,'\\"')+'"'):n.push(e+"="+t)};for(var s in t)r(s,t[s]);return[e].concat(n).join("; ")}}},6383:(e,t,i)=>{"use strict";var n=i(6251),r=i(3892),s=function(e){this._ext=e[0],this._session=e[1],this._functors={incoming:new n(this._session,"processIncomingMessage"),outgoing:new n(this._session,"processOutgoingMessage")}};s.prototype.pending=function(e){var t=this._functors[e];t._stopped||(t.pending+=1)},s.prototype.incoming=function(e,t,i,n){this._exec("incoming",e,t,i,n)},s.prototype.outgoing=function(e,t,i,n){this._exec("outgoing",e,t,i,n)},s.prototype.close=function(){return this._closed=this._closed||new r,this._doClose(),this._closed},s.prototype._exec=function(e,t,i,n,r){this._functors[e].call(t,i,function(e,t){e&&(e.message=this._ext.name+": "+e.message),n.call(r,e,t),this._doClose()},this)},s.prototype._doClose=function(){var e=this._functors.incoming,t=this._functors.outgoing;this._closed&&e.pending+t.pending===0&&(this._session&&this._session.close(),this._session=null,this._closed.done())},e.exports=s},6251:(e,t,i)=>{"use strict";var n=i(9210),r=function(e,t){this._session=e,this._method=t,this._queue=new n(r.QUEUE_SIZE),this._stopped=!1,this.pending=0};r.QUEUE_SIZE=8,r.prototype.call=function(e,t,i,n){if(!this._stopped){var r={error:e,message:t,callback:i,context:n,done:!1},s=!1,o=this;if(this._queue.push(r),r.error)return r.done=!0,this._stop(),this._flushQueue();var a=function(e,t){s^(s=!0)&&(e?(o._stop(),r.error=e,r.message=null):r.message=t,r.done=!0,o._flushQueue())};try{this._session[this._method](t,a)}catch(e){a(e)}}},r.prototype._stop=function(){this.pending=this._queue.length,this._stopped=!0},r.prototype._flushQueue=function(){for(var e,t=this._queue;t.length>0&&t.peek().done;)(e=t.shift()).error?(this.pending=0,t.clear()):this.pending-=1,e.callback.call(e.context,e.error,e.message)},e.exports=r},7935:(e,t,i)=>{"use strict";var n=i(6383),r=i(3892),s=function(e){this._cells=e.map(function(e){return new n(e)}),this._stopped={incoming:!1,outgoing:!1}};s.prototype.processIncomingMessage=function(e,t,i){this._stopped.incoming||this._loop("incoming",this._cells.length-1,-1,-1,e,t,i)},s.prototype.processOutgoingMessage=function(e,t,i){this._stopped.outgoing||this._loop("outgoing",0,this._cells.length,1,e,t,i)},s.prototype.close=function(e,t){this._stopped={incoming:!0,outgoing:!0};var i=this._cells.map(function(e){return e.close()});e&&r.all(i).then(function(){e.call(t)})},s.prototype._loop=function(e,t,i,n,r,s,o){for(var a=this._cells,l=a.length,h=this;l--;)a[l].pending(e);var c=function(t,r,l){if(t===i)return s.call(o,r,l);a[t][e](r,l,function(i,r){i&&(h._stopped[e]=!0),c(t+n,i,r)})};c(t,null,r)},e.exports=s},3892:(e,t,i)=>{"use strict";var n=i(9210),r=function(){this._complete=!1,this._callbacks=new n(r.QUEUE_SIZE)};r.QUEUE_SIZE=4,r.all=function(e){var t=new r,i=e.length,n=i;for(0===i&&t.done();n--;)e[n].then(function(){0==(i-=1)&&t.done()});return t},r.prototype.then=function(e){this._complete?e():this._callbacks.push(e)},r.prototype.done=function(){this._complete=!0;for(var e,t=this._callbacks;e=t.shift();)e()},e.exports=r},9210:e=>{"use strict";var t=function(e){this._bufferSize=e,this.clear()};t.prototype.clear=function(){this._buffer=Array(this._bufferSize),this._ringOffset=0,this._ringSize=this._bufferSize,this._head=0,this._tail=0,this.length=0},t.prototype.push=function(e){var t=!1,i=!1;this._ringSize<this._bufferSize?t=0===this._tail:this._ringOffset===this._ringSize&&(t=!0,i=0===this._tail),t&&(this._tail=this._bufferSize,this._buffer=this._buffer.concat(Array(this._bufferSize)),this._bufferSize=this._buffer.length,i&&(this._ringSize=this._bufferSize)),this._buffer[this._tail]=e,this.length+=1,this._tail<this._ringSize&&(this._ringOffset+=1),this._tail=(this._tail+1)%this._bufferSize},t.prototype.peek=function(){if(0!==this.length)return this._buffer[this._head]},t.prototype.shift=function(){if(0!==this.length){var e=this._buffer[this._head];return this._buffer[this._head]=void 0,this.length-=1,this._ringOffset-=1,0===this._ringOffset&&this.length>0?(this._head=this._ringSize,this._ringOffset=this.length,this._ringSize=this._bufferSize):this._head=(this._head+1)%this._ringSize,e}},e.exports=t},5056:(e,t,i)=>{"use strict";var n=i(4432),r=i(7935),s=function(){this._rsv1=this._rsv2=this._rsv3=null,this._byName={},this._inOrder=[],this._sessions=[],this._index={}};s.MESSAGE_OPCODES=[1,2];var o={add:function(e){if("string"!=typeof e.name)throw TypeError("extension.name must be a string");if("permessage"!==e.type)throw TypeError('extension.type must be "permessage"');if("boolean"!=typeof e.rsv1)throw TypeError("extension.rsv1 must be true or false");if("boolean"!=typeof e.rsv2)throw TypeError("extension.rsv2 must be true or false");if("boolean"!=typeof e.rsv3)throw TypeError("extension.rsv3 must be true or false");if(this._byName.hasOwnProperty(e.name))throw TypeError('An extension with name "'+e.name+'" is already registered');this._byName[e.name]=e,this._inOrder.push(e)},generateOffer:function(){var e=[],t=[],i={};return this._inOrder.forEach(function(r){var s=r.createClientSession();if(s){var o=[r,s];e.push(o),i[r.name]=o;var a=s.generateOffer();(a=a?[].concat(a):[]).forEach(function(e){t.push(n.serializeParams(r.name,e))},this)}},this),this._sessions=e,this._index=i,t.length>0?t.join(", "):null},activate:function(e){var t=n.parseHeader(e),i=[];t.eachOffer(function(e,t){var r=this._index[e];if(!r)throw Error('Server sent an extension response for unknown extension "'+e+'"');var s=r[0],o=r[1],a=this._reserved(s);if(a)throw Error("Server sent two extension responses that use the RSV"+a[0]+' bit: "'+a[1]+'" and "'+s.name+'"');if(!0!==o.activate(t))throw Error("Server sent unacceptable extension parameters: "+n.serializeParams(e,t));this._reserve(s),i.push(r)},this),this._sessions=i,this._pipeline=new r(i)},generateResponse:function(e){var t=[],i=[],s=n.parseHeader(e);return this._inOrder.forEach(function(e){var r=s.byName(e.name);if(!(0===r.length||this._reserved(e))){var o=e.createServerSession(r);o&&(this._reserve(e),t.push([e,o]),i.push(n.serializeParams(e.name,o.generateResponse())))}},this),this._sessions=t,this._pipeline=new r(t),i.length>0?i.join(", "):null},validFrameRsv:function(e){var t,i={rsv1:!1,rsv2:!1,rsv3:!1};if(s.MESSAGE_OPCODES.indexOf(e.opcode)>=0)for(var n=0,r=this._sessions.length;n<r;n++)t=this._sessions[n][0],i.rsv1=i.rsv1||t.rsv1,i.rsv2=i.rsv2||t.rsv2,i.rsv3=i.rsv3||t.rsv3;return(i.rsv1||!e.rsv1)&&(i.rsv2||!e.rsv2)&&(i.rsv3||!e.rsv3)},processIncomingMessage:function(e,t,i){this._pipeline.processIncomingMessage(e,t,i)},processOutgoingMessage:function(e,t,i){this._pipeline.processOutgoingMessage(e,t,i)},close:function(e,t){if(!this._pipeline)return e.call(t);this._pipeline.close(e,t)},_reserve:function(e){this._rsv1=this._rsv1||e.rsv1&&e.name,this._rsv2=this._rsv2||e.rsv2&&e.name,this._rsv3=this._rsv3||e.rsv3&&e.name},_reserved:function(e){return this._rsv1&&e.rsv1?[1,this._rsv1]:this._rsv2&&e.rsv2?[2,this._rsv2]:!!this._rsv3&&!!e.rsv3&&[3,this._rsv3]}};for(var a in o)s.prototype[a]=o[a];e.exports=s},7764:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>c,metadata:()=>h});var n=i(9510),r=i(6016),s=i.n(r),o=i(4365),a=i.n(o),l=i(2847);i(6039),i(7994);let h={title:"M.P Green Teens | Fall Cleanup & Lawnscaping Services in Mount Prospect, Illinois",description:"Transforming lawns into stunning outdoor spaces",keywords:"fall cleanup, leaf removal, yard cleanup, lawn care, Illinois lawnscaping"};function c({children:e}){return(0,n.jsxs)("html",{lang:"en",children:[(0,n.jsxs)(a(),{children:[n.jsx("link",{rel:"apple-touch-icon",sizes:"180x180",href:"/images/apple-touch-icon.png"}),n.jsx("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"/images/favicon-32x32.png"}),n.jsx("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"/images/favicon-16x16.png"}),n.jsx("link",{rel:"manifest",href:"/images/site.webmanifest"})]}),n.jsx("body",{className:s().className,children:e}),n.jsx(l.GoogleAnalytics,{gaId:"G-ZCTZLBMW1X"})]})}},7965:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>A});var n=i(9510),r=i(8570);let s=(0,r.createProxy)(String.raw`C:\Users\loren\OneDrive\Desktop\Projects\alexlawnscaping\node_modules\react-hot-toast\dist\index.mjs`),{__esModule:o,$$typeof:a}=s;s.default,(0,r.createProxy)(String.raw`C:\Users\loren\OneDrive\Desktop\Projects\alexlawnscaping\node_modules\react-hot-toast\dist\index.mjs#CheckmarkIcon`),(0,r.createProxy)(String.raw`C:\Users\loren\OneDrive\Desktop\Projects\alexlawnscaping\node_modules\react-hot-toast\dist\index.mjs#ErrorIcon`),(0,r.createProxy)(String.raw`C:\Users\loren\OneDrive\Desktop\Projects\alexlawnscaping\node_modules\react-hot-toast\dist\index.mjs#LoaderIcon`),(0,r.createProxy)(String.raw`C:\Users\loren\OneDrive\Desktop\Projects\alexlawnscaping\node_modules\react-hot-toast\dist\index.mjs#ToastBar`),(0,r.createProxy)(String.raw`C:\Users\loren\OneDrive\Desktop\Projects\alexlawnscaping\node_modules\react-hot-toast\dist\index.mjs#ToastIcon`);let l=(0,r.createProxy)(String.raw`C:\Users\loren\OneDrive\Desktop\Projects\alexlawnscaping\node_modules\react-hot-toast\dist\index.mjs#Toaster`);(0,r.createProxy)(String.raw`C:\Users\loren\OneDrive\Desktop\Projects\alexlawnscaping\node_modules\react-hot-toast\dist\index.mjs#default`),(0,r.createProxy)(String.raw`C:\Users\loren\OneDrive\Desktop\Projects\alexlawnscaping\node_modules\react-hot-toast\dist\index.mjs#resolveValue`),(0,r.createProxy)(String.raw`C:\Users\loren\OneDrive\Desktop\Projects\alexlawnscaping\node_modules\react-hot-toast\dist\index.mjs#toast`),(0,r.createProxy)(String.raw`C:\Users\loren\OneDrive\Desktop\Projects\alexlawnscaping\node_modules\react-hot-toast\dist\index.mjs#useToaster`),(0,r.createProxy)(String.raw`C:\Users\loren\OneDrive\Desktop\Projects\alexlawnscaping\node_modules\react-hot-toast\dist\index.mjs#useToasterStore`);var h=i(6794),c=i.n(h);i(8886);let u=()=>(0,n.jsxs)("section",{className:"slogan-section",children:[n.jsx(c(),{src:"/lawn.webp",alt:"lawn",fill:!0,objectFit:"cover",className:"next-img"}),n.jsx("div",{className:"img-overlay"}),(0,n.jsxs)("div",{className:"slogan-text",children:[n.jsx("h1",{children:"Fall Cleanup & Lawnscaping Services in Mount Prospect, Illinois"}),n.jsx("p",{children:"Welcome to M.P. Green Teens! Our mission is to transform your lawns and gardens into beautiful, vibrant spaces. Let us help you achieve your landscaping goals, enhancing both the beauty of your home and your enjoyment of the outdoors."}),n.jsx("div",{className:"link-container",children:n.jsx("a",{href:"#services",children:"Learn More"})})]})]});i(9330);let d=()=>(0,n.jsxs)("section",{className:"pricing-section",id:"pricing",children:[(0,n.jsxs)("div",{className:"pricing-header",children:[n.jsx("h2",{children:" \xa0 Our Services \xa0 "}),n.jsx("h5",{children:"Keep your outdoor spaces looking their best with MP Green Teens! We offer seasonal cleanups, leaf removal, lawn aeration, pruning, and mulching to prepare your yard for the colder months ahead. Let us handle the hard work so you can enjoy a tidy, well-maintained landscape all season long. Contact us today to schedule your fall services now!"})]}),n.jsx("h2",{children:"Pricing"}),n.jsx("div",{className:"pricing-content",children:[{title:"Grass cutting, trimming/edging",description:"Starts at $25 (prices vary depending on grass length and square footage)"},{title:"Weeding",description:"$15 per hour"},{title:"Hedge Trimming",description:"Starts at $10 depending on shrub/hedge size and height"},{title:"Spring/Fall Cleanup",description:"Starting at $50 depending on size and amount of debris"},{title:"Planting",description:"Starts at $15 per hour"},{title:"Mulching",description:"Prices vary depending on whether you are supplying your mulch for us to lay or if you prefer us to bring our own mulch to lay"}].map((e,t)=>(0,n.jsxs)("div",{className:"pricing-card",children:[n.jsx("h3",{children:e.title}),n.jsx("p",{children:e.description})]},t))})]});var p=i(3183),f=i.n(p);i(5819);let _=({img:e,title:t,subtitle:i})=>(0,n.jsxs)("article",{className:"card",children:[n.jsx("h3",{className:"fw-bold card-title",children:t}),n.jsx(c(),{src:`/${e}.webp`,alt:e,width:1e3,height:1e3,objectFit:"cover",className:"next-img"}),n.jsx("p",{className:"card-text",children:i})]});_.propTypes={img:f().string.isRequired,title:f().string.isRequired,subtitle:f().string.isRequired};let g=()=>(0,n.jsxs)("section",{className:"services-section",id:"services",children:[n.jsx("h5",{children:"In addition, we offer discounts on pre-paid biweekly lawn mowing services listed below."}),(0,n.jsxs)("div",{className:"services-content",children:[n.jsx(_,{img:"mowing",title:"Mowing / Edging",subtitle:"We take pride in providing top-notch lawn mowing services. With   attention to detail and a commitment to excellence, we'll ensure your   lawn stays perfectly manicured and healthy. We will mow your lawn to   your preferred length, edge and trim it, and we will even haul away the   clippings if that is your preference. We can also bag it and leave it   by your curb, or if the clippings are minimal, we can leave the   clippings on your grass to promote better growth, as the grass   clippings are a good source of nutrients."}),n.jsx(_,{img:"weeding",title:"Weeding",subtitle:"We excel in ensuring your garden remains pristine and free of unwanted   growth. We tackle even the toughest weeds, allowing your plants to   thrive and your garden to look its best all season long."}),n.jsx(_,{img:"hedge",title:"Hedge Trimming",subtitle:"We ensure your hedges are healthy, well-maintained, and beautifully   manicured, providing a clean and pristine look to your outdoors."}),n.jsx(_,{img:"springFall",title:"Spring / Fall Cleanup",subtitle:"Our dedicated team offers comprehensive fall and spring cleanup   services to keep your yard looking its best year-round. We'll handle   the removal of leaves, debris, and any seasonal clutter, making sure   your yard is clean, healthy, and ready for the changing seasons."})]})]}),m=(0,r.createProxy)(String.raw`C:\Users\loren\OneDrive\Desktop\Projects\alexlawnscaping\app\components\Testimonials.js`),{__esModule:y,$$typeof:v}=m;m.default;let b=(0,r.createProxy)(String.raw`C:\Users\loren\OneDrive\Desktop\Projects\alexlawnscaping\app\components\Testimonials.js#default`),w=(0,r.createProxy)(String.raw`C:\Users\loren\OneDrive\Desktop\Projects\alexlawnscaping\app\components\Feedback.js`),{__esModule:C,$$typeof:E}=w;w.default;let S=(0,r.createProxy)(String.raw`C:\Users\loren\OneDrive\Desktop\Projects\alexlawnscaping\app\components\Feedback.js#default`);i(8516);let x=()=>(0,n.jsxs)("section",{className:"about-section",id:"about",children:[n.jsx(c(),{src:"/team.webp",alt:"team",width:1e3,height:1e3,objectFit:"cover",className:"next-img"}),(0,n.jsxs)("article",{className:"about-content",children:[n.jsx("div",{className:"about-header",children:n.jsx("h2",{className:"about-title",children:"About The Team!"})}),n.jsx("div",{className:"about-text",children:"M.P. Green Teens is a team of passionate high school students dedicated to transforming your outdoor spaces. Every member is a young and hard-working entrepreneur who comes from Prospect High School. We bring fresh prospectives and youthful energy to the neighborhood providing fall cleanup & lawnscaping to Mount Prospect, Illinois. Top-notch care is ensured on every project to make sure we satisfy your needs. From gardening to mowing lawns, we got you covered."})]})]});i(6544);let I=()=>(0,n.jsxs)("section",{className:"founder-section",id:"founder",children:[(0,n.jsxs)("div",{className:"founder-header",children:[n.jsx("h4",{className:"founder-subtitle",children:" \xa0 The Founder \xa0  "}),n.jsx("h2",{className:"founder-title",children:"Alex Madalinski"})]}),(0,n.jsxs)("article",{className:"founder-content",children:[n.jsx(c(),{src:"/alex.webp",alt:"founder",width:1e3,height:1e3,objectFit:"cover",className:"next-img"}),n.jsx("div",{className:"founder-text",children:"I'm Alex, the founder of MP Green Teens, a dynamic high school run landscaping business. Combining a passion for nature, 3 years of landscaping experience, and hard work with entrepreneurial spirit, I've cultivated a dedicated team of young landscapers committed to transforming local lawns and gardens in the bright community of Mount Prospect. M.P. Green Teens is redefining landscaping services with fresh ideas, youthful energy, and a commitment to excellence."})]})]});i(359);let k=({icon:e,name:t,content:i})=>(0,n.jsxs)("div",{className:"contact-card",children:[n.jsx("i",{className:e}),n.jsx("h3",{children:t}),n.jsx("p",{children:i})]});k.propTypes={icon:f().string.isRequired,name:f().string.isRequired,content:f().string.isRequired};let T=()=>(0,n.jsxs)("section",{className:"contact-section",id:"contact",children:[n.jsx("h2",{children:"Contact Us"}),(0,n.jsxs)("div",{className:"contact-cards",children:[n.jsx(k,{icon:"bi bi-envelope-fill",name:"Email",content:"mpgreenteens@gmail.com"}),n.jsx(k,{icon:"bi bi-telephone-fill",name:"Phone",content:"+1 224-522-4243"})]})]}),P=(0,r.createProxy)(String.raw`C:\Users\loren\OneDrive\Desktop\Projects\alexlawnscaping\app\components\Navbar.js`),{__esModule:N,$$typeof:O}=P;P.default;let R=(0,r.createProxy)(String.raw`C:\Users\loren\OneDrive\Desktop\Projects\alexlawnscaping\app\components\Navbar.js#default`);i(17);let D=()=>n.jsx("footer",{className:"footer bg-black p-3",children:(0,n.jsxs)("div",{className:"footer-content",children:[(0,n.jsxs)("div",{className:"question",children:[(0,n.jsxs)("h2",{className:"fw-bold",children:["Need your ",n.jsx("span",{children:"lawn"})," mowed?"]}),n.jsx("hr",{})]}),(0,n.jsxs)("section",{className:"contact",children:[n.jsx("div",{className:"phone pb-1",children:(0,n.jsxs)("p",{children:[n.jsx("i",{className:"bi bi-telephone-fill"})," +1 224-522-4243"]})}),(0,n.jsxs)("div",{className:"email",children:[n.jsx("i",{className:"bi bi-envelope-fill"})," mpgreenteens@gmail.com"]})]}),n.jsx("p",{className:"copy",children:"\xa9 M.P. Green Teens. All rights reserved."})]})});function A(){return(0,n.jsxs)(n.Fragment,{children:[n.jsx("link",{rel:"icon",href:"/images/favicon.ico",sizes:"any"}),n.jsx(l,{position:"top-right",reverseOrder:!1,toastOptions:{className:"",duration:1e4,style:{background:"#363636",color:"#fff"},success:{duration:1e4,theme:{primary:"green",secondary:"black"}}}}),n.jsx(R,{}),(0,n.jsxs)("main",{children:[n.jsx(u,{}),n.jsx(d,{}),n.jsx(g,{}),n.jsx(b,{}),n.jsx(S,{}),n.jsx(x,{}),n.jsx(I,{}),n.jsx(T,{})]}),n.jsx(D,{})]})}},221:(e,t,i)=>{"use strict";let{createProxy:n}=i(8570);e.exports=n("C:\\Users\\loren\\OneDrive\\Desktop\\Projects\\alexlawnscaping\\node_modules\\next\\dist\\client\\image-component.js")},9241:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImgProps",{enumerable:!0,get:function(){return a}}),i(6501);let n=i(5728),r=i(9472);function s(e){return void 0!==e.default}function o(e){return void 0===e?e:"number"==typeof e?Number.isFinite(e)?e:NaN:"string"==typeof e&&/^[0-9]+$/.test(e)?parseInt(e,10):NaN}function a(e,t){var i;let a,l,h,{src:c,sizes:u,unoptimized:d=!1,priority:p=!1,loading:f,className:_,quality:g,width:m,height:y,fill:v=!1,style:b,overrideSrc:w,onLoad:C,onLoadingComplete:E,placeholder:S="empty",blurDataURL:x,fetchPriority:I,layout:k,objectFit:T,objectPosition:P,lazyBoundary:N,lazyRoot:O,...R}=e,{imgConf:D,showAltText:A,blurComplete:M,defaultLoader:L}=t,j=D||r.imageConfigDefault;if("allSizes"in j)a=j;else{let e=[...j.deviceSizes,...j.imageSizes].sort((e,t)=>e-t),t=j.deviceSizes.sort((e,t)=>e-t);a={...j,allSizes:e,deviceSizes:t}}if(void 0===L)throw Error("images.loaderFile detected but the file is missing default export.\nRead more: https://nextjs.org/docs/messages/invalid-images-config");let F=R.loader||L;delete R.loader,delete R.srcSet;let q="__next_img_default"in F;if(q){if("custom"===a.loader)throw Error('Image with src "'+c+'" is missing "loader" prop.\nRead more: https://nextjs.org/docs/messages/next-image-missing-loader')}else{let e=F;F=t=>{let{config:i,...n}=t;return e(n)}}if(k){"fill"===k&&(v=!0);let e={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[k];e&&(b={...b,...e});let t={responsive:"100vw",fill:"100vw"}[k];t&&!u&&(u=t)}let U="",H=o(m),B=o(y);if("object"==typeof(i=c)&&(s(i)||void 0!==i.src)){let e=s(c)?c.default:c;if(!e.src)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received "+JSON.stringify(e));if(!e.height||!e.width)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received "+JSON.stringify(e));if(l=e.blurWidth,h=e.blurHeight,x=x||e.blurDataURL,U=e.src,!v){if(H||B){if(H&&!B){let t=H/e.width;B=Math.round(e.height*t)}else if(!H&&B){let t=B/e.height;H=Math.round(e.width*t)}}else H=e.width,B=e.height}}let W=!p&&("lazy"===f||void 0===f);(!(c="string"==typeof c?c:U)||c.startsWith("data:")||c.startsWith("blob:"))&&(d=!0,W=!1),a.unoptimized&&(d=!0),q&&c.endsWith(".svg")&&!a.dangerouslyAllowSVG&&(d=!0),p&&(I="high");let z=o(g),V=Object.assign(v?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:T,objectPosition:P}:{},A?{}:{color:"transparent"},b),$=M||"empty"===S?null:"blur"===S?'url("data:image/svg+xml;charset=utf-8,'+(0,n.getImageBlurSvg)({widthInt:H,heightInt:B,blurWidth:l,blurHeight:h,blurDataURL:x||"",objectFit:V.objectFit})+'")':'url("'+S+'")',G=$?{backgroundSize:V.objectFit||"cover",backgroundPosition:V.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:$}:{},Y=function(e){let{config:t,src:i,unoptimized:n,width:r,quality:s,sizes:o,loader:a}=e;if(n)return{src:i,srcSet:void 0,sizes:void 0};let{widths:l,kind:h}=function(e,t,i){let{deviceSizes:n,allSizes:r}=e;if(i){let e=/(^|\s)(1?\d?\d)vw/g,t=[];for(let n;n=e.exec(i);n)t.push(parseInt(n[2]));if(t.length){let e=.01*Math.min(...t);return{widths:r.filter(t=>t>=n[0]*e),kind:"w"}}return{widths:r,kind:"w"}}return"number"!=typeof t?{widths:n,kind:"w"}:{widths:[...new Set([t,2*t].map(e=>r.find(t=>t>=e)||r[r.length-1]))],kind:"x"}}(t,r,o),c=l.length-1;return{sizes:o||"w"!==h?o:"100vw",srcSet:l.map((e,n)=>a({config:t,src:i,quality:s,width:e})+" "+("w"===h?e:n+1)+h).join(", "),src:a({config:t,src:i,quality:s,width:l[c]})}}({config:a,src:c,unoptimized:d,width:H,quality:z,sizes:u,loader:F});return{props:{...R,loading:W?"lazy":f,fetchPriority:I,width:H,height:B,decoding:"async",className:_,style:{...V,...G},sizes:Y.sizes,srcSet:Y.srcSet,src:w||Y.src},meta:{unoptimized:d,priority:p,placeholder:S,fill:v}}}},5728:(e,t)=>{"use strict";function i(e){let{widthInt:t,heightInt:i,blurWidth:n,blurHeight:r,blurDataURL:s,objectFit:o}=e,a=n?40*n:t,l=r?40*r:i,h=a&&l?"viewBox='0 0 "+a+" "+l+"'":"";return"%3Csvg xmlns='http://www.w3.org/2000/svg' "+h+"%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='"+(h?"none":"contain"===o?"xMidYMid":"cover"===o?"xMidYMid slice":"none")+"' style='filter: url(%23b);' href='"+s+"'/%3E%3C/svg%3E"}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImageBlurSvg",{enumerable:!0,get:function(){return i}})},9472:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var i in t)Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}(t,{VALID_LOADERS:function(){return i},imageConfigDefault:function(){return n}});let i=["default","imgix","cloudinary","akamai","custom"],n={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:60,formats:["image/webp"],dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"inline",remotePatterns:[],unoptimized:!1}},6794:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var i in t)Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}(t,{default:function(){return l},getImageProps:function(){return a}});let n=i(3370),r=i(9241),s=i(221),o=n._(i(2049));function a(e){let{props:t}=(0,r.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,i]of Object.entries(t))void 0===i&&delete t[e];return{props:t}}let l=s.Image},2049:(e,t)=>{"use strict";function i(e){let{config:t,src:i,width:n,quality:r}=e;return t.path+"?url="+encodeURIComponent(i)+"&w="+n+"&q="+(r||75)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}}),i.__next_img_default=!0;let n=i},6501:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"warnOnce",{enumerable:!0,get:function(){return i}});let i=e=>{}},9692:(e,t,i)=>{"use strict";var n=i(7290);function r(){}function s(){}s.resetWarningCache=r,e.exports=function(){function e(e,t,i,r,s,o){if(o!==n){var a=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:r};return i.PropTypes=i,i}},3183:(e,t,i)=>{e.exports=i(9692)()},7290:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},6039:()=>{},8516:()=>{},359:()=>{},8090:()=>{},17:()=>{},6544:()=>{},5512:()=>{},9330:()=>{},5819:()=>{},8886:()=>{},7067:()=>{},3497:(e,t,i)=>{"use strict";let n,r,s;i.d(t,{Jn:()=>L,qX:()=>D,Xd:()=>R,Mq:()=>F,ZF:()=>j,KN:()=>q});var o=i(7752),a=i(5036),l=i(2377);let h=(e,t)=>t.some(t=>e instanceof t),c=new WeakMap,u=new WeakMap,d=new WeakMap,p=new WeakMap,f=new WeakMap,_={get(e,t,i){if(e instanceof IDBTransaction){if("done"===t)return u.get(e);if("objectStoreNames"===t)return e.objectStoreNames||d.get(e);if("store"===t)return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return g(e[t])},set:(e,t,i)=>(e[t]=i,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function g(e){var t;if(e instanceof IDBRequest)return function(e){let t=new Promise((t,i)=>{let n=()=>{e.removeEventListener("success",r),e.removeEventListener("error",s)},r=()=>{t(g(e.result)),n()},s=()=>{i(e.error),n()};e.addEventListener("success",r),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&c.set(t,e)}).catch(()=>{}),f.set(t,e),t}(e);if(p.has(e))return p.get(e);let i="function"==typeof(t=e)?t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(r||(r=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(m(this),e),g(c.get(this))}:function(...e){return g(t.apply(m(this),e))}:function(e,...i){let n=t.call(m(this),e,...i);return d.set(n,e.sort?e.sort():[e]),g(n)}:(t instanceof IDBTransaction&&function(e){if(u.has(e))return;let t=new Promise((t,i)=>{let n=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",s),e.removeEventListener("abort",s)},r=()=>{t(),n()},s=()=>{i(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",r),e.addEventListener("error",s),e.addEventListener("abort",s)});u.set(e,t)}(t),h(t,n||(n=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(t,_):t;return i!==e&&(p.set(e,i),f.set(i,e)),i}let m=e=>f.get(e),y=["get","getKey","getAll","getAllKeys","count"],v=["put","add","delete","clear"],b=new Map;function w(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(b.get(t))return b.get(t);let i=t.replace(/FromIndex$/,""),n=t!==i,r=v.includes(i);if(!(i in(n?IDBIndex:IDBObjectStore).prototype)||!(r||y.includes(i)))return;let s=async function(e,...t){let s=this.transaction(e,r?"readwrite":"readonly"),o=s.store;return n&&(o=o.index(t.shift())),(await Promise.all([o[i](...t),r&&s.done]))[0]};return b.set(t,s),s}_={...s=_,get:(e,t,i)=>w(e,t)||s.get(e,t,i),has:(e,t)=>!!w(e,t)||s.has(e,t)};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(!function(e){let t=e.getComponent();return(null==t?void 0:t.type)==="VERSION"}(e))return null;{let t=e.getImmediate();return`${t.library}/${t.version}`}}).filter(e=>e).join(" ")}}let E="@firebase/app",S="0.10.5",x=new a.Yd("@firebase/app"),I="[DEFAULT]",k={[E]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},T=new Map,P=new Map,N=new Map;function O(e,t){try{e.container.addComponent(t)}catch(i){x.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,i)}}function R(e){let t=e.name;if(N.has(t))return x.debug(`There were multiple attempts to register component ${t}.`),!1;for(let i of(N.set(t,e),T.values()))O(i,e);for(let t of P.values())O(t,e);return!0}function D(e,t){let i=e.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),e.container.getProvider(t)}let A=new l.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new o.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw A.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let L="10.12.2";function j(e,t={}){let i=e;"object"!=typeof t&&(t={name:t});let n=Object.assign({name:I,automaticDataCollectionEnabled:!1},t),r=n.name;if("string"!=typeof r||!r)throw A.create("bad-app-name",{appName:String(r)});if(i||(i=(0,l.aH)()),!i)throw A.create("no-options");let s=T.get(r);if(s){if((0,l.vZ)(i,s.options)&&(0,l.vZ)(n,s.config))return s;throw A.create("duplicate-app",{appName:r})}let a=new o.H0(r);for(let e of N.values())a.addComponent(e);let h=new M(i,n,a);return T.set(r,h),h}function F(e=I){let t=T.get(e);if(!t&&e===I&&(0,l.aH)())return j();if(!t)throw A.create("no-app",{appName:e});return t}function q(e,t,i){var n;let r=null!==(n=k[e])&&void 0!==n?n:e;i&&(r+=`-${i}`);let s=r.match(/\s|\//),a=t.match(/\s|\//);if(s||a){let e=[`Unable to register library "${r}" with version "${t}":`];s&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),x.warn(e.join(" "));return}R(new o.wA(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}let U="firebase-heartbeat-store",H=null;function B(){return H||(H=(function(e,t,{blocked:i,upgrade:n,blocking:r,terminated:s}={}){let o=indexedDB.open(e,1),a=g(o);return n&&o.addEventListener("upgradeneeded",e=>{n(g(o.result),e.oldVersion,e.newVersion,g(o.transaction),e)}),i&&o.addEventListener("blocked",e=>i(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),r&&e.addEventListener("versionchange",e=>r(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a})("firebase-heartbeat-database",0,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(U)}catch(e){console.warn(e)}}}).catch(e=>{throw A.create("idb-open",{originalErrorMessage:e.message})})),H}async function W(e){try{let t=(await B()).transaction(U),i=await t.objectStore(U).get(V(e));return await t.done,i}catch(e){if(e instanceof l.ZR)x.warn(e.message);else{let t=A.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});x.warn(t.message)}}}async function z(e,t){try{let i=(await B()).transaction(U,"readwrite"),n=i.objectStore(U);await n.put(t,V(e)),await i.done}catch(e){if(e instanceof l.ZR)x.warn(e.message);else{let t=A.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});x.warn(t.message)}}}function V(e){return`${e.name}!${e.options.appId}`}class ${constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Y(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=G();return(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)==null)?void 0:this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(e=>e.date===n)?void 0:(this._heartbeatsCache.heartbeats.push({date:n,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{let t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache))}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)==null||0===this._heartbeatsCache.heartbeats.length)return"";let t=G(),{heartbeatsToSend:i,unsentEntries:n}=function(e,t=1024){let i=[],n=e.slice();for(let r of e){let e=i.find(e=>e.agent===r.agent);if(e){if(e.dates.push(r.date),K(i)>t){e.dates.pop();break}}else if(i.push({agent:r.agent,dates:[r.date]}),K(i)>t){i.pop();break}n=n.slice(1)}return{heartbeatsToSend:i,unsentEntries:n}}(this._heartbeatsCache.heartbeats),r=(0,l.L)(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function G(){return new Date().toISOString().substring(0,10)}class Y{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,l.hl)()&&(0,l.eu)().then(()=>!0).catch(()=>!1)}async read(){if(!await this._canUseIndexedDBPromise)return{heartbeats:[]};{let e=await W(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return z(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return z(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}}}function K(e){return(0,l.L)(JSON.stringify({version:2,heartbeats:e})).length}R(new o.wA("platform-logger",e=>new C(e),"PRIVATE")),R(new o.wA("heartbeat",e=>new $(e),"PRIVATE")),q(E,S,""),q(E,S,"esm2017"),q("fire-js","")},7752:(e,t,i)=>{"use strict";i.d(t,{H0:()=>a,wA:()=>r});var n=i(2377);class r{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let s="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new n.BH;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&e.resolve(i)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let i=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),n=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(e){if(n)return null;throw e}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if("EAGER"===e.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:s})}catch(e){}for(let[e,t]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:i});t.resolve(e)}catch(e){}}}}clearInstance(e=s){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=s){return this.instances.has(e)}getOptions(e=s){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let n=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[e,t]of this.instancesDeferred.entries())i===this.normalizeInstanceIdentifier(e)&&t.resolve(n);return n}onInit(e,t){var i;let n=this.normalizeInstanceIdentifier(t),r=null!==(i=this.onInitCallbacks.get(n))&&void 0!==i?i:new Set;r.add(e),this.onInitCallbacks.set(n,r);let s=this.instances.get(n);return s&&e(s,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let n of i)try{n(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:e===s?void 0:e,options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch(e){}return i||null}normalizeInstanceIdentifier(e=s){return this.component?this.component.multipleInstances?e:s:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new o(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},5036:(e,t,i)=>{"use strict";var n;i.d(t,{Yd:()=>h,in:()=>n});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let r=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(n||(n={}));let s={debug:n.DEBUG,verbose:n.VERBOSE,info:n.INFO,warn:n.WARN,error:n.ERROR,silent:n.SILENT},o=n.INFO,a={[n.DEBUG]:"log",[n.VERBOSE]:"log",[n.INFO]:"info",[n.WARN]:"warn",[n.ERROR]:"error"},l=(e,t,...i)=>{if(t<e.logLevel)return;let n=new Date().toISOString(),r=a[t];if(r)console[r](`[${n}]  ${e.name}:`,...i);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class h{constructor(e){this.name=e,this._logLevel=o,this._logHandler=l,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in n))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,n.DEBUG,...e),this._logHandler(this,n.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,n.VERBOSE,...e),this._logHandler(this,n.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,n.INFO,...e),this._logHandler(this,n.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,n.WARN,...e),this._logHandler(this,n.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,n.ERROR,...e),this._logHandler(this,n.ERROR,...e)}}},2377:(e,t,i)=>{"use strict";i.d(t,{BH:()=>w,DV:()=>j,GJ:()=>M,L:()=>u,LL:()=>P,P0:()=>v,Sg:()=>C,UI:()=>q,US:()=>l,Wl:()=>R,Yr:()=>x,ZR:()=>T,aH:()=>b,b$:()=>S,cI:()=>O,dS:()=>z,eu:()=>k,g5:()=>s,gK:()=>W,gQ:()=>B,h$:()=>c,hl:()=>I,hu:()=>r,m9:()=>$,p$:()=>p,r3:()=>L,uI:()=>E,ug:()=>V,vZ:()=>function e(t,i){if(t===i)return!0;let n=Object.keys(t),r=Object.keys(i);for(let s of n){if(!r.includes(s))return!1;let n=t[s],o=i[s];if(U(n)&&U(o)){if(!e(n,o))return!1}else if(n!==o)return!1}for(let e of r)if(!n.includes(e))return!1;return!0},w9:()=>A,xO:()=>H,xb:()=>F});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let n={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},r=function(e,t){if(!e)throw s(t)},s=function(e){return Error("Firebase Database ("+n.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},o=function(e){let t=[],i=0;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r<128?t[i++]=r:(r<2048?t[i++]=r>>6|192:((64512&r)==55296&&n+1<e.length&&(64512&e.charCodeAt(n+1))==56320?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++n)),t[i++]=r>>18|240,t[i++]=r>>12&63|128):t[i++]=r>>12|224,t[i++]=r>>6&63|128),t[i++]=63&r|128)}return t},a=function(e){let t=[],i=0,n=0;for(;i<e.length;){let r=e[i++];if(r<128)t[n++]=String.fromCharCode(r);else if(r>191&&r<224){let s=e[i++];t[n++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){let s=((7&r)<<18|(63&e[i++])<<12|(63&e[i++])<<6|63&e[i++])-65536;t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))}else{let s=e[i++],o=e[i++];t[n++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return t.join("")},l={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let t=0;t<e.length;t+=3){let r=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,l=a?e[t+2]:0,h=r>>2,c=(3&r)<<4|o>>4,u=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(u=64)),n.push(i[h],i[c],i[u],i[d])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(o(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):a(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let i=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let t=0;t<e.length;){let r=i[e.charAt(t++)],s=t<e.length?i[e.charAt(t)]:0,o=++t<e.length?i[e.charAt(t)]:64,a=++t<e.length?i[e.charAt(t)]:64;if(++t,null==r||null==s||null==o||null==a)throw new h;let l=r<<2|s>>4;if(n.push(l),64!==o){let e=s<<4&240|o>>2;if(n.push(e),64!==a){let e=o<<6&192|a;n.push(e)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class h extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}let c=function(e){let t=o(e);return l.encodeByteArray(t,!0)},u=function(e){return c(e).replace(/\./g,"")},d=function(e){try{return l.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p(e){return function e(t,i){if(!(i instanceof Object))return i;switch(i.constructor){case Date:return new Date(i.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return i}for(let n in i)i.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=e(t[n],i[n]));return t}(void 0,e)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let f=()=>/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw Error("Unable to locate global object.")})().__FIREBASE_DEFAULTS__,_=()=>{if("undefined"==typeof process||void 0===process.env)return;let e=process.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},g=()=>{let e;if("undefined"==typeof document)return;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}let t=e&&d(e[1]);return t&&JSON.parse(t)},m=()=>{try{return f()||_()||g()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},y=e=>{var t,i;return null===(i=null===(t=m())||void 0===t?void 0:t.emulatorHosts)||void 0===i?void 0:i[e]},v=e=>{let t=y(e);if(!t)return;let i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw Error(`Invalid host ${t} with no separate hostname and port!`);let n=parseInt(t.substring(i+1),10);return"["===t[0]?[t.substring(1,i-1),n]:[t.substring(0,i),n]},b=()=>{var e;return null===(e=m())||void 0===e?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C(e,t){if(e.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let i=t||"demo-project",n=e.iat||0,r=e.sub||e.user_id;if(!r)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:n,exp:n+3600,auth_time:n,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[u(JSON.stringify({alg:"none",type:"JWT"})),u(JSON.stringify(s)),""].join(".")}function E(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"")}function S(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function x(){return!0===n.NODE_CLIENT||!0===n.NODE_ADMIN}function I(){try{return"object"==typeof indexedDB}catch(e){return!1}}function k(){return new Promise((e,t)=>{try{let i=!0,n="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(n);r.onsuccess=()=>{r.result.close(),i||self.indexedDB.deleteDatabase(n),e(!0)},r.onupgradeneeded=()=>{i=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}})}class T extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name="FirebaseError",Object.setPrototypeOf(this,T.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,P.prototype.create)}}class P{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},n=`${this.service}/${e}`,r=this.errors[e],s=r?r.replace(N,(e,t)=>{let n=i[t];return null!=n?String(n):`<${t}?>`}):"Error",o=`${this.serviceName}: ${s} (${n}).`;return new T(n,o,i)}}let N=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O(e){return JSON.parse(e)}function R(e){return JSON.stringify(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let D=function(e){let t={},i={},n={},r="";try{let s=e.split(".");t=O(d(s[0])||""),i=O(d(s[1])||""),r=s[2],n=i.d||{},delete i.d}catch(e){}return{header:t,claims:i,data:n,signature:r}},A=function(e){let t=D(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},M=function(e){let t=D(e).claims;return"object"==typeof t&&!0===t.admin};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function j(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function F(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function q(e,t,i){let n={};for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=t.call(i,e[r],r,e));return n}function U(e){return null!==e&&"object"==typeof e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H(e){let t=[];for(let[i,n]of Object.entries(e))Array.isArray(n)?n.forEach(e=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){let i,n;t||(t=0);let r=this.W_;if("string"==typeof e)for(let i=0;i<16;i++)r[i]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let i=0;i<16;i++)r[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let e=16;e<80;e++){let t=r[e-3]^r[e-8]^r[e-14]^r[e-16];r[e]=(t<<1|t>>>31)&4294967295}let s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(let e=0;e<80;e++){e<40?e<20?(i=l^o&(a^l),n=1518500249):(i=o^a^l,n=1859775393):e<60?(i=o&a|l&(o|a),n=2400959708):(i=o^a^l,n=3395469782);let t=(s<<5|s>>>27)+i+h+n+r[e]&4294967295;h=l,l=a,a=(o<<30|o>>>2)&4294967295,o=s,s=t}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);let i=t-this.blockSize,n=0,r=this.buf_,s=this.inbuf_;for(;n<t;){if(0===s)for(;n<=i;)this.compress_(e,n),n+=this.blockSize;if("string"==typeof e){for(;n<t;)if(r[s]=e.charCodeAt(n),++s,++n,s===this.blockSize){this.compress_(r),s=0;break}}else for(;n<t;)if(r[s]=e[n],++s,++n,s===this.blockSize){this.compress_(r),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){let e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let e=this.blockSize-1;e>=56;e--)this.buf_[e]=255&t,t/=256;this.compress_(this.buf_);let i=0;for(let t=0;t<5;t++)for(let n=24;n>=0;n-=8)e[i]=this.chain_[t]>>n&255,++i;return e}}function W(e,t){return`${e} failed: ${t} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let z=function(e){let t=[],i=0;for(let n=0;n<e.length;n++){let s=e.charCodeAt(n);if(s>=55296&&s<=56319){let t=s-55296;r(++n<e.length,"Surrogate pair missing trail surrogate."),s=65536+(t<<10)+(e.charCodeAt(n)-56320)}s<128?t[i++]=s:(s<2048?t[i++]=s>>6|192:(s<65536?t[i++]=s>>12|224:(t[i++]=s>>18|240,t[i++]=s>>12&63|128),t[i++]=s>>6&63|128),t[i++]=63&s|128)}return t},V=function(e){let t=0;for(let i=0;i<e.length;i++){let n=e.charCodeAt(i);n<128?t++:n<2048?t+=2:n>=55296&&n<=56319?(t+=4,i++):t+=3}return t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $(e){return e&&e._delegate?e._delegate:e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */n.NODE_CLIENT=!0},8558:(e,t,i)=>{"use strict";let n,r,s,o,a,l,h,c,u,d;i.d(t,{N8:()=>nq,jM:()=>nM,iH:()=>nN,t8:()=>nR});var p,f,_=i(3968),g=i(2377),m=i(5036),y=i(3497),v=i(7752);let b=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,w="websocket",C="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,g.Wl)(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,g.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,g.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let x=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){let t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new E(t)}}catch(e){}return new S},I=x("localStorage"),k=x("sessionStorage"),T=new m.Yd("@firebase/database"),P=function(){let e=1;return function(){return e++}}(),N=function(e){let t=(0,g.dS)(e),i=new g.gQ;i.update(t);let n=i.digest();return g.US.encodeByteArray(n)},O=function(...e){let t="";for(let i=0;i<e.length;i++){let n=e[i];Array.isArray(n)||n&&"object"==typeof n&&"number"==typeof n.length?t+=O.apply(null,n):"object"==typeof n?t+=(0,g.Wl)(n):t+=n,t+=" "}return t},R=null,D=!0,A=function(e,t){(0,g.hu)(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(T.logLevel=m.in.VERBOSE,R=T.log.bind(T),t&&k.set("logging_enabled",!0)):"function"==typeof e?R=e:(R=null,k.remove("logging_enabled"))},M=function(...e){if(!0===D&&(D=!1,null===R&&!0===k.get("logging_enabled")&&A(!0)),R){let t=O.apply(null,e);R(t)}},L=function(e){return function(...t){M(e,...t)}},j=function(...e){let t="FIREBASE INTERNAL ERROR: "+O(...e);T.error(t)},F=function(...e){let t=`FIREBASE FATAL ERROR: ${O(...e)}`;throw T.error(t),Error(t)},q=function(...e){let t="FIREBASE WARNING: "+O(...e);T.warn(t)},U=function(){"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&q("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},H=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},B=function(e){if((0,g.Yr)()||"complete"===document.readyState)e();else{let t=!1,i=function(){if(!document.body){setTimeout(i,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&i()}),window.attachEvent("onload",i))}},W="[MIN_NAME]",z="[MAX_NAME]",V=function(e,t){if(e===t)return 0;if(e===W||t===z)return -1;if(t===W||e===z)return 1;{let i=X(e),n=X(t);return null!==i?null!==n?i-n==0?e.length-t.length:i-n:-1:null!==n?1:e<t?-1:1}},$=function(e,t){return e===t?0:e<t?-1:1},G=function(e,t){if(t&&e in t)return t[e];throw Error("Missing required key ("+e+") in object: "+(0,g.Wl)(t))},Y=function(e){if("object"!=typeof e||null===e)return(0,g.Wl)(e);let t=[];for(let i in e)t.push(i);t.sort();let i="{";for(let n=0;n<t.length;n++)0!==n&&(i+=","),i+=(0,g.Wl)(t[n])+":"+Y(e[t[n]]);return i+"}"},K=function(e,t){let i=e.length;if(i<=t)return[e];let n=[];for(let r=0;r<i;r+=t)r+t>i?n.push(e.substring(r,i)):n.push(e.substring(r,r+t));return n};function Q(e,t){for(let i in e)e.hasOwnProperty(i)&&t(i,e[i])}let Z=function(e){let t,i,n,r,s;(0,g.hu)(!H(e),"Invalid JSON number"),0===e?(i=0,n=0,t=1/e==-1/0?1:0):(t=e<0,(e=Math.abs(e))>=22250738585072014e-324?(i=(r=Math.min(Math.floor(Math.log(e)/Math.LN2),1023))+1023,n=Math.round(e*Math.pow(2,52-r)-4503599627370496)):(i=0,n=Math.round(e/5e-324)));let o=[];for(s=52;s;s-=1)o.push(n%2?1:0),n=Math.floor(n/2);for(s=11;s;s-=1)o.push(i%2?1:0),i=Math.floor(i/2);o.push(t?1:0),o.reverse();let a=o.join(""),l="";for(s=0;s<64;s+=8){let e=parseInt(a.substr(s,8),2).toString(16);1===e.length&&(e="0"+e),l+=e}return l.toLowerCase()},J=RegExp("^-?(0*)\\d{1,10}$"),X=function(e){if(J.test(e)){let t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},ee=function(e){try{e()}catch(e){setTimeout(()=>{throw q("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},et=function(e,t){let i=setTimeout(e,t);return"number"==typeof i&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(i):"object"==typeof i&&i.unref&&i.unref(),i};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,t,i,n,r=!1,s="",o=!1,a=!1){this.secure=t,this.namespace=i,this.webSocketOnly=n,this.nodeAdmin=r,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=I.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&I.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function en(e,t,i){let n;if((0,g.hu)("string"==typeof t,"typeof type must == string"),(0,g.hu)("object"==typeof i,"typeof params must == object"),t===w)n=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===C)n=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw Error("Unknown connection type: "+t);(e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams)&&(i.ns=e.namespace);let r=[];return Q(i,(e,t)=>{r.push(e+"="+t)}),n+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,g.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,g.p$)(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let es={},eo={};function ea(e){let t=e.toString();return es[t]||(es[t]=new er),es[t]}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let el="",eh=null;"undefined"!=typeof MozWebSocket?eh=MozWebSocket:"undefined"!=typeof WebSocket&&(eh=WebSocket);class ec{constructor(e,t,i,n,r,s,o){this.connId=e,this.applicationId=i,this.appCheckToken=n,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=L(this.connId),this.stats_=ea(t),this.connURL=ec.connectionURL_(t,s,o,n,i),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,i,n,r){let s={};return s.v="5",!(0,g.Yr)()&&"undefined"!=typeof location&&location.hostname&&b.test(location.hostname)&&(s.r="f"),t&&(s.s=t),i&&(s.ls=i),n&&(s.ac=n),r&&(s.p=r),en(e,w,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,I.set("previous_websocket_failure",!0);try{let e;if((0,g.Yr)()){let t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":`Firebase/5/${el}/${process.platform}/${t}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);let i=process.env,n=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;n&&(e.proxy={origin:n})}this.mySock=new eh(this.connURL,[],e)}catch(t){this.log_("Error instantiating WebSocket.");let e=t.message||t.data;e&&this.log_(e),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");let t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){ec.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){let t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);t&&t.length>1&&4.4>parseFloat(t[1])&&(e=!0)}return!e&&null!==eh&&!ec.forceDisallow_}static previouslyFailed(){return I.isInMemoryStorage||!0===I.get("previous_websocket_failure")}markConnectionHealthy(){I.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){let e=this.frames.join("");this.frames=null;let t=(0,g.cI)(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,g.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){let t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;let t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{let e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();let t=(0,g.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let i=K(t,16384);i.length>1&&this.sendString_(String(i.length));for(let e=0;e<i.length;e++)this.sendString_(i[e])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){!this.isClosed_&&(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ec.responsesRequiredToBeHealthy=2,ec.healthyTimeout=3e4;let eu="@firebase/database",ed="1.0.5";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(e=>this.appCheck=e)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){q(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(e=>this.auth_=e)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(e=>e&&"auth/token-not-initialized"===e.code?(M("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',q(e)}}class e_{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}e_.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&ee(()=>{this.onMessage_(e[t])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let em="start";class ey{constructor(e,t,i,n,r,s,o){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=n,this.authToken=r,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=L(e),this.stats_=ea(t),this.urlFn=e=>(this.appCheckToken&&(e.ac=this.appCheckToken),en(t,C,e))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new eg(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),B(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ev((...e)=>{let[t,i,n,r,s]=e;if(this.incrementIncomingBytes_(e),this.scriptTagHolder){if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,t===em)this.id=i,this.password=n;else if("close"===t)i?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(i,()=>{this.onClosed_()})):this.onClosed_();else throw Error("Unrecognized command received: "+t)}},(...e)=>{let[t,i]=e;this.incrementIncomingBytes_(e),this.myPacketOrderer.handleResponse(t,i)},()=>{this.onClosed_()},this.urlFn);let e={};e[em]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&b.test(location.hostname)&&(e.r="f");let t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ey.forceAllow_=!0}static forceDisallow(){ey.forceDisallow_=!0}static isAvailable(){return!(0,g.Yr)()&&(!!ey.forceAllow_||!ey.forceDisallow_&&"undefined"!=typeof document&&null!=document.createElement&&!("object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){!this.isClosed_&&(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=(0,g.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let i=K((0,g.h$)(t),1840);for(let e=0;e<i.length;e++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[e]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,g.Yr)())return;this.myDisconnFrame=document.createElement("iframe");let i={};i.dframe="t",i.id=e,i.pw=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=(0,g.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class ev{constructor(e,t,i,n){if(this.onDisconnect=i,this.urlFn=n,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,g.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=P(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=ev.createIFrame_();let i="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(i='<script>document.domain="'+document.domain+'";</script>');let n="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(n),this.myIFrame.doc.close()}catch(e){M("frame writing exception"),e.stack&&M(e.stack),M(e)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||M("No IE domain setting required")}catch(i){let t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(!this.alive||!this.sendNewPolls||!(this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)))return!1;{this.currentSerial++;let e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),i="",n=0;for(;this.pendingSegs.length>0;)if(this.pendingSegs[0].d.length+30+i.length<=1870){let e=this.pendingSegs.shift();i=i+"&seg"+n+"="+e.seg+"&ts"+n+"="+e.ts+"&d"+n+"="+e.d,n++}else break;return t+=i,this.addLongPollTag_(t,this.currentSerial),!0}}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},n=setTimeout(i,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(n),i()})}addTag(e,t){(0,g.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){let e=i.readyState;e&&"loaded"!==e&&"complete"!==e||(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{M("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch(e){}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[ey,ec]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){let t=ec&&ec.isAvailable(),i=t&&!ec.previouslyFailed();if(e.webSocketOnly&&(t||q("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[ec];else{let e=this.transports_=[];for(let t of eb.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);eb.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}eb.globalTransportInitialized_=!1;class ew{constructor(e,t,i,n,r,s,o,a,l,h){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=n,this.authToken_=r,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=L("c:"+this.id+":"),this.transportManager_=new eb(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));let n=e.healthyTimeout||0;n>0&&(this.healthyTimeout_=et(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(n)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){let t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=G("t",e),i=G("d",e);if("c"===t)this.onSecondaryControl_(i);else if("d"===t)this.pendingDataMessages.push(i);else throw Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=G("t",e),i=G("d",e);"c"===t?this.onControl_(i):"d"===t&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){!this.isHealthy_&&(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=G("t",e);if("d"in e){let i=e.d;if("h"===t){let e=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(i):"r"===t?this.onReset_(i):"e"===t?j("Server Error: "+i):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):j("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,i=e.v,n=e.h;this.sessionId=e.s,this.repoInfo_.host=n,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==i&&q("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),et(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):et(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(I.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{put(e,t,i,n){}merge(e,t,i,n){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,g.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let i=[...this.listeners_[e]];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});let n=this.getInitialEvent(e);n&&t.apply(i,n)}off(e,t,i){this.validateEventType_(e);let n=this.listeners_[e]||[];for(let e=0;e<n.length;e++)if(n[e].callback===t&&(!i||i===n[e].context)){n.splice(e,1);return}}validateEventType_(e){(0,g.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS extends eE{constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||(0,g.uI)()||(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new eS}getInitialEvent(e){return(0,g.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class ex{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function eI(){return new ex("")}function ek(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function eT(e){return e.pieces_.length-e.pieceNum_}function eP(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new ex(e.pieces_,t)}function eN(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function eO(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function eR(e){if(e.pieceNum_>=e.pieces_.length)return null;let t=[];for(let i=e.pieceNum_;i<e.pieces_.length-1;i++)t.push(e.pieces_[i]);return new ex(t,0)}function eD(e,t){let i=[];for(let t=e.pieceNum_;t<e.pieces_.length;t++)i.push(e.pieces_[t]);if(t instanceof ex)for(let e=t.pieceNum_;e<t.pieces_.length;e++)i.push(t.pieces_[e]);else{let e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&i.push(e[t])}return new ex(i,0)}function eA(e){return e.pieceNum_>=e.pieces_.length}function eM(e,t){let i=ek(e),n=ek(t);if(null===i)return t;if(i===n)return eM(eP(e),eP(t));throw Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function eL(e,t){let i=eO(e,0),n=eO(t,0);for(let e=0;e<i.length&&e<n.length;e++){let t=V(i[e],n[e]);if(0!==t)return t}return i.length===n.length?0:i.length<n.length?-1:1}function ej(e,t){if(eT(e)!==eT(t))return!1;for(let i=e.pieceNum_,n=t.pieceNum_;i<=e.pieces_.length;i++,n++)if(e.pieces_[i]!==t.pieces_[n])return!1;return!0}function eF(e,t){let i=e.pieceNum_,n=t.pieceNum_;if(eT(e)>eT(t))return!1;for(;i<e.pieces_.length;){if(e.pieces_[i]!==t.pieces_[n])return!1;++i,++n}return!0}class eq{constructor(e,t){this.errorPrefix_=t,this.parts_=eO(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let e=0;e<this.parts_.length;e++)this.byteLength_+=(0,g.ug)(this.parts_[e]);eU(this)}}function eU(e){if(e.byteLength_>768)throw Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+eH(e))}function eH(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eB extends eE{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))},!1)}static getInstance(){return new eB}getInitialEvent(e){return(0,g.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}class eW extends eC{constructor(e,t,i,n,r,s,o,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=i,this.onConnectStatus_=n,this.onServerInfoUpdate_=r,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=eW.nextPersistentConnectionId_++,this.log_=L("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=1e3,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!(0,g.Yr)())throw Error("Auth override specified in options, but not supported on non Node.js platforms");eB.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&eS.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,i){let n=++this.requestNumber_,r={r:n,a:e,b:t};this.log_((0,g.Wl)(r)),(0,g.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),i&&(this.requestCBHash_[n]=i)}get(e){this.initConnection_();let t=new g.BH,i={p:e._path.toString(),q:e._queryObject};this.outstandingGets_.push({action:"g",request:i,onComplete:e=>{let i=e.d;"ok"===e.s?t.resolve(i):t.reject(i)}}),this.outstandingGetCount_++;let n=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(n),t.promise}listen(e,t,i,n){this.initConnection_();let r=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+r),this.listens.has(s)||this.listens.set(s,new Map),(0,g.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,g.hu)(!this.listens.get(s).has(r),"listen() called twice for same path/queryId.");let o={onComplete:n,hashFn:t,query:e,tag:i};this.listens.get(s).set(r,o),this.connected_&&this.sendListen_(o)}sendGet_(e){let t=this.outstandingGets_[e];this.sendRequest("g",t.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(i)})}sendListen_(e){let t=e.query,i=t._path.toString(),n=t._queryIdentifier;this.log_("Listen on "+i+" for "+n);let r={p:i};e.tag&&(r.q=t._queryObject,r.t=e.tag),r.h=e.hashFn(),this.sendRequest("q",r,r=>{let s=r.d,o=r.s;eW.warnOnListenWarnings_(s,t),(this.listens.get(i)&&this.listens.get(i).get(n))===e&&(this.log_("listen response",r),"ok"!==o&&this.removeListen_(i,n),e.onComplete&&e.onComplete(o,s))})}static warnOnListenWarnings_(e,t){if(e&&"object"==typeof e&&(0,g.r3)(e,"w")){let i=(0,g.DV)(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();q(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,g.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let e=this.authToken_,t=(0,g.w9)(e)?"auth":"gauth",i={cred:e};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(t,i,t=>{let i=t.s,n=t.d||"error";this.authToken_===e&&("ok"===i?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,n))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{let t=e.s,i=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,i)})}unlisten(e,t){let i=e._path.toString(),n=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+n),(0,g.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,n)&&this.connected_&&this.sendUnlisten_(i,n,e._queryObject,t)}sendUnlisten_(e,t,i,n){this.log_("Unlisten on "+e+" for "+t);let r={p:e};n&&(r.q=i,r.t=n),this.sendRequest("n",r)}onDisconnectPut(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:i})}onDisconnectMerge(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:i})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,i,n){let r={p:t,d:i};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,e=>{n&&setTimeout(()=>{n(e.s,e.d)},Math.floor(0))})}put(e,t,i,n){this.putInternal("p",e,t,i,n)}merge(e,t,i,n){this.putInternal("m",e,t,i,n)}putInternal(e,t,i,n,r){this.initConnection_();let s={p:t,d:i};void 0!==r&&(s.h=r),this.outstandingPuts_.push({action:e,request:s,onComplete:n}),this.outstandingPutCount_++;let o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){let t=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,n=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,i,i=>{this.log_(t+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),n&&n(i.s,i.d)})}reportStats(e){if(this.connected_){let t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,e=>{if("ok"!==e.s){let t=e.d;this.log_("reportStats","Error sending stats: "+t)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,g.Wl)(e));let t=e.r,i=this.requestCBHash_[t];i&&(delete this.requestCBHash_[t],i(e.b))}else if("error"in e)throw"A server-side error has occurred: "+e.error;else"a"in e&&this.onDataPush_(e.a,e.b)}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):j("Unrecognized action received from server: "+(0,g.Wl)(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,g.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){!e||this.visible_||this.reconnectDelay_!==this.maxReconnectDelay_||(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let e=new Date().getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),n=this.id+":"+eW.nextConnectionId_++,r=this.lastSessionId,s=!1,o=null,a=function(){o?o.close():(s=!0,i())};this.realtime_={close:a,sendRequest:function(e){(0,g.hu)(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(e)}};let l=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[a,h]=await Promise.all([this.authTokenProvider_.getToken(l),this.appCheckTokenProvider_.getToken(l)]);s?M("getToken() completed but was canceled"):(M("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=h&&h.token,o=new ew(n,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,i,e=>{q(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")},r))}catch(e){this.log_("Failed to get token: "+e),s||(this.repoInfo_.nodeAdmin&&q(e),a())}}}interrupt(e){M("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){M("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,g.xb)(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){let t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){let t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let i;i=t?t.map(e=>Y(e)).join("$"):"default";let n=this.removeListen_(e,i);n&&n.onComplete&&n.onComplete("permission_denied")}removeListen_(e,t){let i;let n=new ex(e).toString();if(this.listens.has(n)){let e=this.listens.get(n);i=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else i=void 0;return i}onAuthRevoked_(e,t){M("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){M("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){for(let e of(this.tryAuth(),this.tryAppCheck(),this.listens.values()))for(let t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){let e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){let e={},t="js";(0,g.Yr)()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+el.replace(/\./g,"-")]=1,(0,g.uI)()?e["framework.cordova"]=1:(0,g.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){let e=eS.getInstance().currentlyOnline();return(0,g.xb)(this.interruptReasons_)&&e}}eW.nextPersistentConnectionId_=0,eW.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ez{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new ez(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let i=new ez(W,e),n=new ez(W,t);return 0!==this.compare(i,n)}minPost(){return ez.MIN}}class e$ extends eV{static get __EMPTY_NODE(){return n}static set __EMPTY_NODE(e){n=e}compare(e,t){return V(e.name,t.name)}isDefinedOn(e){throw(0,g.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return ez.MIN}maxPost(){return new ez(z,n)}makePost(e,t){return(0,g.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new ez(e,n)}toString(){return".key"}}let eG=new e$;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eY{constructor(e,t,i,n,r=null){this.isReverse_=n,this.resultGenerator_=r,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,n&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else if(0===s){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}getNext(){let e;if(0===this.nodeStack_.length)return null;let t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class eK{constructor(e,t,i,n,r){this.key=e,this.value=t,this.color=null!=i?i:eK.RED,this.left=null!=n?n:eZ.EMPTY_NODE,this.right=null!=r?r:eZ.EMPTY_NODE}copy(e,t,i,n,r){return new eK(null!=e?e:this.key,null!=t?t:this.value,null!=i?i:this.color,null!=n?n:this.left,null!=r?r:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let n=this,r=i(e,n.key);return(n=r<0?n.copy(null,null,null,n.left.insert(e,t,i),null):0===r?n.copy(null,t,null,null,null):n.copy(null,null,null,null,n.right.insert(e,t,i))).fixUp_()}removeMin_(){if(this.left.isEmpty())return eZ.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}remove(e,t){let i,n;if(i=this,0>t(e,i.key))i.left.isEmpty()||i.left.isRed_()||i.left.left.isRed_()||(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),i.right.isEmpty()||i.right.isRed_()||i.right.left.isRed_()||(i=i.moveRedRight_()),0===t(e,i.key)){if(i.right.isEmpty())return eZ.EMPTY_NODE;n=i.right.min_(),i=i.copy(n.key,n.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}rotateLeft_(){let e=this.copy(null,null,eK.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){let e=this.copy(null,null,eK.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){return Math.pow(2,this.check_())<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw Error("Right child of ("+this.key+","+this.value+") is red");let e=this.left.check_();if(e===this.right.check_())return e+(this.isRed_()?0:1);throw Error("Black depths differ")}}eK.RED=!0,eK.BLACK=!1;class eQ{copy(e,t,i,n,r){return this}insert(e,t,i){return new eK(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class eZ{constructor(e,t=eZ.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new eZ(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,eK.BLACK,null,null))}remove(e){return new eZ(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,eK.BLACK,null,null))}get(e){let t;let i=this.root_;for(;!i.isEmpty();){if(0===(t=this.comparator_(e,i.key)))return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,n=null;for(;!i.isEmpty();){if(0===(t=this.comparator_(e,i.key))){if(i.left.isEmpty()){if(n)return n.key;return null}for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}t<0?i=i.left:t>0&&(n=i,i=i.right)}throw Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new eY(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new eY(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new eY(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new eY(this.root_,null,this.comparator_,!0,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eJ(e,t){return V(e.name,t.name)}function eX(e,t){return V(e,t)}eZ.EMPTY_NODE=new eQ;let e0=function(e){return"number"==typeof e?"number:"+Z(e):"string:"+e},e1=function(e){if(e.isLeafNode()){let t=e.val();(0,g.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,g.r3)(t,".sv"),"Priority must be a string or number.")}else(0,g.hu)(e===r||e.isEmpty(),"priority of unexpected type.");(0,g.hu)(e===r||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};class e2{constructor(e,t=e2.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,(0,g.hu)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),e1(this.priorityNode_)}static set __childrenNodeConstructor(e){s=e}static get __childrenNodeConstructor(){return s}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new e2(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:e2.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return eA(e)?this:".priority"===ek(e)?this.priorityNode_:e2.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:e2.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){let i=ek(e);return null===i?t:t.isEmpty()&&".priority"!==i?this:((0,g.hu)(".priority"!==i||1===eT(e),".priority must be the last token in a path"),this.updateImmediateChild(i,e2.__childrenNodeConstructor.EMPTY_NODE.updateChild(eP(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+e0(this.priorityNode_.val())+":");let t=typeof this.value_;e+=t+":","number"===t?e+=Z(this.value_):e+=this.value_,this.lazyHash_=N(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===e2.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof e2.__childrenNodeConstructor?-1:((0,g.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){let t=typeof e.value_,i=typeof this.value_,n=e2.VALUE_TYPE_ORDER.indexOf(t),r=e2.VALUE_TYPE_ORDER.indexOf(i);return((0,g.hu)(n>=0,"Unknown leaf type: "+t),(0,g.hu)(r>=0,"Unknown leaf type: "+i),n!==r)?r-n:"object"===i?0:this.value_<e.value_?-1:this.value_===e.value_?0:1}withIndex(){return this}isIndexed(){return!0}equals(e){return e===this||!!e.isLeafNode()&&this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}}e2.VALUE_TYPE_ORDER=["object","boolean","number","string"];class e3 extends eV{compare(e,t){let i=e.node.getPriority(),n=t.node.getPriority(),r=i.compareTo(n);return 0===r?V(e.name,t.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return ez.MIN}maxPost(){return new ez(z,new e2("[PRIORITY-POST]",a))}makePost(e,t){return new ez(t,new e2("[PRIORITY-POST]",o(e)))}toString(){return".priority"}}let e4=new e3,e6=Math.log(2);class e8{constructor(e){this.count=parseInt(Math.log(e+1)/e6,10),this.current_=this.count-1;let t=parseInt(Array(this.count+1).join("1"),2);this.bits_=e+1&t}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}}let e5=function(e,t,i,n){e.sort(t);let r=function(t,n){let s;let o=n-t;if(0===o)return null;if(1===o)return s=e[t],new eK(i?i(s):s,s.node,eK.BLACK,null,null);{let a=parseInt(o/2,10)+t,l=r(t,a),h=r(a+1,n);return s=e[a],new eK(i?i(s):s,s.node,eK.BLACK,l,h)}};return new eZ(n||t,function(t){let n=null,s=null,o=e.length,a=function(t,n){let s=o-t,a=o;o-=t;let h=r(s+1,a),c=e[s];l(new eK(i?i(c):c,c.node,n,null,h))},l=function(e){n?n.left=e:s=e,n=e};for(let e=0;e<t.count;++e){let i=t.nextBitIsOne(),n=Math.pow(2,t.count-(e+1));i?a(n,eK.BLACK):(a(n,eK.BLACK),a(n,eK.RED))}return s}(new e8(e.length)))},e9={};class e7{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,g.hu)(e9&&e4,"ChildrenNode.ts has not been loaded"),l=l||new e7({".priority":e9},{".priority":e4})}get(e){let t=(0,g.DV)(this.indexes_,e);if(!t)throw Error("No index defined for "+e);return t instanceof eZ?t:null}hasIndex(e){return(0,g.r3)(this.indexSet_,e.toString())}addIndex(e,t){let i;(0,g.hu)(e!==eG,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let n=[],r=!1,s=t.getIterator(ez.Wrap),o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),n.push(o),o=s.getNext();i=r?e5(n,e.getCompare()):e9;let a=e.toString(),l=Object.assign({},this.indexSet_);l[a]=e;let h=Object.assign({},this.indexes_);return h[a]=i,new e7(h,l)}addToIndexes(e,t){return new e7((0,g.UI)(this.indexes_,(i,n)=>{let r=(0,g.DV)(this.indexSet_,n);if((0,g.hu)(r,"Missing index implementation for "+n),i===e9){if(!r.isDefinedOn(e.node))return e9;{let i=[],n=t.getIterator(ez.Wrap),s=n.getNext();for(;s;)s.name!==e.name&&i.push(s),s=n.getNext();return i.push(e),e5(i,r.getCompare())}}{let n=t.get(e.name),r=i;return n&&(r=r.remove(new ez(e.name,n))),r.insert(e,e.node)}}),this.indexSet_)}removeFromIndexes(e,t){return new e7((0,g.UI)(this.indexes_,i=>{if(i===e9)return i;{let n=t.get(e.name);return n?i.remove(new ez(e.name,n)):i}}),this.indexSet_)}}class te{constructor(e,t,i){this.children_=e,this.priorityNode_=t,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&e1(this.priorityNode_),this.children_.isEmpty()&&(0,g.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return h||(h=new te(new eZ(eX),null,e7.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||h}updatePriority(e){return this.children_.isEmpty()?this:new te(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{let t=this.children_.get(e);return null===t?h:t}}getChild(e){let t=ek(e);return null===t?this:this.getImmediateChild(t).getChild(eP(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if((0,g.hu)(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{let i,n;let r=new ez(e,t);t.isEmpty()?(i=this.children_.remove(e),n=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,t),n=this.indexMap_.addToIndexes(r,this.children_));let s=i.isEmpty()?h:this.priorityNode_;return new te(i,s,n)}}updateChild(e,t){let i=ek(e);if(null===i)return t;{(0,g.hu)(".priority"!==ek(e)||1===eT(e),".priority must be the last token in a path");let n=this.getImmediateChild(i).updateChild(eP(e),t);return this.updateImmediateChild(i,n)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;let t={},i=0,n=0,r=!0;if(this.forEachChild(e4,(s,o)=>{t[s]=o.val(e),i++,r&&te.INTEGER_REGEXP_.test(s)?n=Math.max(n,Number(s)):r=!1}),e||!r||!(n<2*i))return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t;{let e=[];for(let i in t)e[i]=t[i];return e}}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+e0(this.getPriority().val())+":"),this.forEachChild(e4,(t,i)=>{let n=i.hash();""!==n&&(e+=":"+t+":"+n)}),this.lazyHash_=""===e?"":N(e)}return this.lazyHash_}getPredecessorChildName(e,t,i){let n=this.resolveIndex_(i);if(!n)return this.children_.getPredecessorKey(e);{let i=n.getPredecessorKey(new ez(e,t));return i?i.name:null}}getFirstChildName(e){let t=this.resolveIndex_(e);if(!t)return this.children_.minKey();{let e=t.minKey();return e&&e.name}}getFirstChild(e){let t=this.getFirstChildName(e);return t?new ez(t,this.children_.get(t)):null}getLastChildName(e){let t=this.resolveIndex_(e);if(!t)return this.children_.maxKey();{let e=t.maxKey();return e&&e.name}}getLastChild(e){let t=this.getLastChildName(e);return t?new ez(t,this.children_.get(t)):null}forEachChild(e,t){let i=this.resolveIndex_(e);return i?i.inorderTraversal(e=>t(e.name,e.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){let i=this.resolveIndex_(t);if(i)return i.getIteratorFrom(e,e=>e);{let i=this.children_.getIteratorFrom(e.name,ez.Wrap),n=i.peek();for(;null!=n&&0>t.compare(n,e);)i.getNext(),n=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){let i=this.resolveIndex_(t);if(i)return i.getReverseIteratorFrom(e,e=>e);{let i=this.children_.getReverseIteratorFrom(e.name,ez.Wrap),n=i.peek();for(;null!=n&&t.compare(n,e)>0;)i.getNext(),n=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ti?-1:0}withIndex(e){if(e===eG||this.indexMap_.hasIndex(e))return this;{let t=this.indexMap_.addIndex(e,this.children_);return new te(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===eG||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode()||!this.getPriority().equals(e.getPriority())||this.children_.count()!==e.children_.count())return!1;{let t=this.getIterator(e4),i=e.getIterator(e4),n=t.getNext(),r=i.getNext();for(;n&&r;){if(n.name!==r.name||!n.node.equals(r.node))return!1;n=t.getNext(),r=i.getNext()}return null===n&&null===r}}resolveIndex_(e){return e===eG?null:this.indexMap_.get(e.toString())}}te.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class tt extends te{constructor(){super(new eZ(eX),te.EMPTY_NODE,e7.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return te.EMPTY_NODE}isEmpty(){return!1}}let ti=new tt;function tn(e,t=null){if(null===e)return te.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),(0,g.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new e2(e,tn(t));if(e instanceof Array){let i=te.EMPTY_NODE;return Q(e,(t,n)=>{if((0,g.r3)(e,t)&&"."!==t.substring(0,1)){let e=tn(n);(e.isLeafNode()||!e.isEmpty())&&(i=i.updateImmediateChild(t,e))}}),i.updatePriority(tn(t))}{let i=[],n=!1;if(Q(e,(e,t)=>{if("."!==e.substring(0,1)){let r=tn(t);r.isEmpty()||(n=n||!r.getPriority().isEmpty(),i.push(new ez(e,r)))}}),0===i.length)return te.EMPTY_NODE;let r=e5(i,eJ,e=>e.name,eX);if(!n)return new te(r,tn(t),e7.Default);{let e=e5(i,e4.getCompare());return new te(r,tn(t),new e7({".priority":e},{".priority":e4}))}}}Object.defineProperties(ez,{MIN:{value:new ez(W,te.EMPTY_NODE)},MAX:{value:new ez(z,ti)}}),e$.__EMPTY_NODE=te.EMPTY_NODE,e2.__childrenNodeConstructor=te,r=ti,a=ti,o=tn;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends eV{constructor(e){super(),this.indexPath_=e,(0,g.hu)(!eA(e)&&".priority"!==ek(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let i=this.extractChild(e.node),n=this.extractChild(t.node),r=i.compareTo(n);return 0===r?V(e.name,t.name):r}makePost(e,t){let i=tn(e);return new ez(t,te.EMPTY_NODE.updateChild(this.indexPath_,i))}maxPost(){return new ez(z,te.EMPTY_NODE.updateChild(this.indexPath_,ti))}toString(){return eO(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends eV{compare(e,t){let i=e.node.compareTo(t.node);return 0===i?V(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return ez.MIN}maxPost(){return ez.MAX}makePost(e,t){return new ez(t,tn(e))}toString(){return".value"}}let to=new ts;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ta(e){return{type:"value",snapshotNode:e}}function tl(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function th(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function tc(e,t,i){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e){this.index_=e}updateChild(e,t,i,n,r,s){(0,g.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let o=e.getImmediateChild(t);return o.getChild(n).equals(i.getChild(n))&&o.isEmpty()===i.isEmpty()?e:(null!=s&&(i.isEmpty()?e.hasChild(t)?s.trackChildChange(th(t,o)):(0,g.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?s.trackChildChange(tl(t,i)):s.trackChildChange(tc(t,i,o))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return null==i||(e.isLeafNode()||e.forEachChild(e4,(e,n)=>{t.hasChild(e)||i.trackChildChange(th(e,n))}),t.isLeafNode()||t.forEachChild(e4,(t,n)=>{if(e.hasChild(t)){let r=e.getImmediateChild(t);r.equals(n)||i.trackChildChange(tc(t,n,r))}else i.trackChildChange(tl(t,n))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?te.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e){this.indexedFilter_=new tu(e.getIndex()),this.index_=e.getIndex(),this.startPost_=td.getStartPost_(e),this.endPost_=td.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let t=this.startIsInclusive_?0>=this.index_.compare(this.getStartPost(),e):0>this.index_.compare(this.getStartPost(),e),i=this.endIsInclusive_?0>=this.index_.compare(e,this.getEndPost()):0>this.index_.compare(e,this.getEndPost());return t&&i}updateChild(e,t,i,n,r,s){return this.matches(new ez(t,i))||(i=te.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,n,r,s)}updateFullNode(e,t,i){t.isLeafNode()&&(t=te.EMPTY_NODE);let n=t.withIndex(this.index_);n=n.updatePriority(te.EMPTY_NODE);let r=this;return t.forEachChild(e4,(e,t)=>{r.matches(new ez(e,t))||(n=n.updateImmediateChild(e,te.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,n,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(!e.hasStart())return e.getIndex().minPost();{let t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}}static getEndPost_(e){if(!e.hasEnd())return e.getIndex().maxPost();{let t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{let t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{let t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new td(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,n,r,s){return(this.rangedFilter_.matches(new ez(t,i))||(i=te.EMPTY_NODE),e.getImmediateChild(t).equals(i))?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,n,r,s):this.fullLimitUpdateChild_(e,t,i,r,s)}updateFullNode(e,t,i){let n;if(t.isLeafNode()||t.isEmpty())n=te.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;n=te.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let i=0;for(;e.hasNext()&&i<this.limit_;){let t=e.getNext();if(this.withinDirectionalStart(t)){if(this.withinDirectionalEnd(t))n=n.updateImmediateChild(t.name,t.node),i++;else break}}}else{let e;n=(n=t.withIndex(this.index_)).updatePriority(te.EMPTY_NODE),e=this.reverse_?n.getReverseIterator(this.index_):n.getIterator(this.index_);let i=0;for(;e.hasNext();){let t=e.getNext();i<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?i++:n=n.updateImmediateChild(t.name,te.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,n,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,n,r){let s;if(this.reverse_){let e=this.index_.getCompare();s=(t,i)=>e(i,t)}else s=this.index_.getCompare();(0,g.hu)(e.numChildren()===this.limit_,"");let o=new ez(t,i),a=this.reverse_?e.getFirstChild(this.index_):e.getLastChild(this.index_),l=this.rangedFilter_.matches(o);if(e.hasChild(t)){let h=e.getImmediateChild(t),c=n.getChildAfterChild(this.index_,a,this.reverse_);for(;null!=c&&(c.name===t||e.hasChild(c.name));)c=n.getChildAfterChild(this.index_,c,this.reverse_);let u=null==c?1:s(c,o);if(l&&!i.isEmpty()&&u>=0)return null!=r&&r.trackChildChange(tc(t,i,h)),e.updateImmediateChild(t,i);{null!=r&&r.trackChildChange(th(t,h));let i=e.updateImmediateChild(t,te.EMPTY_NODE);return null!=c&&this.rangedFilter_.matches(c)?(null!=r&&r.trackChildChange(tl(c.name,c.node)),i.updateImmediateChild(c.name,c.node)):i}}return i.isEmpty()?e:l&&s(a,o)>=0?(null!=r&&(r.trackChildChange(th(a.name,a.node)),r.trackChildChange(tl(t,i))),e.updateImmediateChild(t,i).updateImmediateChild(a.name,te.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=e4}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,g.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return((0,g.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_)?this.indexStartName_:W}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,g.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return((0,g.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_)?this.indexEndName_:z}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,g.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===e4}copy(){let e=new tf;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function t_(e){let t;let i={};if(e.isDefault())return i;if(e.index_===e4?t="$priority":e.index_===to?t="$value":e.index_===eG?t="$key":((0,g.hu)(e.index_ instanceof tr,"Unrecognized index type!"),t=e.index_.toString()),i.orderBy=(0,g.Wl)(t),e.startSet_){let t=e.startAfterSet_?"startAfter":"startAt";i[t]=(0,g.Wl)(e.indexStartValue_),e.startNameSet_&&(i[t]+=","+(0,g.Wl)(e.indexStartName_))}if(e.endSet_){let t=e.endBeforeSet_?"endBefore":"endAt";i[t]=(0,g.Wl)(e.indexEndValue_),e.endNameSet_&&(i[t]+=","+(0,g.Wl)(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?i.limitToFirst=e.limit_:i.limitToLast=e.limit_),i}function tg(e){let t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let i=e.viewFrom_;""===i&&(i=e.isViewFromLeft()?"l":"r"),t.vf=i}return e.index_!==e4&&(t.i=e.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm extends eC{constructor(e,t,i,n){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=n,this.log_=L("p:rest:"),this.listens_={}}reportStats(e){throw Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,g.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,n){let r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);let s=tm.getListenId_(e,i),o={};this.listens_[s]=o;let a=t_(e._queryParams);this.restRequest_(r+".json",a,(e,t)=>{let a=t;404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(r,a,!1,i),(0,g.DV)(this.listens_,s)===o&&n(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)})}unlisten(e,t){let i=tm.getListenId_(e,t);delete this.listens_[i]}get(e){let t=t_(e._queryParams),i=e._path.toString(),n=new g.BH;return this.restRequest_(i+".json",t,(e,t)=>{let r=t;404===e&&(r=null,e=null),null===e?(this.onDataUpdate_(i,r,!1,null),n.resolve(r)):n.reject(Error(r))}),n.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([n,r])=>{n&&n.accessToken&&(t.auth=n.accessToken),r&&r.token&&(t.ac=r.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,g.xO)(t);this.log_("Sending REST request for "+s);let o=new XMLHttpRequest;o.onreadystatechange=()=>{if(i&&4===o.readyState){this.log_("REST Response for "+s+" received. status:",o.status,"response:",o.responseText);let e=null;if(o.status>=200&&o.status<300){try{e=(0,g.cI)(o.responseText)}catch(e){q("Failed to parse JSON response for "+s+": "+o.responseText)}i(null,e)}else 401!==o.status&&404!==o.status&&q("Got unsuccessful REST response for "+s+" Status: "+o.status),i(o.status);i=null}},o.open("GET",s,!0),o.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(){this.rootNode_=te.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(){return{value:null,children:new Map}}function tb(e,t,i){if(eA(t))e.value=i,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,i);else{let n=ek(t);e.children.has(n)||e.children.set(n,tv()),tb(e.children.get(n),t=eP(t),i)}}function tw(e,t,i){null!==e.value?i(t,e.value):function(e,t){e.children.forEach((e,i)=>{t(i,e)})}(e,(e,n)=>{tw(n,new ex(t.toString()+"/"+e),i)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Q(this.last_,(e,i)=>{t[e]=t[e]-i}),this.last_=e,t}}class tE{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new tC(e),et(this.reportStats_.bind(this),Math.floor(1e4+2e4*Math.random()))}reportStats_(){let e=this.statsListener_.get(),t={},i=!1;Q(e,(e,n)=>{n>0&&(0,g.r3)(this.statsToReport_,e)&&(t[e]=n,i=!0)}),i&&this.server_.reportStats(t),et(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}function tS(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function tx(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function tI(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(f||(f={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=f.ACK_USER_WRITE,this.source=tS()}operationForChild(e){if(!eA(this.path))return(0,g.hu)(ek(this.path)===e,"operationForChild called for unrelated child."),new tk(eP(this.path),this.affectedTree,this.revert);if(null!=this.affectedTree.value)return(0,g.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new ex(e));return new tk(eI(),t,this.revert)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e,t){this.source=e,this.path=t,this.type=f.LISTEN_COMPLETE}operationForChild(e){return eA(this.path)?new tT(this.source,eI()):new tT(this.source,eP(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=f.OVERWRITE}operationForChild(e){return eA(this.path)?new tP(this.source,eI(),this.snap.getImmediateChild(e)):new tP(this.source,eP(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=f.MERGE}operationForChild(e){if(!eA(this.path))return(0,g.hu)(ek(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new tN(this.source,eP(this.path),this.children);{let t=this.children.subtree(new ex(e));return t.isEmpty()?null:t.value?new tP(this.source,eI(),t.value):new tN(this.source,eI(),t)}}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(eA(e))return this.isFullyInitialized()&&!this.filtered_;let t=ek(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function tD(e,t,i,n,r,s){let o=n.filter(e=>e.type===i);o.sort((t,i)=>(function(e,t,i){if(null==t.childName||null==i.childName)throw(0,g.g5)("Should only compare child_ events.");let n=new ez(t.childName,t.snapshotNode),r=new ez(i.childName,i.snapshotNode);return e.index_.compare(n,r)})(e,t,i)),o.forEach(i=>{let n=("value"===i.type||"child_removed"===i.type||(i.prevName=s.getPredecessorChildName(i.childName,i.snapshotNode,e.index_)),i);r.forEach(r=>{r.respondsTo(i.type)&&t.push(r.createEvent(n,e.query_))})})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(e,t){return{eventCache:e,serverCache:t}}function tM(e,t,i,n){return tA(new tO(t,i,n),e.serverCache)}function tL(e,t,i,n){return tA(e.eventCache,new tO(t,i,n))}function tj(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function tF(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let tq=()=>(c||(c=new eZ($)),c);class tU{constructor(e,t=tq()){this.value=e,this.children=t}static fromObject(e){let t=new tU(null);return Q(e,(e,i)=>{t=t.set(new ex(e),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:eI(),value:this.value};if(eA(e))return null;{let i=ek(e),n=this.children.get(i);if(null===n)return null;{let r=n.findRootMostMatchingPathAndValue(eP(e),t);return null!=r?{path:eD(new ex(i),r.path),value:r.value}:null}}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(eA(e))return this;{let t=ek(e),i=this.children.get(t);return null!==i?i.subtree(eP(e)):new tU(null)}}set(e,t){if(eA(e))return new tU(t,this.children);{let i=ek(e),n=(this.children.get(i)||new tU(null)).set(eP(e),t),r=this.children.insert(i,n);return new tU(this.value,r)}}remove(e){if(eA(e))return this.children.isEmpty()?new tU(null):new tU(null,this.children);{let t=ek(e),i=this.children.get(t);if(!i)return this;{let n;let r=i.remove(eP(e));return(n=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&n.isEmpty())?new tU(null):new tU(this.value,n)}}}get(e){if(eA(e))return this.value;{let t=ek(e),i=this.children.get(t);return i?i.get(eP(e)):null}}setTree(e,t){if(eA(e))return t;{let i;let n=ek(e),r=(this.children.get(n)||new tU(null)).setTree(eP(e),t);return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new tU(this.value,i)}}fold(e){return this.fold_(eI(),e)}fold_(e,t){let i={};return this.children.inorderTraversal((n,r)=>{i[n]=r.fold_(eD(e,n),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,eI(),t)}findOnPath_(e,t,i){let n=!!this.value&&i(t,this.value);if(n)return n;if(eA(e))return null;{let n=ek(e),r=this.children.get(n);return r?r.findOnPath_(eP(e),eD(t,n),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,eI(),t)}foreachOnPath_(e,t,i){if(eA(e))return this;{this.value&&i(t,this.value);let n=ek(e),r=this.children.get(n);return r?r.foreachOnPath_(eP(e),eD(t,n),i):new tU(null)}}foreach(e){this.foreach_(eI(),e)}foreach_(e,t){this.children.inorderTraversal((i,n)=>{n.foreach_(eD(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tH{constructor(e){this.writeTree_=e}static empty(){return new tH(new tU(null))}}function tB(e,t,i){if(eA(t))return new tH(new tU(i));{let n=e.writeTree_.findRootMostValueAndPath(t);if(null!=n){let r=n.path,s=n.value,o=eM(r,t);return s=s.updateChild(o,i),new tH(e.writeTree_.set(r,s))}{let n=new tU(i);return new tH(e.writeTree_.setTree(t,n))}}}function tW(e,t,i){let n=e;return Q(i,(e,i)=>{n=tB(n,eD(t,e),i)}),n}function tz(e,t){return eA(t)?tH.empty():new tH(e.writeTree_.setTree(t,new tU(null)))}function tV(e,t){return null!=t$(e,t)}function t$(e,t){let i=e.writeTree_.findRootMostValueAndPath(t);return null!=i?e.writeTree_.get(i.path).getChild(eM(i.path,t)):null}function tG(e){let t=[],i=e.writeTree_.value;return null!=i?i.isLeafNode()||i.forEachChild(e4,(e,i)=>{t.push(new ez(e,i))}):e.writeTree_.children.inorderTraversal((e,i)=>{null!=i.value&&t.push(new ez(e,i.value))}),t}function tY(e,t){if(eA(t))return e;{let i=t$(e,t);return new tH(null!=i?new tU(i):e.writeTree_.subtree(t))}}function tK(e){return e.writeTree_.isEmpty()}function tQ(e,t){return function e(t,i,n){if(null!=i.value)return n.updateChild(t,i.value);{let r=null;return i.children.inorderTraversal((i,s)=>{".priority"===i?((0,g.hu)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):n=e(eD(t,i),s,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(eD(t,".priority"),r)),n}}(eI(),e.writeTree_,t)}function tZ(e){return e.visible}function tJ(e,t,i){let n=tH.empty();for(let r=0;r<e.length;++r){let s=e[r];if(t(s)){let e;let t=s.path;if(s.snap)eF(i,t)?n=tB(n,e=eM(i,t),s.snap):eF(t,i)&&(e=eM(t,i),n=tB(n,eI(),s.snap.getChild(e)));else if(s.children){if(eF(i,t))n=tW(n,e=eM(i,t),s.children);else if(eF(t,i)){if(eA(e=eM(t,i)))n=tW(n,eI(),s.children);else{let t=(0,g.DV)(s.children,ek(e));if(t){let i=t.getChild(eP(e));n=tB(n,eI(),i)}}}}else throw(0,g.g5)("WriteRecord should have .snap or .children")}}return n}function tX(e,t,i,n,r){if(n||r){let s=tY(e.visibleWrites,t);return!r&&tK(s)?i:r||null!=i||tV(s,eI())?tQ(tJ(e.allWrites,function(e){return(e.visible||r)&&(!n||!~n.indexOf(e.writeId))&&(eF(e.path,t)||eF(t,e.path))},t),i||te.EMPTY_NODE):null}{let n=t$(e.visibleWrites,t);if(null!=n)return n;{let n=tY(e.visibleWrites,t);return tK(n)?i:null!=i||tV(n,eI())?tQ(n,i||te.EMPTY_NODE):null}}}function t0(e,t,i,n){return tX(e.writeTree,e.treePath,t,i,n)}function t1(e,t){return function(e,t,i){let n=te.EMPTY_NODE,r=t$(e.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(e4,(e,t)=>{n=n.updateImmediateChild(e,t)}),n;if(!i)return tG(tY(e.visibleWrites,t)).forEach(e=>{n=n.updateImmediateChild(e.name,e.node)}),n;{let r=tY(e.visibleWrites,t);return i.forEachChild(e4,(e,t)=>{let i=tQ(tY(r,new ex(e)),t);n=n.updateImmediateChild(e,i)}),tG(r).forEach(e=>{n=n.updateImmediateChild(e.name,e.node)}),n}}(e.writeTree,e.treePath,t)}function t2(e,t,i,n){return function(e,t,i,n,r){(0,g.hu)(n||r,"Either existingEventSnap or existingServerSnap must exist");let s=eD(t,i);if(tV(e.visibleWrites,s))return null;{let t=tY(e.visibleWrites,s);return tK(t)?r.getChild(i):tQ(t,r.getChild(i))}}(e.writeTree,e.treePath,t,i,n)}function t3(e,t){var i,n;return i=e.writeTree,n=eD(e.treePath,t),t$(i.visibleWrites,n)}function t4(e,t,i){return function(e,t,i,n){let r=eD(t,i),s=t$(e.visibleWrites,r);return null!=s?s:n.isCompleteForChild(i)?tQ(tY(e.visibleWrites,r),n.getNode().getImmediateChild(i)):null}(e.writeTree,e.treePath,t,i)}function t6(e,t){return t8(eD(e.treePath,t),e.writeTree)}function t8(e,t){return{treePath:e,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,i=e.childName;(0,g.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,g.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");let n=this.changeMap.get(i);if(n){let r=n.type;if("child_added"===t&&"child_removed"===r)this.changeMap.set(i,tc(i,e.snapshotNode,n.snapshotNode));else if("child_removed"===t&&"child_added"===r)this.changeMap.delete(i);else if("child_removed"===t&&"child_changed"===r)this.changeMap.set(i,th(i,n.oldSnap));else if("child_changed"===t&&"child_added"===r)this.changeMap.set(i,tl(i,e.snapshotNode));else if("child_changed"===t&&"child_changed"===r)this.changeMap.set(i,tc(i,e.snapshotNode,n.oldSnap));else throw(0,g.g5)("Illegal combination of changes: "+e+" occurred after "+n)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t9{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}}let t7=new t9;class ie{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let t=null!=this.optCompleteServerCache_?new tO(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return t4(this.writes_,e,t)}}getChildAfterChild(e,t,i){var n;let r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:tF(this.viewCache_),s=function(e,t,i,n,r,s,o){let a;let l=tY(e.visibleWrites,t),h=t$(l,eI());if(null!=h)a=h;else{if(null==i)return[];a=tQ(l,i)}if((a=a.withIndex(o)).isEmpty()||a.isLeafNode())return[];{let e=[],t=o.getCompare(),i=s?a.getReverseIteratorFrom(n,o):a.getIteratorFrom(n,o),r=i.getNext();for(;r&&e.length<1;)0!==t(r,n)&&e.push(r),r=i.getNext();return e}}((n=this.writes_).writeTree,n.treePath,r,t,0,i,e);return 0===s.length?null:s[0]}}function it(e,t,i,n,r,s){let o=t.eventCache;if(null!=t3(n,i))return t;{let a,l;if(eA(i)){if((0,g.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let i=tF(t),r=t1(n,i instanceof te?i:te.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),r,s)}else{let i=t0(n,tF(t));a=e.filter.updateFullNode(t.eventCache.getNode(),i,s)}}else{let h=ek(i);if(".priority"===h){(0,g.hu)(1===eT(i),"Can't have a priority with additional path components");let r=o.getNode(),s=t2(n,i,r,l=t.serverCache.getNode());a=null!=s?e.filter.updatePriority(r,s):o.getNode()}else{let c;let u=eP(i);if(o.isCompleteForChild(h)){l=t.serverCache.getNode();let e=t2(n,i,o.getNode(),l);c=null!=e?o.getNode().getImmediateChild(h).updateChild(u,e):o.getNode().getImmediateChild(h)}else c=t4(n,h,t.serverCache);a=null!=c?e.filter.updateChild(o.getNode(),h,c,u,r,s):o.getNode()}}return tM(t,a,o.isFullyInitialized()||eA(i),e.filter.filtersNodes())}}function ii(e,t,i,n,r,s,o,a){let l;let h=t.serverCache,c=o?e.filter:e.filter.getIndexedFilter();if(eA(i))l=c.updateFullNode(h.getNode(),n,null);else if(c.filtersNodes()&&!h.isFiltered()){let e=h.getNode().updateChild(i,n);l=c.updateFullNode(h.getNode(),e,null)}else{let e=ek(i);if(!h.isCompleteForPath(i)&&eT(i)>1)return t;let r=eP(i),s=h.getNode().getImmediateChild(e).updateChild(r,n);l=".priority"===e?c.updatePriority(h.getNode(),s):c.updateChild(h.getNode(),e,s,r,t7,null)}let u=tL(t,l,h.isFullyInitialized()||eA(i),c.filtersNodes()),d=new ie(r,u,s);return it(e,u,i,r,d,a)}function ir(e,t,i,n,r,s,o){let a,l;let h=t.eventCache,c=new ie(r,t,s);if(eA(i))l=e.filter.updateFullNode(t.eventCache.getNode(),n,o),a=tM(t,l,!0,e.filter.filtersNodes());else{let r=ek(i);if(".priority"===r)l=e.filter.updatePriority(t.eventCache.getNode(),n),a=tM(t,l,h.isFullyInitialized(),h.isFiltered());else{let s;let l=eP(i),u=h.getNode().getImmediateChild(r);if(eA(l))s=n;else{let e=c.getCompleteChild(r);s=null!=e?".priority"===eN(l)&&e.getChild(eR(l)).isEmpty()?e:e.updateChild(l,n):te.EMPTY_NODE}a=u.equals(s)?t:tM(t,e.filter.updateChild(h.getNode(),r,s,l,c,o),h.isFullyInitialized(),e.filter.filtersNodes())}}return a}function is(e,t){return e.eventCache.isCompleteForChild(t)}function io(e,t,i){return i.foreach((e,i)=>{t=t.updateChild(e,i)}),t}function ia(e,t,i,n,r,s,o,a){let l;if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let h=t;l=eA(i)?n:new tU(null).setTree(i,n);let c=t.serverCache.getNode();return l.children.inorderTraversal((i,n)=>{if(c.hasChild(i)){let l=io(e,t.serverCache.getNode().getImmediateChild(i),n);h=ii(e,h,new ex(i),l,r,s,o,a)}}),l.children.inorderTraversal((i,n)=>{let l=!t.serverCache.isCompleteForChild(i)&&null===n.value;if(!c.hasChild(i)&&!l){let l=io(e,t.serverCache.getNode().getImmediateChild(i),n);h=ii(e,h,new ex(i),l,r,s,o,a)}}),h}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,t){this.query_=e,this.eventRegistrations_=[];let i=this.query_._queryParams,n=new tu(i.getIndex()),r=function(e){return e.loadsAllData()?new tu(e.getIndex()):e.hasLimit()?new tp(e):new td(e)}(i);this.processor_={filter:r};let s=t.serverCache,o=t.eventCache,a=n.updateFullNode(te.EMPTY_NODE,s.getNode(),null),l=r.updateFullNode(te.EMPTY_NODE,o.getNode(),null),h=new tO(a,s.isFullyInitialized(),n.filtersNodes()),c=new tO(l,o.isFullyInitialized(),r.filtersNodes());this.viewCache_=tA(c,h),this.eventGenerator_=new tR(this.query_)}get query(){return this.query_}}function ih(e){return 0===e.eventRegistrations_.length}function ic(e,t,i){let n=[];if(i){(0,g.hu)(null==t,"A cancel should cancel all event registrations.");let r=e.query._path;e.eventRegistrations_.forEach(e=>{let t=e.createCancelEvent(i,r);t&&n.push(t)})}if(t){let i=[];for(let n=0;n<e.eventRegistrations_.length;++n){let r=e.eventRegistrations_[n];if(r.matches(t)){if(t.hasAnyCallback()){i=i.concat(e.eventRegistrations_.slice(n+1));break}}else i.push(r)}e.eventRegistrations_=i}else e.eventRegistrations_=[];return n}function iu(e,t,i,n){var r,s;t.type===f.MERGE&&null!==t.source.queryId&&((0,g.hu)(tF(e.viewCache_),"We should always have a full cache before handling merges"),(0,g.hu)(tj(e.viewCache_),"Missing event cache, even though we have a server cache"));let o=e.viewCache_,a=function(e,t,i,n,r){let s,o;let a=new t5;if(i.type===f.OVERWRITE)i.source.fromUser?s=ir(e,t,i.path,i.snap,n,r,a):((0,g.hu)(i.source.fromServer,"Unknown source."),o=i.source.tagged||t.serverCache.isFiltered()&&!eA(i.path),s=ii(e,t,i.path,i.snap,n,r,o,a));else if(i.type===f.MERGE){var l,h;let c;i.source.fromUser?(l=i.path,h=i.children,c=t,h.foreach((i,s)=>{let o=eD(l,i);is(t,ek(o))&&(c=ir(e,c,o,s,n,r,a))}),h.foreach((i,s)=>{let o=eD(l,i);is(t,ek(o))||(c=ir(e,c,o,s,n,r,a))}),s=c):((0,g.hu)(i.source.fromServer,"Unknown source."),o=i.source.tagged||t.serverCache.isFiltered(),s=ia(e,t,i.path,i.children,n,r,o,a))}else if(i.type===f.ACK_USER_WRITE)s=i.revert?function(e,t,i,n,r,s){let o;if(null!=t3(n,i))return t;{let a;let l=new ie(n,t,r),h=t.eventCache.getNode();if(eA(i)||".priority"===ek(i)){let i;if(t.serverCache.isFullyInitialized())i=t0(n,tF(t));else{let e=t.serverCache.getNode();(0,g.hu)(e instanceof te,"serverChildren would be complete if leaf node"),i=t1(n,e)}a=e.filter.updateFullNode(h,i,s)}else{let r=ek(i),c=t4(n,r,t.serverCache);null==c&&t.serverCache.isCompleteForChild(r)&&(c=h.getImmediateChild(r)),(a=null!=c?e.filter.updateChild(h,r,c,eP(i),l,s):t.eventCache.getNode().hasChild(r)?e.filter.updateChild(h,r,te.EMPTY_NODE,eP(i),l,s):h).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=t0(n,tF(t))).isLeafNode()&&(a=e.filter.updateFullNode(a,o,s))}return o=t.serverCache.isFullyInitialized()||null!=t3(n,eI()),tM(t,a,o,e.filter.filtersNodes())}}(e,t,i.path,n,r,a):function(e,t,i,n,r,s,o){if(null!=t3(r,i))return t;let a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=n.value){if(eA(i)&&l.isFullyInitialized()||l.isCompleteForPath(i))return ii(e,t,i,l.getNode().getChild(i),r,s,a,o);if(!eA(i))return t;{let n=new tU(null);return l.getNode().forEachChild(eG,(e,t)=>{n=n.set(new ex(e),t)}),ia(e,t,i,n,r,s,a,o)}}{let h=new tU(null);return n.foreach((e,t)=>{let n=eD(i,e);l.isCompleteForPath(n)&&(h=h.set(e,l.getNode().getChild(n)))}),ia(e,t,i,h,r,s,a,o)}}(e,t,i.path,i.affectedTree,n,r,a);else if(i.type===f.LISTEN_COMPLETE)s=function(e,t,i,n,r){let s=t.serverCache;return it(e,tL(t,s.getNode(),s.isFullyInitialized()||eA(i),s.isFiltered()),i,n,t7,r)}(e,t,i.path,n,a);else throw(0,g.g5)("Unknown operation type: "+i.type);let c=a.getChanges();return function(e,t,i){let n=t.eventCache;if(n.isFullyInitialized()){let r=n.getNode().isLeafNode()||n.getNode().isEmpty(),s=tj(e);!(i.length>0)&&e.eventCache.isFullyInitialized()&&(!r||n.getNode().equals(s))&&n.getNode().getPriority().equals(s.getPriority())||i.push(ta(tj(t)))}}(t,s,c),{viewCache:s,changes:c}}(e.processor_,o,t,i,n);return r=e.processor_,s=a.viewCache,(0,g.hu)(s.eventCache.getNode().isIndexed(r.filter.getIndex()),"Event snap not indexed"),(0,g.hu)(s.serverCache.getNode().isIndexed(r.filter.getIndex()),"Server snap not indexed"),(0,g.hu)(a.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=a.viewCache,id(e,a.changes,a.viewCache.eventCache.getNode(),null)}function id(e,t,i,n){let r=n?[n]:e.eventRegistrations_;return function(e,t,i,n){let r=[],s=[];return t.forEach(t=>{if("child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)){var i;s.push((i=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:i}))}}),tD(e,r,"child_removed",t,n,i),tD(e,r,"child_added",t,n,i),tD(e,r,"child_moved",s,n,i),tD(e,r,"child_changed",t,n,i),tD(e,r,"value",t,n,i),r}(e.eventGenerator_,t,i,r)}class ip{constructor(){this.views=new Map}}function i_(e,t,i,n){let r=t.source.queryId;if(null!==r){let s=e.views.get(r);return(0,g.hu)(null!=s,"SyncTree gave us an op for an invalid query."),iu(s,t,i,n)}{let r=[];for(let s of e.views.values())r=r.concat(iu(s,t,i,n));return r}}function ig(e){let t=[];for(let i of e.views.values())i.query._queryParams.loadsAllData()||t.push(i);return t}function im(e,t){let i=null;for(let n of e.views.values())i=i||function(e,t){let i=tF(e.viewCache_);return i&&(e.query._queryParams.loadsAllData()||!eA(t)&&!i.getImmediateChild(ek(t)).isEmpty())?i.getChild(t):null}(n,t);return i}function iy(e,t){if(t._queryParams.loadsAllData())return ib(e);{let i=t._queryIdentifier;return e.views.get(i)}}function iv(e){return null!=ib(e)}function ib(e){for(let t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let iw=1;class iC{constructor(e){this.listenProvider_=e,this.syncPointTree_=new tU(null),this.pendingWriteTree_={visibleWrites:tH.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function iE(e,t,i,n,r){var s,o;return(s=e.pendingWriteTree_,o=r,(0,g.hu)(n>s.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),s.allWrites.push({path:t,snap:i,writeId:n,visible:o}),o&&(s.visibleWrites=tB(s.visibleWrites,t,i)),s.lastWriteId=n,r)?iP(e,new tP(tS(),t,i)):[]}function iS(e,t,i=!1){let n=function(e,t){for(let i=0;i<e.allWrites.length;i++){let n=e.allWrites[i];if(n.writeId===t)return n}return null}(e.pendingWriteTree_,t);if(!function(e,t){let i=e.allWrites.findIndex(e=>e.writeId===t);(0,g.hu)(i>=0,"removeWrite called with nonexistent writeId.");let n=e.allWrites[i];e.allWrites.splice(i,1);let r=n.visible,s=!1,o=e.allWrites.length-1;for(;r&&o>=0;){let t=e.allWrites[o];t.visible&&(o>=i&&function(e,t){if(e.snap)return eF(e.path,t);for(let i in e.children)if(e.children.hasOwnProperty(i)&&eF(eD(e.path,i),t))return!0;return!1}(t,n.path)?r=!1:eF(n.path,t.path)&&(s=!0)),o--}return!!r&&(s?(e.visibleWrites=tJ(e.allWrites,tZ,eI()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1):n.snap?e.visibleWrites=tz(e.visibleWrites,n.path):Q(n.children,t=>{e.visibleWrites=tz(e.visibleWrites,eD(n.path,t))}),!0)}(e.pendingWriteTree_,t))return[];{let t=new tU(null);return null!=n.snap?t=t.set(eI(),!0):Q(n.children,e=>{t=t.set(new ex(e),!0)}),iP(e,new tk(n.path,t,i))}}function ix(e,t,i){return iP(e,new tP(tx(),t,i))}function iI(e,t,i,n,r=!1){let s=t._path,o=e.syncPointTree_.get(s),a=[];if(o&&("default"===t._queryIdentifier||null!=iy(o,t))){let l=function(e,t,i,n){let r=t._queryIdentifier,s=[],o=[],a=iv(e);if("default"===r)for(let[t,r]of e.views.entries())o=o.concat(ic(r,i,n)),ih(r)&&(e.views.delete(t),r.query._queryParams.loadsAllData()||s.push(r.query));else{let t=e.views.get(r);t&&(o=o.concat(ic(t,i,n)),ih(t)&&(e.views.delete(r),t.query._queryParams.loadsAllData()||s.push(t.query)))}return a&&!iv(e)&&s.push(new((0,g.hu)(u,"Reference.ts has not been loaded"),u)(t._repo,t._path)),{removed:s,events:o}}(o,t,i,n);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));let h=l.removed;if(a=l.events,!r){let i=-1!==h.findIndex(e=>e._queryParams.loadsAllData()),r=e.syncPointTree_.findOnPath(s,(e,t)=>iv(t));if(i&&!r){let t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){let i=t.fold((e,t,i)=>{if(t&&iv(t))return[ib(t)];{let e=[];return t&&(e=ig(t)),Q(i,(t,i)=>{e=e.concat(i)}),e}});for(let t=0;t<i.length;++t){let n=i[t],r=n.query,s=iN(e,n);e.listenProvider_.startListening(iL(r),iO(e,r),s.hashFn,s.onComplete)}}}r||!(h.length>0)||n||(i?e.listenProvider_.stopListening(iL(t),null):h.forEach(t=>{let i=e.queryToTagMap.get(iR(t));e.listenProvider_.stopListening(iL(t),i)}))}(function(e,t){for(let i=0;i<t.length;++i){let n=t[i];if(!n._queryParams.loadsAllData()){let t=iR(n),i=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(i)}}})(e,h)}return a}function ik(e,t,i,n=!1){let r;let s=t._path,o=null,a=!1;e.syncPointTree_.foreachOnPath(s,(e,t)=>{let i=eM(e,s);o=o||im(t,i),a=a||iv(t)});let l=e.syncPointTree_.get(s);l?(a=a||iv(l),o=o||im(l,eI())):(l=new ip,e.syncPointTree_=e.syncPointTree_.set(s,l)),null!=o?r=!0:(r=!1,o=te.EMPTY_NODE,e.syncPointTree_.subtree(s).foreachChild((e,t)=>{let i=im(t,eI());i&&(o=o.updateImmediateChild(e,i))}));let h=null!=iy(l,t);if(!h&&!t._queryParams.loadsAllData()){let i=iR(t);(0,g.hu)(!e.queryToTagMap.has(i),"View does not exist, but we have a tag");let n=iw++;e.queryToTagMap.set(i,n),e.tagToQueryMap.set(n,i)}let c=function(e,t,i,n,r,s){let o=function(e,t,i,n,r){let s=t._queryIdentifier,o=e.views.get(s);if(!o){let e=t0(i,r?n:null),s=!1;return e?s=!0:(e=n instanceof te?t1(i,n):te.EMPTY_NODE,s=!1),new il(t,tA(new tO(e,s,!1),new tO(n,r,!1)))}return o}(e,t,n,r,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,i),function(e,t){let i=e.viewCache_.eventCache,n=[];return i.getNode().isLeafNode()||i.getNode().forEachChild(e4,(e,t)=>{n.push(tl(e,t))}),i.isFullyInitialized()&&n.push(ta(i.getNode())),id(e,n,i.getNode(),t)}(o,i)}(l,t,i,t8(s,e.pendingWriteTree_),o,r);if(!h&&!a&&!n){let i=iy(l,t);c=c.concat(function(e,t,i){let n=t._path,r=iO(e,t),s=iN(e,i),o=e.listenProvider_.startListening(iL(t),r,s.hashFn,s.onComplete),a=e.syncPointTree_.subtree(n);if(r)(0,g.hu)(!iv(a.value),"If we're adding a query, it shouldn't be shadowed");else{let t=a.fold((e,t,i)=>{if(!eA(e)&&t&&iv(t))return[ib(t).query];{let e=[];return t&&(e=e.concat(ig(t).map(e=>e.query))),Q(i,(t,i)=>{e=e.concat(i)}),e}});for(let i=0;i<t.length;++i){let n=t[i];e.listenProvider_.stopListening(iL(n),iO(e,n))}}return o}(e,t,i))}return c}function iT(e,t,i){let n=e.pendingWriteTree_,r=e.syncPointTree_.findOnPath(t,(e,i)=>{let n=im(i,eM(e,t));if(n)return n});return tX(n,t,r,i,!0)}function iP(e,t){var i;return function e(t,i,n,r){if(eA(t.path))return function e(t,i,n,r){let s=i.get(eI());null==n&&null!=s&&(n=im(s,eI()));let o=[];return i.children.inorderTraversal((i,s)=>{let a=n?n.getImmediateChild(i):null,l=t6(r,i),h=t.operationForChild(i);h&&(o=o.concat(e(h,s,a,l)))}),s&&(o=o.concat(i_(s,t,r,n))),o}(t,i,n,r);{let s=i.get(eI());null==n&&null!=s&&(n=im(s,eI()));let o=[],a=ek(t.path),l=t.operationForChild(a),h=i.children.get(a);if(h&&l){let t=n?n.getImmediateChild(a):null,i=t6(r,a);o=o.concat(e(l,h,t,i))}return s&&(o=o.concat(i_(s,t,r,n))),o}}(t,e.syncPointTree_,null,(i=e.pendingWriteTree_,t8(eI(),i)))}function iN(e,t){let i=t.query,n=iO(e,i);return{hashFn:()=>(t.viewCache_.serverCache.getNode()||te.EMPTY_NODE).hash(),onComplete:t=>{if("ok"===t){var r;return n?function(e,t,i){let n=iD(e,i);if(!n)return[];{let i=iA(n),r=i.path,s=i.queryId,o=eM(r,t);return iM(e,r,new tT(tI(s),o))}}(e,i._path,n):(r=i._path,iP(e,new tT(tx(),r)))}{let n=function(e,t){let i="Unknown Error";"too_big"===e?i="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?i="Client doesn't have permission to access the desired data.":"unavailable"===e&&(i="The service is unavailable");let n=Error(e+" at "+t._path.toString()+": "+i);return n.code=e.toUpperCase(),n}(t,i);return iI(e,i,null,n)}}}}function iO(e,t){let i=iR(t);return e.queryToTagMap.get(i)}function iR(e){return e._path.toString()+"$"+e._queryIdentifier}function iD(e,t){return e.tagToQueryMap.get(t)}function iA(e){let t=e.indexOf("$");return(0,g.hu)(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new ex(e.substr(0,t))}}function iM(e,t,i){let n=e.syncPointTree_.get(t);return(0,g.hu)(n,"Missing sync point for query tag that we're tracking"),i_(n,i,t8(t,e.pendingWriteTree_),null)}function iL(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new((0,g.hu)(d,"Reference.ts has not been loaded"),d)(e._repo,e._path):e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e){this.node_=e}getImmediateChild(e){return new ij(this.node_.getImmediateChild(e))}node(){return this.node_}}class iF{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=eD(this.path_,e);return new iF(this.syncTree_,t)}node(){return iT(this.syncTree_,this.path_)}}let iq=function(e,t,i){return e&&"object"==typeof e?((0,g.hu)(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"])?iU(e[".sv"],t,i):"object"==typeof e[".sv"]?iH(e[".sv"],t):void(0,g.hu)(!1,"Unexpected server value: "+JSON.stringify(e,null,2)):e},iU=function(e,t,i){if("timestamp"===e)return i.timestamp;(0,g.hu)(!1,"Unexpected server value: "+e)},iH=function(e,t,i){e.hasOwnProperty("increment")||(0,g.hu)(!1,"Unexpected server value: "+JSON.stringify(e,null,2));let n=e.increment;"number"!=typeof n&&(0,g.hu)(!1,"Unexpected increment value: "+n);let r=t.node();if((0,g.hu)(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return n;let s=r.getValue();return"number"!=typeof s?n:s+n},iB=function(e,t,i){return iW(e,new ij(t),i)};function iW(e,t,i){let n;let r=iq(e.getPriority().val(),t.getImmediateChild(".priority"),i);if(!e.isLeafNode())return n=e,r!==e.getPriority().val()&&(n=n.updatePriority(new e2(r))),e.forEachChild(e4,(e,r)=>{let s=iW(r,t.getImmediateChild(e),i);s!==r&&(n=n.updateImmediateChild(e,s))}),n;{let n=iq(e.getValue(),t,i);return n!==e.getValue()||r!==e.getPriority().val()?new e2(n,tn(r)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iz{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function iV(e,t){let i=t instanceof ex?t:new ex(t),n=e,r=ek(i);for(;null!==r;){let e=(0,g.DV)(n.node.children,r)||{children:{},childCount:0};n=new iz(r,n,e),r=ek(i=eP(i))}return n}function i$(e){return e.node.value}function iG(e,t){e.node.value=t,function e(t){null!==t.parent&&function(t,i,n){let r=void 0===i$(n)&&!iY(n),s=(0,g.r3)(t.node.children,i);r&&s?(delete t.node.children[i],t.node.childCount--,e(t)):r||s||(t.node.children[i]=n.node,t.node.childCount++,e(t))}(t.parent,t.name,t)}(e)}function iY(e){return e.node.childCount>0}function iK(e,t){Q(e.node.children,(i,n)=>{t(new iz(i,e,n))})}function iQ(e){return new ex(null===e.parent?e.name:iQ(e.parent)+"/"+e.name)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iZ=/[\[\].#$\/\u0000-\u001F\u007F]/,iJ=/[\[\].#$\u0000-\u001F\u007F]/,iX=function(e){return"string"==typeof e&&0!==e.length&&!iZ.test(e)},i0=function(e){return"string"==typeof e&&0!==e.length&&!iJ.test(e)},i1=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!H(e)||e&&"object"==typeof e&&(0,g.r3)(e,".sv")},i2=function(e,t,i,n){n&&void 0===t||i3((0,g.gK)(e,"value"),t,i)},i3=function(e,t,i){let n=i instanceof ex?new eq(i,e):i;if(void 0===t)throw Error(e+"contains undefined "+eH(n));if("function"==typeof t)throw Error(e+"contains a function "+eH(n)+" with contents = "+t.toString());if(H(t))throw Error(e+"contains "+t.toString()+" "+eH(n));if("string"==typeof t&&t.length>3495253.3333333335&&(0,g.ug)(t)>10485760)throw Error(e+"contains a string greater than 10485760 utf8 bytes "+eH(n)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let i=!1,r=!1;if(Q(t,(t,s)=>{if(".value"===t)i=!0;else if(".priority"!==t&&".sv"!==t&&(r=!0,!iX(t)))throw Error(e+" contains an invalid key ("+t+") "+eH(n)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,g.ug)(t),eU(n),i3(e,s,n),function(e){let t=e.parts_.pop();e.byteLength_-=(0,g.ug)(t),e.parts_.length>0&&(e.byteLength_-=1)}(n)}),i&&r)throw Error(e+' contains ".value" child '+eH(n)+" in addition to actual children.")}},i4=function(e,t){let i,n;for(i=0;i<t.length;i++){let r=eO(n=t[i]);for(let t=0;t<r.length;t++)if(".priority"===r[t]&&t===r.length-1);else if(!iX(r[t]))throw Error(e+"contains an invalid key ("+r[t]+") in path "+n.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(eL);let r=null;for(i=0;i<t.length;i++){if(n=t[i],null!==r&&eF(r,n))throw Error(e+"contains a path "+r.toString()+" that is ancestor of another path "+n.toString());r=n}},i6=function(e,t,i,n){if((!n||void 0!==i)&&!i0(i))throw Error((0,g.gK)(e,t)+'was an invalid path = "'+i+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},i8=function(e,t,i,n){i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),i6(e,t,i,n)},i5=function(e,t){if(".info"===ek(t))throw Error(e+" failed = Can't modify data under /.info/")},i9=function(e,t){var i;let n=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!iX(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&((i=n)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),!i0(i)))throw Error((0,g.gK)(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i7{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ne(e,t){let i=null;for(let n=0;n<t.length;n++){let r=t[n],s=r.getPath();null===i||ej(s,i.path)||(e.eventLists_.push(i),i=null),null===i&&(i={events:[],path:s}),i.events.push(r)}i&&e.eventLists_.push(i)}function nt(e,t,i){ne(e,i),nn(e,e=>ej(e,t))}function ni(e,t,i){ne(e,i),nn(e,e=>eF(e,t)||eF(t,e))}function nn(e,t){e.recursionDepth_++;let i=!0;for(let n=0;n<e.eventLists_.length;n++){let r=e.eventLists_[n];r&&(t(r.path)?(function(e){for(let t=0;t<e.events.length;t++){let i=e.events[t];if(null!==i){e.events[t]=null;let n=i.getEventRunner();R&&M("event: "+i.toString()),ee(n)}}}(e.eventLists_[n]),e.eventLists_[n]=null):i=!1)}i&&(e.eventLists_=[]),e.recursionDepth_--}class nr{constructor(e,t,i,n){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new i7,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=tv(),this.transactionQueueTree_=new iz,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function ns(e){var t;return(t=t={timestamp:function(e){let t=e.infoData_.getNode(new ex(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}(e)}).timestamp=t.timestamp||new Date().getTime(),t}function no(e,t,i,n,r){e.dataUpdateCount++;let s=new ex(t);i=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,i):i;let o=[];if(r){if(n){let t=(0,g.UI)(i,e=>tn(e));o=function(e,t,i,n){let r=iD(e,n);if(!r)return[];{let n=iA(r),s=n.path,o=n.queryId,a=eM(s,t),l=tU.fromObject(i);return iM(e,s,new tN(tI(o),a,l))}}(e.serverSyncTree_,s,t,r)}else{let t=tn(i);o=function(e,t,i,n){let r=iD(e,n);if(null==r)return[];{let n=iA(r),s=n.path,o=n.queryId,a=eM(s,t);return iM(e,s,new tP(tI(o),a,i))}}(e.serverSyncTree_,s,t,r)}}else if(n){let t=(0,g.UI)(i,e=>tn(e));o=function(e,t,i){let n=tU.fromObject(i);return iP(e,new tN(tx(),t,n))}(e.serverSyncTree_,s,t)}else{let t=tn(i);o=ix(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=nf(e,s)),ni(e.eventQueue_,a,o)}function na(e,t){nl(e,"connected",t),!1===t&&function(e){nu(e,"onDisconnectEvents");let t=ns(e),i=tv();tw(e.onDisconnect_,eI(),(n,r)=>{let s=iW(r,new iF(e.serverSyncTree_,n),t);tb(i,n,s)});let n=[];tw(i,eI(),(t,i)=>{n=n.concat(ix(e.serverSyncTree_,t,i));let r=ny(e,t);nf(e,r)}),e.onDisconnect_=tv(),ni(e.eventQueue_,eI(),n)}(e)}function nl(e,t,i){let n=new ex("/.info/"+t),r=tn(i);e.infoData_.updateSnapshot(n,r);let s=ix(e.infoSyncTree_,n,r);ni(e.eventQueue_,n,s)}function nh(e){return e.nextWriteId_++}function nc(e,t,i){let n;n=".info"===ek(t._path)?iI(e.infoSyncTree_,t,i):iI(e.serverSyncTree_,t,i),nt(e.eventQueue_,t._path,n)}function nu(e,...t){let i="";e.persistentConnection_&&(i=e.persistentConnection_.id+":"),M(i,...t)}function nd(e,t,i,n){t&&ee(()=>{if("ok"===i)t(null);else{let e=(i||"error").toUpperCase(),r=e;n&&(r+=": "+n);let s=Error(r);s.code=e,t(s)}})}function np(e,t,i){return iT(e.serverSyncTree_,t,i)||te.EMPTY_NODE}function nf(e,t){let i=n_(e,t),n=iQ(i),r=ng(e,i);return function(e,t,i){if(0===t.length)return;let n=[],r=[],s=t.filter(e=>0===e.status).map(e=>e.currentWriteId);for(let o=0;o<t.length;o++){let a=t[o],l=eM(i,a.path),h=!1,c;if((0,g.hu)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===a.status)h=!0,c=a.abortReason,r=r.concat(iS(e.serverSyncTree_,a.currentWriteId,!0));else if(0===a.status){if(a.retryCount>=25)h=!0,c="maxretry",r=r.concat(iS(e.serverSyncTree_,a.currentWriteId,!0));else{let i=np(e,a.path,s);a.currentInputSnapshot=i;let n=t[o].update(i.val());if(void 0!==n){i3("transaction failed: Data returned ",n,a.path);let t=tn(n);"object"==typeof n&&null!=n&&(0,g.r3)(n,".priority")||(t=t.updatePriority(i.getPriority()));let o=a.currentWriteId,l=iB(t,i,ns(e));a.currentOutputSnapshotRaw=t,a.currentOutputSnapshotResolved=l,a.currentWriteId=nh(e),s.splice(s.indexOf(o),1),r=(r=r.concat(iE(e.serverSyncTree_,a.path,l,a.currentWriteId,a.applyLocally))).concat(iS(e.serverSyncTree_,o,!0))}else h=!0,c="nodata",r=r.concat(iS(e.serverSyncTree_,a.currentWriteId,!0))}}ni(e.eventQueue_,i,r),r=[],h&&(t[o].status=2,setTimeout(t[o].unwatcher,Math.floor(0)),t[o].onComplete&&("nodata"===c?n.push(()=>t[o].onComplete(null,!1,t[o].currentInputSnapshot)):n.push(()=>t[o].onComplete(Error(c),!1,null))))}nm(e,e.transactionQueueTree_);for(let e=0;e<n.length;e++)ee(n[e]);(function e(t,i=t.transactionQueueTree_){if(i||nm(t,i),i$(i)){let n=ng(t,i);(0,g.hu)(n.length>0,"Sending zero length transaction queue"),n.every(e=>0===e.status)&&function(t,i,n){let r=np(t,i,n.map(e=>e.currentWriteId)),s=r,o=r.hash();for(let e=0;e<n.length;e++){let t=n[e];(0,g.hu)(0===t.status,"tryToSendTransactionQueue_: items in queue should all be run."),t.status=1,t.retryCount++;let r=eM(i,t.path);s=s.updateChild(r,t.currentOutputSnapshotRaw)}let a=s.val(!0);t.server_.put(i.toString(),a,r=>{nu(t,"transaction put response",{path:i.toString(),status:r});let s=[];if("ok"===r){let r=[];for(let e=0;e<n.length;e++)n[e].status=2,s=s.concat(iS(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&r.push(()=>n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)),n[e].unwatcher();nm(t,iV(t.transactionQueueTree_,i)),e(t,t.transactionQueueTree_),ni(t.eventQueue_,i,s);for(let e=0;e<r.length;e++)ee(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{q("transaction at "+i.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}nf(t,i)}},o)}(t,iQ(i),n)}else iY(i)&&iK(i,i=>{e(t,i)})})(e,e.transactionQueueTree_)}(e,r,n),n}function n_(e,t){let i;let n=e.transactionQueueTree_;for(i=ek(t);null!==i&&void 0===i$(n);)n=iV(n,i),i=ek(t=eP(t));return n}function ng(e,t){let i=[];return function e(t,i,n){let r=i$(i);if(r)for(let e=0;e<r.length;e++)n.push(r[e]);iK(i,i=>{e(t,i,n)})}(e,t,i),i.sort((e,t)=>e.order-t.order),i}function nm(e,t){let i=i$(t);if(i){let e=0;for(let t=0;t<i.length;t++)2!==i[t].status&&(i[e]=i[t],e++);i.length=e,iG(t,i.length>0?i:void 0)}iK(t,t=>{nm(e,t)})}function ny(e,t){let i=iQ(n_(e,t)),n=iV(e.transactionQueueTree_,t);return function(e,t,i){let n=e.parent;for(;null!==n;){if(t(n))return!0;n=n.parent}}(n,t=>{nv(e,t)}),nv(e,n),function e(t,i,n,r){n&&!r&&i(t),iK(t,t=>{e(t,i,!0,r)}),n&&r&&i(t)}(n,t=>{nv(e,t)}),i}function nv(e,t){let i=i$(t);if(i){let n=[],r=[],s=-1;for(let t=0;t<i.length;t++)3===i[t].status||(1===i[t].status?((0,g.hu)(s===t-1,"All SENT items should be at beginning of queue."),s=t,i[t].status=3,i[t].abortReason="set"):((0,g.hu)(0===i[t].status,"Unexpected transaction status in abort"),i[t].unwatcher(),r=r.concat(iS(e.serverSyncTree_,i[t].currentWriteId,!0)),i[t].onComplete&&n.push(i[t].onComplete.bind(null,Error("set"),!1,null))));-1===s?iG(t,void 0):i.length=s+1,ni(e.eventQueue_,iQ(t),r);for(let e=0;e<n.length;e++)ee(n[e])}}let nb=function(e,t){let i=nw(e),n=i.namespace;"firebase.com"===i.domain&&F(i.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!==n||"localhost"===i.domain||F("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),i.secure||U();let r="ws"===i.scheme||"wss"===i.scheme;return{repoInfo:new ei(i.host,i.secure,n,r,t,"",n!==i.subdomain),path:new ex(i.pathString)}},nw=function(e){let t="",i="",n="",r="",s="",o=!0,a="https",l=443;if("string"==typeof e){let h=e.indexOf("//");h>=0&&(a=e.substring(0,h-1),e=e.substring(h+2));let c=e.indexOf("/");-1===c&&(c=e.length);let u=e.indexOf("?");-1===u&&(u=e.length),t=e.substring(0,Math.min(c,u)),c<u&&(r=/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){let t="",i=e.split("/");for(let e=0;e<i.length;e++)if(i[e].length>0){let n=i[e];try{n=decodeURIComponent(n.replace(/\+/g," "))}catch(e){}t+="/"+n}return t}(e.substring(c,u)));let d=function(e){let t={};for(let i of("?"===e.charAt(0)&&(e=e.substring(1)),e.split("&"))){if(0===i.length)continue;let n=i.split("=");2===n.length?t[decodeURIComponent(n[0])]=decodeURIComponent(n[1]):q(`Invalid query segment '${i}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,u)));(h=t.indexOf(":"))>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(h+1),10)):h=t.length;let p=t.slice(0,h);if("localhost"===p.toLowerCase())i="localhost";else if(p.split(".").length<=2)i=p;else{let e=t.indexOf(".");n=t.substring(0,e).toLowerCase(),i=t.substring(e+1),s=n}"ns"in d&&(s=d.ns)}return{host:t,port:l,domain:i,subdomain:n,secure:o,scheme:a,pathString:r,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,t,i,n){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=n}getPath(){let e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,g.Wl)(this.snapshot.exportVal())}}class nE{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,g.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e,t,i,n){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=n}get key(){return eA(this._path)?null:eN(this._path)}get ref(){return new nT(this._repo,this._path)}get _queryIdentifier(){let e=Y(tg(this._queryParams));return"{}"===e?"default":e}get _queryObject(){return tg(this._queryParams)}isEqual(e){if(!((e=(0,g.m9)(e))instanceof nx))return!1;let t=this._repo===e._repo,i=ej(this._path,e._path),n=this._queryIdentifier===e._queryIdentifier;return t&&i&&n}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let i=e.pieceNum_;i<e.pieces_.length;i++)""!==e.pieces_[i]&&(t+="/"+encodeURIComponent(String(e.pieces_[i])));return t||"/"}(this._path)}}function nI(e){let t=null,i=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(i=e.getIndexEndValue()),e.getIndex()===eG){let n="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==W)throw Error(n);if("string"!=typeof t)throw Error(r)}if(e.hasEnd()){if(e.getIndexEndName()!==z)throw Error(n);if("string"!=typeof i)throw Error(r)}}else if(e.getIndex()===e4){if(null!=t&&!i1(t)||null!=i&&!i1(i))throw Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,g.hu)(e.getIndex() instanceof tr||e.getIndex()===to,"unknown index type."),null!=t&&"object"==typeof t||null!=i&&"object"==typeof i)throw Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function nk(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class nT extends nx{constructor(e,t){super(e,t,new tf,!1)}get parent(){let e=eR(this._path);return null===e?null:new nT(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class nP{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let t=new ex(e),i=nO(this.ref,e);return new nP(this._node.getChild(t),i,e4)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(t,i)=>e(new nP(i,nO(this.ref,t),e4)))}hasChild(e){let t=new ex(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function nN(e,t){return(e=(0,g.m9)(e))._checkNotDeleted("ref"),void 0!==t?nO(e._root,t):e._root}function nO(e,t){return null===ek((e=(0,g.m9)(e))._path)?i8("child","path",t,!1):i6("child","path",t,!1),new nT(e._repo,eD(e._path,t))}function nR(e,t){i5("set",(e=(0,g.m9)(e))._path),i2("set",t,e._path,!1);let i=new g.BH;return function(e,t,i,n,r){nu(e,"set",{path:t.toString(),value:i,priority:null});let s=ns(e),o=tn(i,null),a=iB(o,iT(e.serverSyncTree_,t),s),l=nh(e),h=iE(e.serverSyncTree_,t,a,l,!0);ne(e.eventQueue_,h),e.server_.put(t.toString(),o.val(!0),(i,n)=>{let s="ok"===i;s||q("set at "+t+" failed: "+i);let o=iS(e.serverSyncTree_,l,!s);ni(e.eventQueue_,t,o),nd(e,r,i,n)});let c=ny(e,t);nf(e,c),ni(e.eventQueue_,c,[])}(e._repo,e._path,t,null,i.wrapCallback(()=>{})),i.promise}class nD{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){let i=t._queryParams.getIndex();return new nC("value",this,new nP(e.snapshotNode,new nT(t._repo,t._path),i))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new nE(this,e,t):null}matches(e){return e instanceof nD&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class nA{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new nE(this,e,t):null}createEvent(e,t){(0,g.hu)(null!=e.childName,"Child events should have a childName.");let i=nO(new nT(t._repo,t._path),e.childName),n=t._queryParams.getIndex();return new nC(e.type,this,new nP(e.snapshotNode,i,n),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof nA&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function nM(e,t,i,n){return function(e,t,i,n,r){var s;let o,a;if("object"==typeof n&&(o=void 0,r=n),"function"==typeof n&&(o=n),r&&r.onlyOnce){let t=i,n=(i,n)=>{nc(e._repo,e,h),t(i,n)};n.userCallback=i.userCallback,n.context=i.context,i=n}let l=new nS(i,o||void 0),h="value"===t?new nD(l):new nA(t,l);return s=e._repo,a=".info"===ek(e._path)?ik(s.infoSyncTree_,e,h):ik(s.serverSyncTree_,e,h),nt(s.eventQueue_,e._path,a),()=>nc(e._repo,e,h)}(e,"value",t,i,n)}class nL{}(0,g.hu)(!u,"__referenceConstructor has already been defined"),u=nT,(0,g.hu)(!d,"__referenceConstructor has already been defined"),d=nT;let nj={};class nF{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(e,t,i){if(e.stats_=ea(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new tm(e.repoInfo_,(t,i,n,r)=>{no(e,t,i,n,r)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>na(e,!0),0);else{if(null!=i){if("object"!=typeof i)throw Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,g.Wl)(i)}catch(e){throw Error("Invalid authOverride provided: "+e)}}e.persistentConnection_=new eW(e.repoInfo_,t,(t,i,n,r)=>{no(e,t,i,n,r)},t=>{na(e,t)},t=>{Q(t,(t,i)=>{nl(e,t,i)})},e.authTokenProvider_,e.appCheckProvider_,i),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(t=>{e.server_.refreshAuthToken(t)}),e.appCheckProvider_.addTokenChangeListener(t=>{e.server_.refreshAppCheckToken(t.token)}),e.statsReporter_=function(e,t){let i=e.toString();return eo[i]||(eo[i]=t()),eo[i]}(e.repoInfo_,()=>new tE(e.stats_,e.server_)),e.infoData_=new ty,e.infoSyncTree_=new iC({startListening:(t,i,n,r)=>{let s=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=ix(e.infoSyncTree_,t._path,o),setTimeout(()=>{r("ok")},0)),s},stopListening:()=>{}}),nl(e,"connected",!1),e.serverSyncTree_=new iC({startListening:(t,i,n,r)=>(e.server_.listen(t,n,i,(i,n)=>{let s=r(i,n);ni(e.eventQueue_,t._path,s)}),[]),stopListening:(t,i)=>{e.server_.unlisten(t,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new nT(this._repo,eI())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(e,t){let i=nj[t];i&&i[e.key]===e||F(`Database ${t}(${e.repoInfo_}) has already been deleted.`),e.persistentConnection_&&e.persistentConnection_.interrupt("repo_interrupt"),delete i[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&F("Cannot call "+e+" on a deleted database.")}}function nq(e=(0,y.Mq)(),t){let i=(0,y.qX)(e,"database").getImmediate({identifier:t});if(!i._instanceStarted){let e=(0,g.P0)("database");e&&function(e,t,i,n={}){var r;let s;(e=(0,g.m9)(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&F("Cannot call useEmulator() after instance has already been initialized.");let o=e._repoInternal;o.repoInfo_.nodeAdmin?(n.mockUserToken&&F('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new e_(e_.OWNER)):n.mockUserToken&&(s=new e_("string"==typeof n.mockUserToken?n.mockUserToken:(0,g.Sg)(n.mockUserToken,e.app.options.projectId))),r=s,o.repoInfo_=new ei(`${t}:${i}`,!1,o.repoInfo_.namespace,o.repoInfo_.webSocketOnly,o.repoInfo_.nodeAdmin,o.repoInfo_.persistenceKey,o.repoInfo_.includeNamespaceInQueryParams,!0),r&&(o.authTokenProvider_=r)}(i,...e)}return i}eW.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},eW.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},eh=_.Client,p="node",el=y.Jn,(0,y.Xd)(new v.wA("database",(e,{instanceIdentifier:t})=>(function(e,t,i,n,r){var s,o;let a,l,h,c,u=n||e.options.databaseURL;void 0===u&&(e.options.projectId||F("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),M("Using default host for project ",e.options.projectId),u=`${e.options.projectId}-default-rtdb.firebaseio.com`);let d=nb(u,void 0),p=d.repoInfo;"undefined"!=typeof process&&process.env&&(h=process.env.FIREBASE_DATABASE_EMULATOR_HOST),h?(c=!0,p=(d=nb(u=`http://${h}?ns=${p.namespace}`,void 0)).repoInfo):c=!d.repoInfo.secure;let f=r&&c?new e_(e_.OWNER):new ef(e.name,e.options,t);return i9("Invalid Firebase Database URL",d),eA(d.path)||F("Database URL must point to the root of a Firebase Database (not including a child path)."),new nF((s=p,o=new ep(e.name,i),(a=nj[e.name])||(a={},nj[e.name]=a),(l=a[s.toURLString()])&&F("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new nr(s,!1,f,o),a[s.toURLString()]=l,l),e)})(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,y.KN)(eu,ed,p),(0,y.KN)(eu,ed,"esm2017")},381:(e,t,i)=>{"use strict";i.d(t,{Toaster:()=>eh,ZP:()=>ec});var n,r=i(7577);let s={data:""},o=e=>"object"==typeof window?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||s,a=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,l=/\/\*[^]*?\*\/|  +/g,h=/\n+/g,c=(e,t)=>{let i="",n="",r="";for(let s in e){let o=e[s];"@"==s[0]?"i"==s[1]?i=s+" "+o+";":n+="f"==s[1]?c(o,s):s+"{"+c(o,"k"==s[1]?"":t)+"}":"object"==typeof o?n+=c(o,t?t.replace(/([^,])+/g,e=>s.replace(/(^:.*)|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):s):null!=o&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=c.p?c.p(s,o):s+":"+o+";")}return i+(t&&r?t+"{"+r+"}":r)+n},u={},d=e=>{if("object"==typeof e){let t="";for(let i in e)t+=i+d(e[i]);return t}return e},p=(e,t,i,n,r)=>{let s=d(e),o=u[s]||(u[s]=(e=>{let t=0,i=11;for(;t<e.length;)i=101*i+e.charCodeAt(t++)>>>0;return"go"+i})(s));if(!u[o]){let t=s!==e?e:(e=>{let t,i,n=[{}];for(;t=a.exec(e.replace(l,""));)t[4]?n.shift():t[3]?(i=t[3].replace(h," ").trim(),n.unshift(n[0][i]=n[0][i]||{})):n[0][t[1]]=t[2].replace(h," ").trim();return n[0]})(e);u[o]=c(r?{["@keyframes "+o]:t}:t,i?"":"."+o)}let p=i&&u.g?u.g:null;return i&&(u.g=u[o]),((e,t,i,n)=>{n?t.data=t.data.replace(n,e):-1===t.data.indexOf(e)&&(t.data=i?e+t.data:t.data+e)})(u[o],t,n,p),o},f=(e,t,i)=>e.reduce((e,n,r)=>{let s=t[r];if(s&&s.call){let e=s(i),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;s=t?"."+t:e&&"object"==typeof e?e.props?"":c(e,""):!1===e?"":e}return e+n+(null==s?"":s)},"");function _(e){let t=this||{},i=e.call?e(t.p):e;return p(i.unshift?i.raw?f(i,[].slice.call(arguments,1),t.p):i.reduce((e,i)=>Object.assign(e,i&&i.call?i(t.p):i),{}):i,o(t.target),t.g,t.o,t.k)}_.bind({g:1});let g,m,y,v=_.bind({k:1});function b(e,t){let i=this||{};return function(){let n=arguments;function r(s,o){let a=Object.assign({},s),l=a.className||r.className;i.p=Object.assign({theme:m&&m()},a),i.o=/ *go\d+/.test(l),a.className=_.apply(i,n)+(l?" "+l:""),t&&(a.ref=o);let h=e;return e[0]&&(h=a.as||e,delete a.as),y&&h[0]&&y(a),g(h,a)}return t?t(r):r}}var w=e=>"function"==typeof e,C=(e,t)=>w(e)?e(t):e,E=(()=>{let e=0;return()=>(++e).toString()})(),S=(()=>{let e;return()=>e})(),x=new Map,I=e=>{if(x.has(e))return;let t=setTimeout(()=>{x.delete(e),O({type:4,toastId:e})},1e3);x.set(e,t)},k=e=>{let t=x.get(e);t&&clearTimeout(t)},T=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,20)};case 1:return t.toast.id&&k(t.toast.id),{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case 2:let{toast:i}=t;return e.toasts.find(e=>e.id===i.id)?T(e,{type:1,toast:i}):T(e,{type:0,toast:i});case 3:let{toastId:n}=t;return n?I(n):e.toasts.forEach(e=>{I(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===n||void 0===n?{...e,visible:!1}:e)};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let r=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(e=>({...e,pauseDuration:e.pauseDuration+r}))}}},P=[],N={toasts:[],pausedAt:void 0},O=e=>{N=T(N,e),P.forEach(e=>{e(N)})},R={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},D=(e={})=>{let[t,i]=(0,r.useState)(N);(0,r.useEffect)(()=>(P.push(i),()=>{let e=P.indexOf(i);e>-1&&P.splice(e,1)}),[t]);let n=t.toasts.map(t=>{var i,n;return{...e,...e[t.type],...t,duration:t.duration||(null==(i=e[t.type])?void 0:i.duration)||(null==e?void 0:e.duration)||R[t.type],style:{...e.style,...null==(n=e[t.type])?void 0:n.style,...t.style}}});return{...t,toasts:n}},A=(e,t="blank",i)=>({createdAt:Date.now(),visible:!0,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...i,id:(null==i?void 0:i.id)||E()}),M=e=>(t,i)=>{let n=A(t,e,i);return O({type:2,toast:n}),n.id},L=(e,t)=>M("blank")(e,t);L.error=M("error"),L.success=M("success"),L.loading=M("loading"),L.custom=M("custom"),L.dismiss=e=>{O({type:3,toastId:e})},L.remove=e=>O({type:4,toastId:e}),L.promise=(e,t,i)=>{let n=L.loading(t.loading,{...i,...null==i?void 0:i.loading});return e.then(e=>(L.success(C(t.success,e),{id:n,...i,...null==i?void 0:i.success}),e)).catch(e=>{L.error(C(t.error,e),{id:n,...i,...null==i?void 0:i.error})}),e};var j=(e,t)=>{O({type:1,toast:{id:e,height:t}})},F=()=>{O({type:5,time:Date.now()})},q=e=>{let{toasts:t,pausedAt:i}=D(e);(0,r.useEffect)(()=>{if(i)return;let e=Date.now(),n=t.map(t=>{if(t.duration===1/0)return;let i=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(i<0){t.visible&&L.dismiss(t.id);return}return setTimeout(()=>L.dismiss(t.id),i)});return()=>{n.forEach(e=>e&&clearTimeout(e))}},[t,i]);let n=(0,r.useCallback)(()=>{i&&O({type:6,time:Date.now()})},[i]),s=(0,r.useCallback)((e,i)=>{let{reverseOrder:n=!1,gutter:r=8,defaultPosition:s}=i||{},o=t.filter(t=>(t.position||s)===(e.position||s)&&t.height),a=o.findIndex(t=>t.id===e.id),l=o.filter((e,t)=>t<a&&e.visible).length;return o.filter(e=>e.visible).slice(...n?[l+1]:[0,l]).reduce((e,t)=>e+(t.height||0)+r,0)},[t]);return{toasts:t,handlers:{updateHeight:j,startPause:F,endPause:n,calculateOffset:s}}},U=v`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,H=v`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,B=v`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,W=b("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${U} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${H} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${B} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,z=v`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,V=b("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${z} 1s linear infinite;
`,$=v`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,G=v`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Y=b("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${$} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${G} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,K=b("div")`
  position: absolute;
`,Q=b("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Z=v`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,J=b("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Z} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,X=({toast:e})=>{let{icon:t,type:i,iconTheme:n}=e;return void 0!==t?"string"==typeof t?r.createElement(J,null,t):t:"blank"===i?null:r.createElement(Q,null,r.createElement(V,{...n}),"loading"!==i&&r.createElement(K,null,"error"===i?r.createElement(W,{...n}):r.createElement(Y,{...n})))},ee=e=>`
0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,et=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}
`,ei=b("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,en=b("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,er=(e,t)=>{let i=e.includes("top")?1:-1,[n,r]=S()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[ee(i),et(i)];return{animation:t?`${v(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${v(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},es=r.memo(({toast:e,position:t,style:i,children:n})=>{let s=e.height?er(e.position||t||"top-center",e.visible):{opacity:0},o=r.createElement(X,{toast:e}),a=r.createElement(en,{...e.ariaProps},C(e.message,e));return r.createElement(ei,{className:e.className,style:{...s,...i,...e.style}},"function"==typeof n?n({icon:o,message:a}):r.createElement(r.Fragment,null,o,a))});n=r.createElement,c.p=void 0,g=n,m=void 0,y=void 0;var eo=({id:e,className:t,style:i,onHeightUpdate:n,children:s})=>{let o=r.useCallback(t=>{if(t){let i=()=>{n(e,t.getBoundingClientRect().height)};i(),new MutationObserver(i).observe(t,{subtree:!0,childList:!0,characterData:!0})}},[e,n]);return r.createElement("div",{ref:o,className:t,style:i},s)},ea=(e,t)=>{let i=e.includes("top"),n=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:S()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(i?1:-1)}px)`,...i?{top:0}:{bottom:0},...n}},el=_`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,eh=({reverseOrder:e,position:t="top-center",toastOptions:i,gutter:n,children:s,containerStyle:o,containerClassName:a})=>{let{toasts:l,handlers:h}=q(i);return r.createElement("div",{style:{position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none",...o},className:a,onMouseEnter:h.startPause,onMouseLeave:h.endPause},l.map(i=>{let o=i.position||t,a=ea(o,h.calculateOffset(i,{reverseOrder:e,gutter:n,defaultPosition:t}));return r.createElement(eo,{id:i.id,key:i.id,onHeightUpdate:h.updateHeight,className:i.visible?el:"",style:a},"custom"===i.type?C(i.message,i):s?s(i):r.createElement(es,{toast:i,position:o}))}))},ec=L}};var t=require("../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),n=t.X(0,[857],()=>i(8346));module.exports=n})();